"use strict";(self.webpackChunkAppTuristica=self.webpackChunkAppTuristica||[]).push([[863],{9863:(j,f,a)=>{a.r(f),a.d(f,{CategoriaModule:()=>$});var A=a(9808),Z=a(1813),n=a(3075),l=a(2340),t=a(7587),m=a(8529),c=a(9783),h=a(1424),v=a(4036),p=a(845),d=a(1497);let b=(()=>{class i{constructor(e,r,s){this.clasificadosService=e,this.fb=r,this.messageService=s,this.API_URI=l.N.API_URI,this.categorias=[],this.secciones=[],this.form=this.fb.group({name:["",n.kI.required],seccionId:["",n.kI.required]})}ngOnInit(){this.token=localStorage.getItem("token"),this.traerCategorias(),this.traerSecciones()}onSubmit(){if(this.categorias.includes(this.form.value.name.trim().toLowerCase()))return this.messageService.add({severity:"error",summary:"Error",detail:"Esta categoria ya existe"});let e={name:this.form.value.name,seccionId:this.form.value.seccionId.id};try{this.clasificadosService.create(`${this.API_URI}/advertisements/category/create/`,e,this.token).subscribe(r=>(this.form.reset(),this.messageService.add({severity:"success",summary:"Success",detail:"Creado correctamente !!"})))}catch(r){return console.log(r),this.messageService.add({severity:"error",summary:"Error",detail:"Hubo un problema en la peticion"})}}traerSecciones(){this.secciones=[];try{this.clasificadosService.getAll(`${this.API_URI}/advertisements/seccion/`,this.token).subscribe(e=>this.secciones=e.data.results)}catch(e){console.log(e)}}traerCategorias(){this.categorias=[];try{this.clasificadosService.getAll(`${this.API_URI}/advertisements/category/`,this.token).subscribe(e=>{e.data.results.map(r=>this.categorias.push(r.name.trim().toLowerCase()))})}catch(e){console.log(e)}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.U),t.Y36(n.qu),t.Y36(c.ez))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-crear"]],decls:8,vars:4,consts:[[1,"main"],[3,"formGroup","submit"],["type","text","placeholder","Nombre","pInputText","","formControlName","name"],["placeholder","Selecciona una seccion","optionLabel","name","formControlName","seccionId",3,"options","showClear"],["pButton","","pRipple","","type","submit","label","Crear solicitud",1,"p-button-success",3,"disabled"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h1"),t._uU(2,"Crear Categoria"),t.qZA(),t.TgZ(3,"form",1),t.NdJ("submit",function(){return r.onSubmit()}),t._UZ(4,"input",2),t._UZ(5,"p-dropdown",3),t._UZ(6,"button",4),t.qZA(),t.qZA(),t._UZ(7,"p-toast")),2&e&&(t.xp6(3),t.Q6J("formGroup",r.form),t.xp6(2),t.Q6J("options",r.secciones)("showClear",!0),t.xp6(1),t.Q6J("disabled",!r.form.valid))},directives:[n._Y,n.JL,n.sg,n.Fj,h.o,n.JJ,n.u,v.Lt,p.Hq,d.FN],styles:[".main[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}form[_ngcontent-%COMP%]{width:500px;border:1px solid rgba(128,128,128,.555);border-radius:10px;padding:20px;display:flex;justify-content:center;align-items:center;flex-direction:column}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], button[_ngcontent-%COMP%], p-dropdown[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{margin-top:10px;width:100%}"]}),i})();var u=a(6697),C=a(5315);function T(i,o){1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"th",9),t._uU(2,"Indice"),t.qZA(),t.TgZ(3,"th",9),t._uU(4,"ID"),t.qZA(),t.TgZ(5,"th",9),t._uU(6,"Nombre"),t.qZA(),t.TgZ(7,"th",9),t._uU(8,"Seccion"),t.qZA(),t.TgZ(9,"th",9),t._uU(10,"Editar"),t.qZA(),t.qZA())}function x(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t.TgZ(10,"button",10),t.NdJ("click",function(){const g=t.CHM(e).$implicit;return t.oxw().showEditar(g.id)}),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=o.$implicit,r=o.rowIndex;t.xp6(2),t.Oqu(r),t.xp6(2),t.Oqu(e.id),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.seccionId)}}const I=function(){return{"min-width":"60rem"}},U=function(){return{width:"600px",height:"500px"}};let q=(()=>{class i{constructor(e,r,s){this.fb=e,this.clasificadosService=r,this.messageService=s,this.API_URI=l.N.API_URI,this.id="",this.categorias=[],this.categoriasVerificated=[],this.display=!1,this.form=this.fb.group({name:["",n.kI.required]})}ngOnInit(){this.token=localStorage.getItem("token"),this.traerCategorias()}showEditar(e){this.id=e,this.display=!this.display}submit(){if(this.categoriasVerificated.includes(this.form.value.name.trim().toLowerCase()))return this.messageService.add({severity:"error",summary:"Error",detail:"Esta categoria ya existe"});try{this.clasificadosService.update(`${this.API_URI}/advertisements/category/update/${this.id}/`,this.form.value,this.token).subscribe(e=>(this.traerCategorias(),this.form.reset(),this.display=!1,this.messageService.add({severity:"success",summary:"Success",detail:"Editado correctamente !!!"})))}catch(e){console.log(e)}}traerCategorias(){this.categorias=[],this.categorias=[];try{this.clasificadosService.getAll(`${this.API_URI}/advertisements/category/`,this.token).subscribe(e=>{this.categorias=e.data.results,e.data.results.map(r=>this.categoriasVerificated.push(r.name.trim().toLowerCase()))})}catch(e){console.log(e)}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(n.qu),t.Y36(m.U),t.Y36(c.ez))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-editar"]],decls:12,vars:12,consts:[[1,"main"],[3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],["header","Editar categoria",3,"visible","modal","draggable","resizable","visibleChange"],[1,"grid","dialog-form-crear","col-12","md:col-12","lg:col-12"],[3,"formGroup","submit"],["type","text","placeholder","Nombre","pInputText","","formControlName","name"],["pButton","","pRipple","","type","submit","label","Editar seccion",1,"p-button-warning",3,"disabled"],[2,"width","20%"],["pButton","","pRipple","","type","button","icon","pi pi-pencil",1,"p-button-rounded","p-button-warning","mx-3",3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h1"),t._uU(2,"Editar Categorias"),t.qZA(),t.TgZ(3,"p-table",1),t.YNc(4,T,11,0,"ng-template",2),t.YNc(5,x,11,4,"ng-template",3),t.qZA(),t.qZA(),t.TgZ(6,"p-dialog",4),t.NdJ("visibleChange",function(g){return r.display=g}),t.TgZ(7,"div",5),t.TgZ(8,"form",6),t.NdJ("submit",function(){return r.submit()}),t._UZ(9,"input",7),t._UZ(10,"button",8),t.qZA(),t.qZA(),t.qZA(),t._UZ(11,"p-toast")),2&e&&(t.xp6(3),t.Q6J("value",r.categorias)("tableStyle",t.DdM(10,I)),t.xp6(3),t.Akn(t.DdM(11,U)),t.Q6J("visible",r.display)("modal",!0)("draggable",!1)("resizable",!1),t.xp6(2),t.Q6J("formGroup",r.form),t.xp6(2),t.Q6J("disabled",!r.form.valid))},directives:[u.iA,c.jx,p.Hq,C.V,n._Y,n.JL,n.sg,n.Fj,h.o,n.JJ,n.u,d.FN],styles:[".main[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}form[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;flex-direction:column;padding:20px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], button[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], p-dropdown[_ngcontent-%COMP%]{margin-top:10px;width:80%}"]}),i})();var _=a(7307);function S(i,o){1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"th",4),t._uU(2,"Indice"),t.qZA(),t.TgZ(3,"th",4),t._uU(4,"ID"),t.qZA(),t.TgZ(5,"th",4),t._uU(6,"Nombre"),t.qZA(),t.TgZ(7,"th",4),t._uU(8,"Seccion"),t.qZA(),t.TgZ(9,"th",4),t._uU(10,"Eliminar"),t.qZA(),t.qZA())}function P(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._UZ(10,"p-confirmPopup"),t.TgZ(11,"button",5),t.NdJ("click",function(s){const y=t.CHM(e).$implicit;return t.oxw().confirm(s,y.id)}),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=o.$implicit,r=o.rowIndex;t.xp6(2),t.Oqu(r),t.xp6(2),t.Oqu(e.id),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.seccionId)}}const E=function(){return{"min-width":"60rem"}};let O=(()=>{class i{constructor(e,r,s){this.clasificadosService=e,this.messageService=r,this.confirmationService=s,this.API_URI=l.N.API_URI,this.categorias=[]}ngOnInit(){this.token=localStorage.getItem("token"),this.traerSecciones()}traerSecciones(){this.categorias=[];try{this.clasificadosService.getAll(`${this.API_URI}/advertisements/category/`,this.token).subscribe(e=>this.categorias=e.data.results)}catch(e){console.log(e)}}confirm(e,r){this.confirmationService.confirm({target:e.target,message:"\xbfSeguro que desea eliminar esta categoria?",icon:"pi pi-exclamation-triangle",accept:()=>{try{this.clasificadosService.delete(`${this.API_URI}/advertisements/category/delete/${r}/`,this.token).subscribe(s=>(this.traerSecciones(),this.messageService.add({severity:"success",summary:"Success",detail:"Eliminado correctamente !!!"})))}catch(s){return console.log(s),this.messageService.add({severity:"error",summary:"Error",detail:"Hubo un problema en la consulta"})}},reject:()=>{}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.U),t.Y36(c.ez),t.Y36(c.YP))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-eliminar"]],decls:8,vars:3,consts:[[1,"main"],[3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],[2,"width","10%"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"p-button-rounded","p-button-danger","mx-3",3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h1"),t._uU(2,"Eliminar categorias"),t.qZA(),t.TgZ(3,"p-table",1),t.YNc(4,S,11,0,"ng-template",2),t.YNc(5,P,12,4,"ng-template",3),t.qZA(),t.qZA(),t._UZ(6,"p-toast"),t._UZ(7,"p-confirmPopup")),2&e&&(t.xp6(3),t.Q6J("value",r.categorias)("tableStyle",t.DdM(2,E)))},directives:[u.iA,c.jx,_.P,p.Hq,d.FN],styles:[".main[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}"]}),i})();function M(i,o){1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2,"Indice"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"ID"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Nombre"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Seccion"),t.qZA(),t.qZA())}function N(i,o){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.qZA()),2&i){const e=o.$implicit,r=o.rowIndex;t.xp6(2),t.Oqu(r),t.xp6(2),t.Oqu(e.id),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.seccionId)}}const w=function(){return{"min-width":"50rem"}},J=[{path:"crear",component:b},{path:"ver",component:(()=>{class i{constructor(e){this.clasificadosService=e,this.API_URI=l.N.API_URI,this.categorias=[]}ngOnInit(){this.token=localStorage.getItem("token"),this.traerCategorias()}traerCategorias(){try{this.clasificadosService.getAll(`${this.API_URI}/advertisements/category/`,this.token).subscribe(e=>{this.categorias=e.data.results})}catch(e){console.log(e)}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.U))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-ver"]],decls:6,vars:3,consts:[[1,"main"],[3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h1"),t._uU(2,"Ver Categorias"),t.qZA(),t.TgZ(3,"p-table",1),t.YNc(4,M,9,0,"ng-template",2),t.YNc(5,N,9,4,"ng-template",3),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("value",r.categorias)("tableStyle",t.DdM(2,w)))},directives:[u.iA,c.jx],styles:[".main[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}"]}),i})()},{path:"editar",component:q},{path:"eliminar",component:O}];let R=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[Z.Bz.forChild(J)],Z.Bz]}),i})();var Y=a(3407);let $=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[A.ez,R,n.u5,n.UX,h.j,p.hJ,d.EV,u.U$,C.S,v.kW,_.n,Y.A]]}),i})()}}]);