"use strict";(self.webpackChunkAppTuristica=self.webpackChunkAppTuristica||[]).push([[617],{2617:(ro,M,l)=>{l.r(M),l.d(M,{SeguimientoModule:()=>so});var _=l(9808),U=l(1813),A=l(2340),e=l(7587),b=l(3271),m=l(9783),c=l(3075),v=l(3569),C=l(1424),h=l(845),P=l(4297),T=l(6697),Z=l(5315),x=l(4036);function y(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"div",39),e.NdJ("click",function(){e.CHM(o);const i=e.oxw().$implicit;return e.oxw(2).toggleExpand(i)}),e.TgZ(1,"div",40),e._UZ(2,"img",41),e.TgZ(3,"div",42),e._uU(4),e.qZA(),e.TgZ(5,"div",43),e._uU(6),e.qZA(),e.TgZ(7,"span",44),e._uU(8),e.qZA(),e.TgZ(9,"div",45),e.TgZ(10,"div",46),e.TgZ(11,"span",47),e._uU(12),e.qZA(),e.TgZ(13,"span",48),e._uU(14),e.qZA(),e.TgZ(15,"span",49),e._uU(16),e.qZA(),e.qZA(),e.TgZ(17,"div",50),e._UZ(18,"div",51),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const o=e.oxw().$implicit,t=e.oxw(2);e.xp6(4),e.hij(" ",t.getSolicitudNombre(o)," "),e.xp6(2),e.hij(" ",t.getPasoNombre(t.recentSeguimientos[o].pasos_seguimiento)," "),e.xp6(2),e.hij(" ",t.getEstadoNombre(t.recentSeguimientos[o].estado_seguimiento)," "),e.xp6(4),e.hij("Progreso: ",t.getPorcentaje(t.recentSeguimientos[o].pasos_seguimiento),"%"),e.xp6(2),e.Oqu(t.recentSeguimientos[o].fecha_programacion),e.xp6(2),e.AsE("",t.getNivelActual(t.recentSeguimientos[o].pasos_seguimiento),"/",t.totalPasos,""),e.xp6(2),e.Udp("width",t.getPorcentaje(t.recentSeguimientos[o].pasos_seguimiento),"%")}}function I(n,r){1&n&&(e.TgZ(0,"tr"),e.TgZ(1,"th"),e._uU(2,"Solicitud"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Pasos"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Estado"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Responsable"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Fecha Asignaci\xf3n"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Fecha Programaci\xf3n"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Fecha Evaluaci\xf3n"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Correcciones"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Formato de evaluaci\xf3n"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Acciones"),e.qZA(),e.qZA())}function F(n,r){1&n&&(e.ynx(0),e.TgZ(1,"span"),e.TgZ(2,"b"),e._uU(3,"No presenta"),e.qZA(),e.qZA(),e.BQk())}function k(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"button",63),e.NdJ("click",function(){e.CHM(o);const i=e.oxw().$implicit;return e.oxw(4).abrirDescarga(i.id)}),e.qZA()}if(2&n){const o=e.oxw().$implicit,t=e.oxw(4);e.s9C("label",t.obtenerNombreArchivo(o.correciones))}}function N(n,r){1&n&&(e.ynx(0),e.TgZ(1,"span"),e.TgZ(2,"b"),e._uU(3,"No presenta"),e.qZA(),e.qZA(),e.BQk())}function J(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"button",63),e.NdJ("click",function(){e.CHM(o);const i=e.oxw().$implicit;return e.oxw(4).abrirFormato(i.id)}),e.qZA()}if(2&n){const o=e.oxw().$implicit,t=e.oxw(4);e.s9C("label",t.obtenerNombreArchivo(o.formato_evaluacion))}}function D(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"tr",56),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e.YNc(16,F,4,0,"ng-container",57),e.YNc(17,k,1,1,"ng-template",null,58,e.W1O),e.qZA(),e.TgZ(19,"td"),e.YNc(20,N,4,0,"ng-container",57),e.YNc(21,J,1,1,"ng-template",null,59,e.W1O),e.qZA(),e.TgZ(23,"td"),e.TgZ(24,"div",60),e.TgZ(25,"button",61),e.NdJ("click",function(){const s=e.CHM(o).$implicit;return e.oxw(4).ShowEditarSeguimiento(s)}),e.qZA(),e.TgZ(26,"button",62),e.NdJ("click",function(){const s=e.CHM(o).$implicit;return e.oxw(4).ShowEliminarSeguimiento(s)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const o=r.$implicit,t=e.MAs(18),i=e.MAs(22),s=e.oxw(2).$implicit,a=e.oxw(2);e.Q6J("ngClass",a.getRowClass(o,s)),e.xp6(2),e.Oqu(a.getSolicitudNombre(o.solicitudId)),e.xp6(2),e.Oqu(a.getPasoNombre(o.pasos_seguimiento)),e.xp6(2),e.Oqu(a.getEstadoNombre(o.estado_seguimiento)),e.xp6(2),e.Oqu(a.getResponsableNombre(o.responsableId)),e.xp6(2),e.Oqu(o.fecha_asignacion),e.xp6(2),e.Oqu(o.fecha_programacion),e.xp6(2),e.Oqu(o.fecha_evaluacion),e.xp6(2),e.Q6J("ngIf",null===o.correciones)("ngIfElse",t),e.xp6(4),e.Q6J("ngIf",null===o.formato_evaluacion)("ngIfElse",i)}}function Y(n,r){if(1&n&&(e.TgZ(0,"div"),e.TgZ(1,"div",52),e.TgZ(2,"div",53),e.TgZ(3,"p-table",54),e.YNc(4,I,21,0,"ng-template",38),e.YNc(5,D,27,12,"ng-template",55),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n){const o=e.oxw().$implicit,t=e.oxw(2);e.xp6(3),e.Q6J("value",t.groupedSeguimientos[o])("paginator",!0)("rows",100)}}function j(n,r){if(1&n&&(e.TgZ(0,"p-card",37),e.YNc(1,y,19,9,"ng-template",38),e.YNc(2,Y,6,3,"div",6),e.qZA()),2&n){const o=r.$implicit,t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t.expandedCard===o)}}function Q(n,r){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,j,3,1,"p-card",36),e.qZA()),2&n){const o=e.oxw();e.xp6(1),e.Q6J("ngForOf",o.getSortedGroupedKeys())}}function R(n,r){if(1&n&&e._uU(0),2&n){const o=r.$implicit;e.AsE(" ",o.nombres," ",o.apellidos," ")}}function B(n,r){if(1&n&&(e.TgZ(0,"div"),e.TgZ(1,"span"),e._uU(2,"Archivo seleccionado:"),e.qZA(),e._uU(3),e.qZA()),2&n){const o=e.oxw();e.xp6(3),e.hij(" ",o.archivoSeleccionadoCorreciones," ")}}function V(n,r){if(1&n&&(e.TgZ(0,"div"),e.TgZ(1,"span"),e._uU(2,"Archivo seleccionado:"),e.qZA(),e._uU(3),e.qZA()),2&n){const o=e.oxw();e.xp6(3),e.hij(" ",o.archivoSeleccionadoFormato," ")}}const $=function(){return{width:"50%","min-height":"300px",top:"30px"}},z=function(){return{width:"55%","min-height":"100px",top:"30px","text-align":"center"}};let L=(()=>{class n{constructor(o,t,i,s,a){this.solicitudesService=o,this.messageService=t,this.confirmationService=i,this.formBuilder=s,this.userService=a,this.API_URI=A.N.API_URI,this.solicitudes=[],this.pasos=[],this.seguimientos=[],this.mostrarDialogo=!1,this.estados=[],this.responsables=[],this.searchText="",this.expandedCard=null,this.totalPasos=7,this.filteredSeguimientos=[],this.groupedSeguimientos={},this.recentSeguimientos={},this.displayEditar=!1,this.displayEliminar=!1,this.correccionesFile=null,this.FormatoFile=null,this.archivoSeleccionadoCorreciones="",this.archivoSeleccionadoFormato="",this.seguimientoForm=this.formBuilder.group({fecha_asignacion:[""],fecha_programacion:[""],fecha_evaluacion:[""],correciones:[""],formato_evaluacion:[""],solicitudId:[""],pasos_seguimiento:[""],estado_seguimiento:[""],responsableId:[""]})}ngOnInit(){this.obtenerResponsables(),this.obtenerSeguimientos(),this.obtenerPasos(),this.obtenerSolicitudes(),this.obtenerEstados()}getAccordionHeaderClass(o){return"custom-accordion-header"}obtenerSeguimientos(){this.solicitudesService.obtenerSeguimientos().subscribe(o=>{this.seguimientos=o,this.filteredSeguimientos=o,this.groupSeguimientos()}),this.buscarSeguimientos()}obtenerPasos(){this.solicitudesService.obtenerPasos().subscribe(o=>{this.pasos=o},o=>{console.error("Error al obtener los pasos de solicitud",o)})}obtenerSolicitudes(){this.solicitudesService.obtenerSolicitudes().subscribe(o=>{this.solicitudes=o},o=>{console.error("Error al obtener las solicitudes",o)})}obtenerEstados(){this.solicitudesService.obtenerEstados().subscribe(o=>{this.estados=o},o=>{console.error("Error al obtener los estados",o)})}obtenerResponsables(){this.userService.ObtenerUsuarios().subscribe(o=>{this.responsables=o},o=>{console.error("Error al obtener los responsables:",o)})}getSolicitudNombre(o){const t=this.solicitudes.find(i=>i.id===o);return t?t.titulo_articulo:""}getPasoNombre(o){if(void 0===o)return"No disponible";const t=this.pasos.find(i=>i.id===o);return t?t.nombre:"No disponible"}getPorcentaje(o){const t=this.pasos.find(i=>i.id===o);return t?parseFloat((t.nivel/this.totalPasos*100).toFixed(2)):0}getNivelActual(o){const t=this.pasos.find(i=>i.id===o);return t?t.nivel:0}getEstadoNombre(o){const t=this.estados.find(i=>i.id===o);return t?t.nombre:""}getResponsableNombre(o){const t=this.responsables.find(i=>i.user===o);return t?`${t.nombres} ${t.apellidos}`:""}obtenerNombreArchivo(o){if(o){const t=o.split("/");return t[t.length-1]}return""}abrirDescarga(o){window.open(`${this.API_URI}/solicitud/seguimiento/seguimientos/${o}/descargar/correciones/`,"_blank")}abrirFormato(o){window.open(`${this.API_URI}/solicitud/seguimiento/seguimientos/${o}/descargar/formato_evaluacion/`,"_blank")}buscarSeguimientos(){this.filteredSeguimientos=""===this.searchText.trim()?this.seguimientos:this.seguimientos.filter(o=>{const t=this.getSolicitudNombre(o.solicitudId).toLowerCase().includes(this.searchText.toLowerCase()),i=this.getResponsableNombre(o.responsableId).toLowerCase().includes(this.searchText.toLowerCase());return t||i}),this.groupSeguimientos()}groupSeguimientos(){this.groupedSeguimientos=this.filteredSeguimientos.sort((o,t)=>new Date(o.fecha_programacion).getTime()-new Date(t.fecha_programacion).getTime()).reduce((o,t)=>((o[t.solicitudId]=o[t.solicitudId]||[]).push(t),o),{}),this.recentSeguimientos=Object.keys(this.groupedSeguimientos).reduce((o,t)=>{const i=this.groupedSeguimientos[+t].sort((s,a)=>new Date(a.fecha_programacion).getTime()-new Date(s.fecha_programacion).getTime());return o[+t]=i[0],o},{})}getSortedGroupedKeys(){return Object.keys(this.groupedSeguimientos).map(o=>+o).sort((o,t)=>{var i,s;const a=null===(i=this.groupedSeguimientos[o][0])||void 0===i?void 0:i.fecha_programacion,d=null===(s=this.groupedSeguimientos[t][0])||void 0===s?void 0:s.fecha_programacion;return new Date(a).getTime()-new Date(d).getTime()})}getGroupedKeys(){return Object.keys(this.groupedSeguimientos).map(o=>+o)}getEncabezado(o){const t=this.recentSeguimientos[o],i=this.getSolicitudNombre(o);return t?`${i} - ${this.getPasoNombre(t.pasos_seguimiento)} - ${t.fecha_programacion}`:`Solicitud ${i}`}getFecha(o){const t=this.recentSeguimientos[o];return t?new Date(t.fecha_programacion).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}):"Fecha no disponible"}getRowClass(o,t){var i;const s=new Date(o.fecha_programacion),a=new Date,d=Math.ceil((s.getTime()-a.getTime())/864e5),u=Math.ceil((s.getTime()-new Date(o.fecha_asignacion).getTime())/864e5);let f="";return o.id===(null===(i=this.recentSeguimientos[t])||void 0===i?void 0:i.id)&&(d<0?f="overdue recent-follow-up":d<=3?f="near-due recent-follow-up":d/u*100>=60&&(f="plenty-of-time recent-follow-up")),f}toggleExpand(o){this.expandedCard=this.expandedCard===o?null:o}ShowEditarSeguimiento(o){this.displayEditar=!0,this.seguimientoSeleccionado=o,this.seguimientoForm.patchValue({fecha_asignacion:o.fecha_asignacion,fecha_programacion:o.fecha_programacion,fecha_evaluacion:o.fecha_evaluacion,correciones:o.correciones,formato_evaluacion:o.formato_evaluacion,solicitudId:o.solicitudId,pasos_seguimiento:o.pasos_seguimiento,estado_seguimiento:o.estado_seguimiento,responsableId:o.responsableId}),this.archivoSeleccionadoCorreciones=this.obtenerNombreArchivo(o.correciones),this.archivoSeleccionadoFormato=this.obtenerNombreArchivo(o.formato_evaluacion)}ShowEliminarSeguimiento(o){this.displayEliminar=!0,this.seguimientoSeleccionado=o}OcultarEditarSeguimiento(){this.displayEditar=!1}OcultarEliminarSeguimiento(){this.displayEliminar=!1}EditarSeguimiento(){if(this.seguimientoForm.valid){const o=Object.assign(Object.assign({},this.seguimientoSeleccionado),this.seguimientoForm.value),i=this.obtenerContenidoPaso(o.pasos_seguimiento);if(i){const s=parseInt(i.dias_programacion);console.log("dias: ",s);const a=new Date,d=new Date((new Date).getTime()+24*s*60*60*1e3);console.log("dias progra: ",d);const u=d.toISOString().split("T")[0];console.log("dias programacion: ",u);const p=a.toISOString().split("T")[0],g=new FormData;this.correccionesFile&&g.append("correciones",this.correccionesFile),this.FormatoFile&&g.append("formato_evaluacion",this.FormatoFile),g.append("id",o.id.toString()),g.append("fecha_asignacion",p),g.append("fecha_programacion",u),g.append("solicitudId",o.solicitudId.toString()),g.append("pasos_seguimiento",o.pasos_seguimiento.toString()),g.append("estado_seguimiento",o.estado_seguimiento.toString()),g.append("responsableId",o.responsableId.toString()),g.append("status","true"),2===o.pasos_seguimiento&&g.append("fecha_evaluacion",p),this.solicitudesService.actualizarSeguimientoConArchivo(g).subscribe(f=>{this.mostrarDialogo=!1,this.messageService.add({severity:"success",summary:"\xc9xito",detail:"Seguimiento actualizado correctamente"}),this.obtenerSeguimientos(),this.OcultarEditarSeguimiento()},f=>{console.error("Error al actualizar el seguimiento:",f),this.messageService.add({severity:"error",summary:"Error",detail:"Ocurri\xf3 un error al actualizar el seguimiento"})})}else this.messageService.add({severity:"error",summary:"Error",detail:"No se pudo obtener el contenido del paso"})}else this.messageService.add({severity:"error",summary:"Error",detail:"Por favor completa los campos requeridos correctamente"})}obtenerContenidoPaso(o){return this.pasos.find(t=>t.id===o)}onCorreccionesFileSelected(o){this.correccionesFile=o.target.files[0],this.archivoSeleccionadoCorreciones=o.target.files[0].name}onFormatoFileSelected(o){this.FormatoFile=o.target.files[0],this.archivoSeleccionadoFormato=o.target.files[0].name}EliminarSeguimiento(){this.seguimientoSeleccionado&&this.solicitudesService.eliminarSeguimiento(this.seguimientoSeleccionado.id).subscribe(o=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:"Seguimiento eliminado"}),this.OcultarEliminarSeguimiento(),this.obtenerSeguimientos()},o=>{console.error("Error al eliminar el seguimiento",o)})}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(b.M),e.Y36(m.ez),e.Y36(m.YP),e.Y36(c.qu),e.Y36(v.K))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-ver"]],decls:81,vars:30,consts:[[1,"solicitudes-title"],[1,"search-container","p-inputgroup"],["type","text","pInputText","","placeholder","Buscar solicitudes...",1,"form-control","p-inputtext-lg",3,"ngModel","ngModelChange"],[1,"p-inputgroup-addon"],["pButton","","type","button","icon","pi pi-search",1,"p-button-rounded","custom-button-color",3,"click"],[1,"contenedor"],[4,"ngIf"],["header","Editar seguimiento",3,"visible","responsive","showHeader","closable","dismissableMask","modal","visibleChange"],[3,"formGroup","ngSubmit"],[1,"p-grid","p-fluid"],[1,"p-col-12",2,"text-align","center"],["id","solicitudId","optionLabel","titulo_articulo","optionValue","id"],["id","pasos_seguimiento","optionLabel","nombre","optionValue","id",2,"color","gray"],[1,"p-col-12"],["for","estado_seguimiento"],["id","estado_seguimiento","optionLabel","nombre","optionValue","id","formControlName","estado_seguimiento",3,"options"],["for","responsableId"],["id","responsableId","placeholder","seleccionar...","optionLabel","nombres","optionValue","user","formControlName","responsableId",3,"filter","options"],["pTemplate","item"],["for","correciones"],[1,"archivo-area"],["for","correciones",1,"custom-file-upload"],[1,"pi","pi-upload"],[2,"margin-left","5px"],["pButton","","type","file","id","correciones","required","",2,"display","none",3,"change"],["for","formato_evaluacion"],["for","formato_evaluacion",1,"custom-file-upload"],["pButton","","type","file","id","formato_evaluacion","required","",2,"display","none",3,"change"],["pButton","","type","submit","icon","pi pi-check","label","Guardar Cambios",1,"p-button-rounded","p-button-outlined","p-button-success",2,"width","100%","margin-bottom","5px","margin-top","20px"],["pButton","","icon","pi pi-times","label","Cancelar",1,"p-button-rounded","p-button-outlined","p-button-secondary",2,"width","100%","margin-bottom","5px","margin-top","10px",3,"click"],["header","Eliminar seguimiento",3,"visible","responsive","showHeader","closable","dismissableMask","modal","visibleChange"],[2,"width","100%","justify-content","center","align-items","center"],[2,"width","80%","margin","0 auto"],[2,"display","flex","justify-content","center","align-items","center","height","100%"],["pButton","","icon","pi pi-trash","label","Eliminar",1,"p-button-rounded","p-button-outlined","p-button-danger",2,"margin","5px",3,"click"],["pButton","","icon","pi pi-times","label","Cancelar",1,"p-button-rounded","p-button-outlined","p-button-secondary",2,"margin","5px",3,"click"],["class","seguimiento-card",4,"ngFor","ngForOf"],[1,"seguimiento-card"],["pTemplate","header"],[1,"card-header",3,"click"],[1,"header-content"],["src","assets/logo_r.jpg",2,"width","100px"],[1,"header-solicitud",2,"width","80%"],[1,"header-paso"],[1,"bg-blue-50","text-blue-400","border-round","inline-flex","py-1","px-2","text-sm"],[1,"progreso"],[1,"flex","justify-content-between","align-items-center"],[1,"text-600","progreso-texto"],[1,"text-primary","font-medium","fecha-programacion"],[1,"text-900","nivel-actual"],[1,"progress-bar"],[1,"progress"],[1,"table-responsive"],[1,"scrollable-table"],[3,"value","paginator","rows"],["pTemplate","body"],[3,"ngClass"],[4,"ngIf","ngIfElse"],["downloadLink",""],["formatLink",""],[2,"display","flex","top","50%"],["pButton","","icon","pi pi-pencil",1,"p-button-rounded","p-button-outlined","p-button-warning",2,"margin","5px","font-weight","bold",3,"click"],["pButton","","icon","pi pi-trash",1,"p-button-rounded","p-button-outlined","p-button-danger",2,"margin","5px","font-weight","bold",3,"click"],["pButton","","type","button","icon","pi pi-download",1,"p-button-rounded","p-button-outlined",2,"font-weight","bold",3,"label","click"]],template:function(o,t){1&o&&(e._UZ(0,"br"),e._UZ(1,"br"),e._UZ(2,"br"),e.TgZ(3,"h2",0),e._uU(4,"CONTROL DE SEGUIMIENTOS"),e.qZA(),e.TgZ(5,"div",1),e.TgZ(6,"input",2),e.NdJ("ngModelChange",function(s){return t.searchText=s})("ngModelChange",function(){return t.buscarSeguimientos()}),e.qZA(),e.TgZ(7,"span",3),e.TgZ(8,"button",4),e.NdJ("click",function(){return t.buscarSeguimientos()}),e.qZA(),e.qZA(),e.qZA(),e._UZ(9,"br"),e._UZ(10,"br"),e.TgZ(11,"div",5),e.YNc(12,Q,2,1,"div",6),e.qZA(),e.TgZ(13,"p-dialog",7),e.NdJ("visibleChange",function(s){return t.displayEditar=s}),e.TgZ(14,"form",8),e.NdJ("ngSubmit",function(){return t.EditarSeguimiento()}),e.TgZ(15,"div",9),e.TgZ(16,"div",10),e.TgZ(17,"h2",11),e._uU(18),e.qZA(),e.TgZ(19,"h4",12),e._uU(20),e.qZA(),e.qZA(),e._UZ(21,"hr"),e._UZ(22,"br"),e.TgZ(23,"div",13),e.TgZ(24,"label",14),e._uU(25,"Estado de seguimiento"),e.qZA(),e._UZ(26,"p-dropdown",15),e.qZA(),e._UZ(27,"br"),e.TgZ(28,"div",13),e.TgZ(29,"label",16),e._uU(30,"Responsable"),e.qZA(),e.TgZ(31,"p-dropdown",17),e.YNc(32,R,1,2,"ng-template",18),e.qZA(),e.qZA(),e._UZ(33,"br"),e.TgZ(34,"div"),e.TgZ(35,"label",19),e._uU(36,"Correciones"),e.qZA(),e._UZ(37,"br"),e.TgZ(38,"div",20),e.TgZ(39,"div"),e.TgZ(40,"label",21),e._UZ(41,"i",22),e.TgZ(42,"span",23),e._uU(43,"Seleccionar archivo"),e.qZA(),e.TgZ(44,"input",24),e.NdJ("change",function(s){return t.onCorreccionesFileSelected(s)}),e.qZA(),e.qZA(),e.qZA(),e._UZ(45,"br"),e.YNc(46,B,4,1,"div",6),e.qZA(),e.qZA(),e._UZ(47,"br"),e.TgZ(48,"div"),e.TgZ(49,"label",25),e._uU(50,"Formato de evaluaci\xf3n"),e.qZA(),e._UZ(51,"br"),e.TgZ(52,"div",20),e.TgZ(53,"div"),e.TgZ(54,"label",26),e._UZ(55,"i",22),e.TgZ(56,"span",23),e._uU(57,"Seleccionar archivo"),e.qZA(),e.TgZ(58,"input",27),e.NdJ("change",function(s){return t.onFormatoFileSelected(s)}),e.qZA(),e.qZA(),e.qZA(),e._UZ(59,"br"),e.YNc(60,V,4,1,"div",6),e.qZA(),e.qZA(),e.qZA(),e._UZ(61,"button",28),e.qZA(),e.TgZ(62,"button",29),e.NdJ("click",function(){return t.OcultarEditarSeguimiento()}),e.qZA(),e.qZA(),e.TgZ(63,"p-dialog",30),e.NdJ("visibleChange",function(s){return t.displayEliminar=s}),e.TgZ(64,"div",31),e.TgZ(65,"div",32),e.TgZ(66,"p"),e.TgZ(67,"b"),e._uU(68,"\xbfSeguro que desea eliminar este paso?"),e.qZA(),e.qZA(),e.TgZ(69,"p"),e.TgZ(70,"b"),e._uU(71,"Solicitud: "),e.qZA(),e._uU(72),e.qZA(),e.TgZ(73,"p"),e.TgZ(74,"b"),e._uU(75,"Paso:"),e.qZA(),e._uU(76),e.qZA(),e.qZA(),e._UZ(77,"hr"),e.TgZ(78,"div",33),e.TgZ(79,"button",34),e.NdJ("click",function(){return t.EliminarSeguimiento()}),e.qZA(),e.TgZ(80,"button",35),e.NdJ("click",function(){return t.OcultarEliminarSeguimiento()}),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(6),e.Q6J("ngModel",t.searchText),e.xp6(6),e.Q6J("ngIf",t.filteredSeguimientos&&t.filteredSeguimientos.length>0||""===t.searchText),e.xp6(1),e.Akn(e.DdM(28,$)),e.Q6J("visible",t.displayEditar)("responsive",!0)("showHeader",!1)("closable",!1)("dismissableMask",!1)("modal",!0),e.xp6(1),e.Q6J("formGroup",t.seguimientoForm),e.xp6(4),e.hij(" ",t.getSolicitudNombre(null==t.seguimientoSeleccionado?null:t.seguimientoSeleccionado.solicitudId),""),e.xp6(2),e.hij(" ",t.getPasoNombre(null==t.seguimientoSeleccionado?null:t.seguimientoSeleccionado.pasos_seguimiento),""),e.xp6(6),e.Q6J("options",t.estados),e.xp6(5),e.Q6J("filter",!0)("options",t.responsables),e.xp6(15),e.Q6J("ngIf",t.archivoSeleccionadoCorreciones),e.xp6(14),e.Q6J("ngIf",t.archivoSeleccionadoFormato),e.xp6(3),e.Akn(e.DdM(29,z)),e.Q6J("visible",t.displayEliminar)("responsive",!0)("showHeader",!1)("closable",!1)("dismissableMask",!1)("modal",!0),e.xp6(9),e.hij(" ",t.getSolicitudNombre(null==t.seguimientoSeleccionado?null:t.seguimientoSeleccionado.solicitudId),""),e.xp6(4),e.hij(" ",t.getPasoNombre(null==t.seguimientoSeleccionado?null:t.seguimientoSeleccionado.pasos_seguimiento),""))},directives:[c.Fj,C.o,c.JJ,c.On,h.Hq,_.O5,_.sg,P.Z,m.jx,T.iA,_.mk,Z.V,c._Y,c.JL,c.sg,x.Lt,c.u],styles:[".solicitudes-title[_ngcontent-%COMP%]{font-size:2.25rem;font-weight:700;margin-bottom:1.25rem;text-align:center;color:#fa6357;text-transform:uppercase;letter-spacing:.125rem}.contenedor[_ngcontent-%COMP%]{width:80%;margin:0 auto;flex-direction:column;align-items:center}.search-container[_ngcontent-%COMP%]{width:90%;margin:0 auto;display:flex;justify-content:center;margin-bottom:1.25rem}.custom-button-color[_ngcontent-%COMP%]{background-color:#fa6357;border:none;color:#fff;transition:background-color .3s ease}.custom-button-color[_ngcontent-%COMP%]:hover{background-color:#fb837b}.p-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .p-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#fff;color:#333;border:1px solid #ddd}.p-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#fafafa}.overdue[_ngcontent-%COMP%]{border:2px solid #f44336!important;background-color:#f8d1cf!important;font-weight:700!important}.near-due[_ngcontent-%COMP%]{border:2px solid #ff9800!important;background-color:#f5e5ce!important;font-weight:700!important}.plenty-of-time[_ngcontent-%COMP%]{border:2px solid #4caf50!important;background-color:#c3e8c5!important;font-weight:700!important}.header-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:1rem;background-color:#fff;box-shadow:0 4px 8px #0003;border-radius:.5rem;transition:transform .3s ease}.header-content[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.header-date[_ngcontent-%COMP%], .header-solicitud[_ngcontent-%COMP%], .header-paso[_ngcontent-%COMP%]{margin:.5rem 0}.progreso[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}.progreso[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.5rem 0}.progreso-texto[_ngcontent-%COMP%]{flex:1;text-align:left;font-weight:700}.fecha-programacion[_ngcontent-%COMP%]{flex:1;text-align:center;font-weight:700;color:#666}.nivel-actual[_ngcontent-%COMP%]{flex:1;text-align:right;font-weight:700}.progress-bar[_ngcontent-%COMP%]{width:100%;height:7px;background-color:#e0e0e0;border-radius:4px;margin-top:5px;position:relative}.progress[_ngcontent-%COMP%]{height:100%;background-color:#4caf50;border-radius:4px}.header-nivel[_ngcontent-%COMP%]{font-size:.875rem;font-weight:700;color:#333}.nivel-actual[_ngcontent-%COMP%], .header-date[_ngcontent-%COMP%]{font-size:.875rem;color:#666}.header-solicitud[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:700;text-align:center}.header-paso[_ngcontent-%COMP%]{font-size:.875rem;color:#5d5d5d}.seguimientos-container[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:1.25rem;display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));grid-gap:1.25rem;gap:1.25rem}@media (max-width: 768px){.seguimientos-container[_ngcontent-%COMP%]{grid-template-columns:1fr}}.card-header[_ngcontent-%COMP%]{cursor:pointer;width:95%;margin:0 auto;top:50% auto}@media (max-width: 768px){.p-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .p-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.875rem;padding:.5rem;white-space:normal}.p-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left}}.scrollable-table[_ngcontent-%COMP%]{width:100%;overflow-x:auto}.scrollable-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%!important;min-width:100px!important;max-width:1000px!important}.p-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .p-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{white-space:nowrap!important}td[_ngcontent-%COMP%]:nth-child(1), th[_ngcontent-%COMP%]:nth-child(1){min-width:500px;max-width:1000px}td[_ngcontent-%COMP%]:nth-child(7), td[_ngcontent-%COMP%]:nth-child(6), td[_ngcontent-%COMP%]:nth-child(5), td[_ngcontent-%COMP%]:nth-child(4), td[_ngcontent-%COMP%]:nth-child(3), td[_ngcontent-%COMP%]:nth-child(2)   th[_ngcontent-%COMP%]:nth-child(7), th[_ngcontent-%COMP%]:nth-child(6), th[_ngcontent-%COMP%]:nth-child(5), th[_ngcontent-%COMP%]:nth-child(4), th[_ngcontent-%COMP%]:nth-child(3), th[_ngcontent-%COMP%]:nth-child(2){min-width:150px;max-width:200px}label[_ngcontent-%COMP%]{text-align:left;font-weight:700}.custom-file-upload[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:6px 12px;cursor:pointer;background-color:#fa6357;color:#fff;border:none;border-radius:4px;transition:background-color .3s ease-in-out;text-align:center}.custom-file-upload[_ngcontent-%COMP%]:hover{background-color:#f92d1f}.archivo-area[_ngcontent-%COMP%]{margin-top:10px;padding:10px;background-color:#f0f0f0;border:1px dashed #999;border-radius:4px;align-items:center;justify-content:space-between}.archivo-area[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;margin-right:10px}.custom-file-upload[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}"]}),n})();var q=l(4119),S=l(1497);function H(n,r){1&n&&(e.TgZ(0,"tr"),e.TgZ(1,"th"),e._uU(2,"ID"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Solicitud"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Fecha Asignaci\xf3n"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Fecha Programaci\xf3n"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Fecha Evaluaci\xf3n"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Correcciones"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Formato de evaluaci\xf3n"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Pasos"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Estado"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Responsable"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"Acciones"),e.qZA(),e.qZA())}function G(n,r){1&n&&(e.ynx(0),e.TgZ(1,"span"),e.TgZ(2,"b"),e._uU(3,"No presenta"),e.qZA(),e.qZA(),e.BQk())}function K(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"a",37),e.NdJ("click",function(){e.CHM(o);const i=e.oxw().$implicit;return e.oxw(2).abrirCorreciones("http://localhost:8000/solicitud/seguimiento/seguimientos/"+i.id+"/descargar/correciones/")}),e._UZ(1,"i",38),e.qZA()}}function W(n,r){1&n&&(e.ynx(0),e.TgZ(1,"span"),e.TgZ(2,"b"),e._uU(3,"No presenta"),e.qZA(),e.qZA(),e.BQk())}function X(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"a",37),e.NdJ("click",function(){e.CHM(o);const i=e.oxw().$implicit;return e.oxw(2).abrirFormato("http://localhost:8000/solicitud/seguimiento/seguimientos/"+i.id+"/descargar/formato_evaluacion/")}),e._UZ(1,"i",38),e.qZA()}}function ee(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e.YNc(12,G,4,0,"ng-container",34),e.YNc(13,K,2,0,"ng-template",null,35,e.W1O),e.qZA(),e.TgZ(15,"td"),e.YNc(16,W,4,0,"ng-container",34),e.YNc(17,X,2,0,"ng-template",null,35,e.W1O),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA(),e.TgZ(23,"td"),e._uU(24),e.qZA(),e.TgZ(25,"td"),e.TgZ(26,"button",36),e.NdJ("click",function(){const s=e.CHM(o).$implicit;return e.oxw(2).abrirDialogo(s)}),e.qZA(),e.qZA(),e.qZA()}if(2&n){const o=r.$implicit,t=e.MAs(14),i=e.oxw(2);e.xp6(2),e.Oqu(o.id),e.xp6(2),e.Oqu(i.getSolicitudNombre(o.solicitudId)),e.xp6(2),e.Oqu(o.fecha_asignacion),e.xp6(2),e.Oqu(o.fecha_programacion),e.xp6(2),e.Oqu(o.fecha_evaluacion),e.xp6(2),e.Q6J("ngIf",null===o.correciones)("ngIfElse",t),e.xp6(4),e.Q6J("ngIf",null===o.formato_evaluacion)("ngIfElse",t),e.xp6(4),e.Oqu(i.getPasoNombre(o.pasos_seguimiento)),e.xp6(2),e.Oqu(i.getEstadoNombre(o.estado_seguimiento)),e.xp6(2),e.Oqu(i.getResponsableNombre(o.responsableId))}}const oe=function(){return[5,10,20,30]};function te(n,r){if(1&n&&(e.TgZ(0,"p-table",31),e.YNc(1,H,23,0,"ng-template",32),e.YNc(2,ee,27,12,"ng-template",33),e.qZA()),2&n){const o=e.oxw();e.Q6J("value",o.filteredSeguimientos)("paginator",!0)("rows",10)("rowsPerPageOptions",e.DdM(4,oe))}}function ie(n,r){if(1&n&&(e.TgZ(0,"div"),e.TgZ(1,"span"),e._uU(2,"Archivo seleccionado:"),e.qZA(),e._uU(3),e.qZA()),2&n){const o=e.oxw();e.xp6(3),e.hij(" ",o.archivoSeleccionadoCorreciones," ")}}function ne(n,r){if(1&n&&(e.TgZ(0,"div"),e.TgZ(1,"span"),e._uU(2,"Archivo seleccionado:"),e.qZA(),e._uU(3),e.qZA()),2&n){const o=e.oxw();e.xp6(3),e.hij(" ",o.archivoSeleccionadoFormato," ")}}function se(n,r){if(1&n&&e._uU(0),2&n){const o=r.$implicit;e.AsE(" ",o.nombres," ",o.apellidos," ")}}const re=function(){return{width:"600px",top:"30px",height:"500px"}},ae=function(){return{top:"80px"}};let ce=(()=>{class n{constructor(o,t,i,s,a){this.solicitudesService=o,this.messageService=t,this.confirmationService=i,this.formBuilder=s,this.userService=a,this.solicitudes=[],this.pasos=[],this.seguimientos=[],this.mostrarDialogo=!1,this.usuarios=[],this.estados=[],this.responsables=[],this.correccionesFile=null,this.FormatoFile=null,this.archivoSeleccionadoCorreciones="",this.archivoSeleccionadoFormato="",this.searchText="",this.filteredSeguimientos=[],this.seguimientoForm=this.formBuilder.group({fecha_asignacion:[""],fecha_programacion:[""],fecha_evaluacion:[""],correciones:[""],formato_evaluacion:[""],solicitudId:[""],pasos_seguimiento:[""],estado_seguimiento:[""],responsableId:[""]})}ngOnInit(){this.obtenerSeguimientos(),this.obtenerPasos(),this.obtenerSolicitudes(),this.obtenerUsuarios(),this.obtenerEstados()}obtenerSeguimientos(){this.solicitudesService.obtenerSeguimientos().subscribe(o=>{this.filteredSeguimientos=o,this.seguimientos=o})}obtenerPasos(){this.solicitudesService.obtenerPasos().subscribe(o=>{this.pasos=o},o=>{console.error("Error al obtener los pasos de solicitud",o)})}obtenerSolicitudes(){this.solicitudesService.obtenerSolicitudes().subscribe(o=>{this.solicitudes=o},o=>{console.error("Error al obtener las solicitudes",o)})}obtenerUsuarios(){this.userService.ObtenerUsuarios().subscribe(o=>{o&&Array.isArray(o)?this.responsables=o:console.error("Respuesta inv\xe1lida del backend:",o)},o=>{console.error("Error al obtener la lista de usuarios",o)})}obtenerEstados(){this.solicitudesService.obtenerEstados().subscribe(o=>{this.estados=o},o=>{console.error("Error al obtener los estados",o)})}getSolicitudNombre(o){const t=this.solicitudes.find(i=>i.id===o);return t?t.titulo_articulo:""}getPasoNombre(o){const t=this.pasos.find(i=>i.id===o);return t?t.nombre:""}getEstadoNombre(o){const t=this.estados.find(i=>i.id===o);return t?t.nombre:""}getResponsableNombre(o){const t=this.responsables.find(i=>i.user===o);return t?`${t.nombres} ${t.apellidos}`:""}onCorreccionesFileSelected(o){this.correccionesFile=o.target.files[0],this.archivoSeleccionadoCorreciones=o.target.files[0].name}onFormatoFileSelected(o){this.FormatoFile=o.target.files[0],this.archivoSeleccionadoFormato=o.target.files[0].name}abrirDialogo(o){this.seguimientoSeleccionado=o,this.mostrarDialogo=!0,this.inicializarFormularioSeguimiento(o)}cerrarDialogo(){this.mostrarDialogo=!1}inicializarFormularioSeguimiento(o){const t=new Date,i=t.toISOString().split("T")[0],s=o.pasos_seguimiento,a=this.pasos.find(d=>d.id===s);if(a&&a.dias_programacion){const d=parseInt(a.dias_programacion,10),u=new Date(t);u.setDate(u.getDate()+d),this.seguimientoForm.patchValue({fecha_asignacion:i,fecha_programacion:u.toISOString().split("T")[0],fecha_evaluacion:o.fecha_evaluacion,solicitudId:o.solicitudId,correciones:o.correciones,formato_evaluacion:o.formato_evaluacion,pasos_seguimiento:o.pasos_seguimiento,estado_seguimiento:o.estado_seguimiento,responsableId:o.responsableId,status:"true"})}else console.error("El paso seleccionado no tiene d\xedas de programaci\xf3n definidos.")}editarSeguimiento(){if(this.seguimientoForm.valid){const o=Object.assign(Object.assign({},this.seguimientoSeleccionado),this.seguimientoForm.value),i=(new Date).toISOString().split("T")[0],s=new FormData;this.correccionesFile&&s.append("correciones",this.correccionesFile),this.FormatoFile&&s.append("formato_evaluacion",this.FormatoFile),2===o.pasos_seguimiento?(s.append("id",o.id.toString()),s.append("fecha_asignacion",o.fecha_asignacion),s.append("fecha_programacion",o.fecha_programacion),s.append("fecha_evaluacion",i),s.append("solicitudId",o.solicitudId.toString()),s.append("pasos_seguimiento",o.pasos_seguimiento.toString()),s.append("estado_seguimiento",o.estado_seguimiento.toString()),s.append("responsableId",o.responsableId.toString()),s.append("status","true")):(s.append("id",o.id.toString()),s.append("fecha_asignacion",o.fecha_asignacion),s.append("fecha_programacion",o.fecha_programacion),s.append("solicitudId",o.solicitudId.toString()),s.append("pasos_seguimiento",o.pasos_seguimiento.toString()),s.append("estado_seguimiento",o.estado_seguimiento.toString()),s.append("responsableId",o.responsableId.toString()),s.append("status","true")),this.solicitudesService.actualizarSeguimientoConArchivo(s).subscribe(a=>{this.mostrarDialogo=!1,this.messageService.add({severity:"success",summary:"\xc9xito",detail:"Seguimiento actualizado correctamente"}),this.obtenerSeguimientos()},a=>{console.error("Error al actualizar el seguimiento:",a),this.messageService.add({severity:"error",summary:"Error",detail:"Ocurri\xf3 un error al actualizar el seguimiento"})})}else this.messageService.add({severity:"error",summary:"Error",detail:"Por favor completa los campos requeridos correctamente"})}abrirCorreciones(o){window.open(o,"_blank")}abrirFormato(o){window.open(o,"_blank")}buscarSeguimientos(){this.filteredSeguimientos=""===this.searchText.trim()?this.seguimientos:this.seguimientos.filter(o=>{const t=this.getSolicitudNombre(o.solicitudId).toLowerCase().includes(this.searchText.toLowerCase()),i=this.getResponsableNombre(o.responsableId).toLowerCase().includes(this.searchText.toLowerCase());return t||i})}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(b.M),e.Y36(m.ez),e.Y36(m.YP),e.Y36(c.qu),e.Y36(v.K))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-editar"]],decls:60,vars:24,consts:[[1,"solicitudes-title"],[1,"search-container","p-inputgroup"],["type","text","pInputText","","placeholder","Buscar solicitudes...",1,"form-control","p-inputtext-lg",3,"ngModel","ngModelChange"],[1,"p-inputgroup-addon"],["pButton","","type","button","icon","pi pi-search",1,"p-button-rounded","custom-button-color",3,"click"],[3,"value","paginator","rows","rowsPerPageOptions",4,"ngIf"],["header","Editar Seguimiento",3,"visible","modal","styleClass","showHeader","closable","dismissableMask"],[3,"formGroup","ngSubmit"],[1,"p-grid","p-fluid"],["for","correciones"],[1,"archivo-area"],["for","correciones",1,"custom-file-upload"],[1,"pi","pi-upload"],[2,"margin-left","5px"],["pButton","","type","file","id","correciones","required","",2,"display","none",3,"change"],[4,"ngIf"],["for","formato_evaluacion"],["for","formato_evaluacion",1,"custom-file-upload"],["pButton","","type","file","id","formato_evaluacion","required","",2,"display","none",3,"change"],[1,"p-col-12"],["for","solicitudId"],["id","solicitudId","optionLabel","titulo_articulo","optionValue","id","formControlName","solicitudId",3,"options","readonly"],["for","pasos_seguimiento"],["id","pasos_seguimiento","optionLabel","nombre","optionValue","id","formControlName","pasos_seguimiento",3,"options","readonly"],["for","estado_seguimiento"],["id","estado_seguimiento","optionLabel","nombre","optionValue","id","formControlName","estado_seguimiento",3,"options"],["for","responsableId"],["id","responsableId","placeholder","seleccionar...","optionLabel","nombres","optionValue","user","formControlName","responsableId",3,"filter","options"],["pTemplate","item"],["type","submit","pButton","","label","Guardar Cambios",1,"p-button-raised","p-button-primary",2,"width","100%","margin-bottom","5px","margin-top","50px"],["pButton","","label","Cancelar",1,"p-button-raised","p-button-outlined","p-button-primary",2,"width","100%",3,"click"],[3,"value","paginator","rows","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],[4,"ngIf","ngIfElse"],["downloadLink",""],["pButton","","icon","pi pi-pencil","label","editar",1,"p-button","p-button-outlined","p-bu",3,"click"],["pTooltip","Ver archivo","tooltipPosition","top",3,"click"],[1,"pi","pi-file-pdf"]],template:function(o,t){1&o&&(e._UZ(0,"br"),e._UZ(1,"br"),e.TgZ(2,"h2",0),e._uU(3,"SEGUIMIENTO DE SOLICITUDES - EDITAR"),e.qZA(),e.TgZ(4,"div",1),e.TgZ(5,"input",2),e.NdJ("ngModelChange",function(s){return t.searchText=s})("ngModelChange",function(){return t.buscarSeguimientos()}),e.qZA(),e.TgZ(6,"span",3),e.TgZ(7,"button",4),e.NdJ("click",function(){return t.buscarSeguimientos()}),e.qZA(),e.qZA(),e.qZA(),e._UZ(8,"br"),e._UZ(9,"br"),e.YNc(10,te,3,5,"p-table",5),e.TgZ(11,"p-dialog",6),e.TgZ(12,"form",7),e.NdJ("ngSubmit",function(){return t.editarSeguimiento()}),e.TgZ(13,"div",8),e.TgZ(14,"div"),e.TgZ(15,"label",9),e._uU(16,"Correciones"),e.qZA(),e._UZ(17,"br"),e.TgZ(18,"div",10),e.TgZ(19,"div"),e.TgZ(20,"label",11),e._UZ(21,"i",12),e.TgZ(22,"span",13),e._uU(23,"Seleccionar archivo"),e.qZA(),e.TgZ(24,"input",14),e.NdJ("change",function(s){return t.onCorreccionesFileSelected(s)}),e.qZA(),e.qZA(),e.qZA(),e._UZ(25,"br"),e.YNc(26,ie,4,1,"div",15),e.qZA(),e.qZA(),e.TgZ(27,"div"),e.TgZ(28,"label",16),e._uU(29,"Formato de evaluaci\xf3n"),e.qZA(),e._UZ(30,"br"),e.TgZ(31,"div",10),e.TgZ(32,"div"),e.TgZ(33,"label",17),e._UZ(34,"i",12),e.TgZ(35,"span",13),e._uU(36,"Seleccionar archivo"),e.qZA(),e.TgZ(37,"input",18),e.NdJ("change",function(s){return t.onFormatoFileSelected(s)}),e.qZA(),e.qZA(),e.qZA(),e._UZ(38,"br"),e.YNc(39,ne,4,1,"div",15),e.qZA(),e.qZA(),e.TgZ(40,"div",19),e.TgZ(41,"label",20),e._uU(42,"Solicitud"),e.qZA(),e._UZ(43,"p-dropdown",21),e.qZA(),e.TgZ(44,"div",19),e.TgZ(45,"label",22),e._uU(46,"Pasos de seguimiento"),e.qZA(),e._UZ(47,"p-dropdown",23),e.qZA(),e.TgZ(48,"div",19),e.TgZ(49,"label",24),e._uU(50,"Estado de seguimiento"),e.qZA(),e._UZ(51,"p-dropdown",25),e.qZA(),e.TgZ(52,"div",19),e.TgZ(53,"label",26),e._uU(54,"Responsable"),e.qZA(),e.TgZ(55,"p-dropdown",27),e.YNc(56,se,1,2,"ng-template",28),e.qZA(),e.qZA(),e.qZA(),e._UZ(57,"button",29),e.qZA(),e.TgZ(58,"button",30),e.NdJ("click",function(){return t.cerrarDialogo()}),e.qZA(),e.qZA(),e._UZ(59,"p-toast")),2&o&&(e.xp6(5),e.Q6J("ngModel",t.searchText),e.xp6(5),e.Q6J("ngIf",t.filteredSeguimientos&&t.filteredSeguimientos.length>0||""===t.searchText),e.xp6(1),e.Akn(e.DdM(22,re)),e.Q6J("visible",t.mostrarDialogo)("modal",!0)("styleClass","custom-dialog")("showHeader",!1)("closable",!1)("dismissableMask",!1),e.xp6(1),e.Q6J("formGroup",t.seguimientoForm),e.xp6(14),e.Q6J("ngIf",t.archivoSeleccionadoCorreciones),e.xp6(13),e.Q6J("ngIf",t.archivoSeleccionadoFormato),e.xp6(4),e.Q6J("options",t.solicitudes)("readonly",!0),e.xp6(4),e.Q6J("options",t.pasos)("readonly",!0),e.xp6(4),e.Q6J("options",t.estados),e.xp6(4),e.Q6J("filter",!0)("options",t.responsables),e.xp6(4),e.Akn(e.DdM(23,ae)))},directives:[c.Fj,C.o,c.JJ,c.On,h.Hq,_.O5,T.iA,m.jx,q.u,Z.V,c._Y,c.JL,c.sg,x.Lt,c.u,S.FN],styles:[".solicitudes-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;margin-bottom:20px;text-align:center;color:#fa6357;text-transform:uppercase;letter-spacing:2px}.p-datatable[_ngcontent-%COMP%]{margin-bottom:20px}.p-datatable[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f7f7f7;font-weight:700;text-align:left;padding:10px}.p-datatable[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd)   td[_ngcontent-%COMP%]{background-color:#f7f7f7}.p-dialog-content[_ngcontent-%COMP%]{padding:0}.p-dialog-footer[_ngcontent-%COMP%]{text-align:right;padding:10px 20px;background-color:#f7f7f7}.p-dialog-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.p-button-rounded[_ngcontent-%COMP%]{background-color:#fff;color:#007ad9}.p-button-success[_ngcontent-%COMP%]{background-color:#fff;color:#4caf50}.p-button-rounded[_ngcontent-%COMP%]:hover, .p-button-info[_ngcontent-%COMP%]:hover{background-color:#007ad9;color:#fff}.p-button-success[_ngcontent-%COMP%]:hover{background-color:#4caf50;color:#fff}.p-button-secondary[_ngcontent-%COMP%]:hover{background-color:#9e9e9e;color:#fff}label[_ngcontent-%COMP%]{font-weight:700}.custom-dialog[_ngcontent-%COMP%]   .ui-dialog-titlebar[_ngcontent-%COMP%]{background-color:#007ad9;color:#fff}.custom-file-upload[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:6px 12px;cursor:pointer;background-color:#007bff;color:#fff;border:none;border-radius:4px;transition:background-color .3s ease-in-out;text-align:center}.custom-file-upload[_ngcontent-%COMP%]:hover{background-color:#0056b3}.archivo-area[_ngcontent-%COMP%]{margin-top:10px;padding:10px;background-color:#f0f0f0;border:1px dashed #999;border-radius:4px;align-items:center;justify-content:space-between}.archivo-area[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;margin-right:10px}.custom-file-upload[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}"]}),n})();function le(n,r){1&n&&(e.TgZ(0,"tr"),e.TgZ(1,"th"),e._uU(2,"ID"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Solicitud"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Fecha Asignaci\xf3n"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Fecha Programaci\xf3n"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Fecha Evaluaci\xf3n"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Correcciones"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Formato de evaluaci\xf3n"),e.qZA(),e._UZ(15,"th"),e.TgZ(16,"th"),e._uU(17,"Paso"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Estado"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Responsable"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"Acciones"),e.qZA(),e.qZA())}function de(n,r){1&n&&(e.ynx(0),e.TgZ(1,"span"),e.TgZ(2,"b"),e._uU(3,"No presenta"),e.qZA(),e.qZA(),e.BQk())}function ue(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"a",15),e.NdJ("click",function(){e.CHM(o);const i=e.oxw().$implicit;return e.oxw(2).abrirCorreciones("http://localhost:8000/solicitud/seguimiento/seguimientos/"+i.id+"/descargar/correciones/")}),e._UZ(1,"i",16),e.qZA()}}function ge(n,r){1&n&&(e.ynx(0),e.TgZ(1,"span"),e.TgZ(2,"b"),e._uU(3,"No presenta"),e.qZA(),e.qZA(),e.BQk())}function pe(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"a",15),e.NdJ("click",function(){e.CHM(o);const i=e.oxw().$implicit;return e.oxw(2).abrirFormato("http://localhost:8000/solicitud/seguimiento/seguimientos/"+i.id+"/descargar/formato_evaluacion/")}),e._UZ(1,"i",16),e.qZA()}}function me(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e.YNc(12,de,4,0,"ng-container",12),e.YNc(13,ue,2,0,"ng-template",null,13,e.W1O),e.qZA(),e.TgZ(15,"td"),e.YNc(16,ge,4,0,"ng-container",12),e.YNc(17,pe,2,0,"ng-template",null,13,e.W1O),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA(),e.TgZ(23,"td"),e._uU(24),e.qZA(),e.TgZ(25,"td"),e.TgZ(26,"button",14),e.NdJ("click",function(){const s=e.CHM(o).$implicit;return e.oxw(2).confirmarEliminacion(s)}),e.qZA(),e.qZA(),e.qZA()}if(2&n){const o=r.$implicit,t=e.MAs(14),i=e.oxw(2);e.xp6(2),e.Oqu(o.id),e.xp6(2),e.Oqu(i.getSolicitudNombre(o.solicitudId)),e.xp6(2),e.Oqu(o.fecha_asignacion),e.xp6(2),e.Oqu(o.fecha_programacion),e.xp6(2),e.Oqu(o.fecha_evaluacion),e.xp6(2),e.Q6J("ngIf",null===o.correciones)("ngIfElse",t),e.xp6(4),e.Q6J("ngIf",null===o.formato_evaluacion)("ngIfElse",t),e.xp6(4),e.Oqu(i.getPasoNombre(o.pasos_seguimiento)),e.xp6(2),e.Oqu(i.getEstadoNombre(o.estado_seguimiento)),e.xp6(2),e.Oqu(i.getResponsableNombre(o.responsableId))}}const _e=function(){return[5,10,20,30]};function he(n,r){if(1&n&&(e.TgZ(0,"p-table",9),e.YNc(1,le,24,0,"ng-template",10),e.YNc(2,me,27,12,"ng-template",11),e.qZA()),2&n){const o=e.oxw();e.Q6J("value",o.filteredSeguimientos)("paginator",!0)("rows",10)("rowsPerPageOptions",e.DdM(4,_e))}}const fe=function(){return{top:"80px"}};let be=(()=>{class n{constructor(o,t,i,s,a){this.solicitudesService=o,this.messageService=t,this.confirmationService=i,this.formBuilder=s,this.userService=a,this.seguimientoSeleccionado=null,this.solicitudes=[],this.pasos=[],this.seguimientos=[],this.mostrarDialogo=!1,this.eliminarConfirmado=!1,this.estados=[],this.responsables=[],this.searchText="",this.filteredSeguimientos=[],this.seguimientoForm=this.formBuilder.group({solicitud:["",c.kI.required],paso:["",c.kI.required],fecha:["",c.kI.required],descripcion:["",c.kI.required],estado:["",c.kI.required]})}ngOnInit(){this.obtenerSeguimientos(),this.obtenerPasos(),this.obtenerSolicitudes(),this.obtenerEstados(),this.obtenerUsuarios()}obtenerSeguimientos(){this.solicitudesService.obtenerSeguimientos().subscribe(o=>{this.seguimientos=o,this.filteredSeguimientos=o},o=>{console.error("Error al obtener los seguimientos",o)})}obtenerPasos(){this.solicitudesService.obtenerPasos().subscribe(o=>{this.pasos=o},o=>{console.error("Error al obtener los pasos de solicitud",o)})}obtenerSolicitudes(){this.solicitudesService.obtenerSolicitudes().subscribe(o=>{this.solicitudes=o},o=>{console.error("Error al obtener las solicitudes",o)})}obtenerUsuarios(){this.userService.ObtenerUsuarios().subscribe(o=>{o&&Array.isArray(o)?this.responsables=o:console.error("Respuesta inv\xe1lida del backend:",o)},o=>{console.error("Error al obtener la lista de usuarios",o)})}obtenerEstados(){this.solicitudesService.obtenerEstados().subscribe(o=>{this.estados=o},o=>{console.error("Error al obtener los estados",o)})}getSolicitudNombre(o){const t=this.solicitudes.find(i=>i.id===o);return t?t.titulo_articulo:""}getPasoNombre(o){const t=this.pasos.find(i=>i.id===o);return t?t.nombre:""}getEstadoNombre(o){const t=this.estados.find(i=>i.id===o);return t?t.nombre:""}getResponsableNombre(o){const t=this.responsables.find(i=>i.user===o);return t?`${t.nombres} ${t.apellidos}`:""}confirmarEliminacion(o){this.seguimientoSeleccionado=o,this.mostrarDialogo=!0}cerrarDialogoEliminacion(){this.seguimientoSeleccionado=null,this.mostrarDialogo=!1,this.eliminarConfirmado=!1}eliminarSeguimiento(){this.seguimientoSeleccionado&&this.solicitudesService.eliminarSeguimiento(this.seguimientoSeleccionado.id).subscribe(()=>{this.mostrarDialogo=!1,this.messageService.add({severity:"success",summary:"\xc9xito",detail:"Seguimiento eliminado correctamente"}),this.obtenerSeguimientos()},t=>{this.mostrarDialogo=!1,console.error("Error al eliminar el seguimiento",t),this.messageService.add({severity:"error",summary:"Error",detail:"Ocurri\xf3 un error al eliminar el seguimiento"})})}buscarSeguimientos(){this.filteredSeguimientos=""===this.searchText.trim()?this.seguimientos:this.seguimientos.filter(o=>{const t=this.getSolicitudNombre(o.solicitudId).toLowerCase().includes(this.searchText.toLowerCase()),i=this.getResponsableNombre(o.responsableId).toLowerCase().includes(this.searchText.toLowerCase());return t||i})}obtenerNombreArchivo(o){const t=o.split("/");return t[t.length-1]}abrirCorreciones(o){window.open(o,"_blank")}abrirFormato(o){window.open(o,"_blank")}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(b.M),e.Y36(m.ez),e.Y36(m.YP),e.Y36(c.qu),e.Y36(v.K))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-eliminar"]],decls:20,vars:8,consts:[[1,"solicitudes-title"],[1,"search-container","p-inputgroup"],["type","text","pInputText","","placeholder","Buscar solicitudes...",1,"form-control","p-inputtext-lg",3,"ngModel","ngModelChange"],[1,"p-inputgroup-addon"],["pButton","","type","button","icon","pi pi-search",1,"p-button-rounded","custom-button-color",3,"click"],[3,"value","paginator","rows","rowsPerPageOptions",4,"ngIf"],["header","Confirmar Eliminaci\xf3n",3,"visible","modal","responsive","visibleChange"],["pButton","","type","button","label","Cancelar",1,"ui-button-secondary",3,"click"],["pButton","","type","button","label","Eliminar",1,"ui-button-danger",3,"click"],[3,"value","paginator","rows","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],[4,"ngIf","ngIfElse"],["downloadLink",""],["pButton","","type","button","label","Eliminar","icon","pi pi-trash",1,"p-button-danger","p-button-outlined",3,"click"],["pTooltip","Ver archivo","tooltipPosition","top",3,"click"],[1,"pi","pi-file-pdf"]],template:function(o,t){1&o&&(e._UZ(0,"br"),e._UZ(1,"br"),e._UZ(2,"br"),e._UZ(3,"br"),e.TgZ(4,"h2",0),e._uU(5,"Eliminar Seguimiento"),e.qZA(),e.TgZ(6,"div",1),e.TgZ(7,"input",2),e.NdJ("ngModelChange",function(s){return t.searchText=s})("ngModelChange",function(){return t.buscarSeguimientos()}),e.qZA(),e.TgZ(8,"span",3),e.TgZ(9,"button",4),e.NdJ("click",function(){return t.buscarSeguimientos()}),e.qZA(),e.qZA(),e.qZA(),e._UZ(10,"br"),e._UZ(11,"br"),e.YNc(12,he,3,5,"p-table",5),e.TgZ(13,"p-dialog",6),e.NdJ("visibleChange",function(s){return t.mostrarDialogo=s}),e.TgZ(14,"p"),e._uU(15,"\xbfEst\xe1s seguro de que quieres eliminar este seguimiento?"),e.qZA(),e.TgZ(16,"p-footer"),e.TgZ(17,"button",7),e.NdJ("click",function(){return t.mostrarDialogo=!1}),e.qZA(),e.TgZ(18,"button",8),e.NdJ("click",function(){return t.eliminarSeguimiento()}),e.qZA(),e.qZA(),e.qZA(),e._UZ(19,"p-toast")),2&o&&(e.xp6(7),e.Q6J("ngModel",t.searchText),e.xp6(5),e.Q6J("ngIf",t.filteredSeguimientos&&t.filteredSeguimientos.length>0||""===t.searchText),e.xp6(1),e.Q6J("visible",t.mostrarDialogo)("modal",!0)("responsive",!0),e.xp6(6),e.Akn(e.DdM(7,fe)))},directives:[c.Fj,C.o,c.JJ,c.On,h.Hq,_.O5,T.iA,m.jx,q.u,Z.V,m.$_,S.FN],styles:[".custom-table[_ngcontent-%COMP%]{margin-top:20px}.solicitudes-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;margin-bottom:20px;text-align:center;color:#fa6357;text-transform:uppercase;letter-spacing:2px}.p-dialog-message[_ngcontent-%COMP%]{margin-bottom:20px}.p-dialog-footer[_ngcontent-%COMP%]{text-align:right}.custom-dialog[_ngcontent-%COMP%]{width:400px}.custom-dialog[_ngcontent-%COMP%]   .p-dialog-header[_ngcontent-%COMP%]{background-color:#337ab7;color:#fff}.custom-dialog[_ngcontent-%COMP%]   .p-dialog-header[_ngcontent-%COMP%]   .p-dialog-title[_ngcontent-%COMP%]{font-size:18px}.custom-dialog[_ngcontent-%COMP%]   .p-dialog-content[_ngcontent-%COMP%]{padding:20px}.custom-dialog[_ngcontent-%COMP%]   .p-dialog-footer[_ngcontent-%COMP%]{text-align:right;padding:10px 20px;background-color:#f5f5f5}@keyframes slideIn{0%{transform:translate(-100%);opacity:0}to{transform:translate(0);opacity:1}}.slide-in[_ngcontent-%COMP%]{animation:slideIn .5s ease-out forwards}"]}),n})();function Ze(n,r){if(1&n&&e._uU(0),2&n){const o=r.$implicit;e.AsE(" ",o.nombres," ",o.apellidos," ")}}function ve(n,r){if(1&n&&(e.TgZ(0,"div"),e.TgZ(1,"span"),e._uU(2,"Archivo seleccionado:"),e.qZA(),e._uU(3),e.qZA()),2&n){const o=e.oxw();e.xp6(3),e.hij(" ",o.archivoSeleccionado," ")}}function xe(n,r){if(1&n&&(e.TgZ(0,"div"),e.TgZ(1,"span"),e._uU(2,"Archivo seleccionado:"),e.qZA(),e._uU(3),e.qZA()),2&n){const o=e.oxw();e.xp6(3),e.hij(" ",o.archivoSeleccionadoFormato," ")}}const Ce=function(){return{top:"80px"}};let Te=(()=>{class n{constructor(o,t,i,s){this.solicitudesService=o,this.userService=t,this.messageService=i,this.formBuilder=s,this.seguimiento={id:0,fecha_asignacion:"",fecha_programacion:"",fecha_evaluacion:"",correciones:"",formato_evaluacion:"",status:!0,solicitudId:0,pasos_seguimiento:0,estado_seguimiento:0,responsableId:0},this.solicitudes=[],this.responsables=[],this.pasos=[],this.estados=[],this.selectedFile=null,this.selectedFileFormato=null,this.archivoSeleccionado="",this.archivoSeleccionadoFormato="",this.seguimientoForm=this.formBuilder.group({fecha_asignacion:["",c.kI.required],fecha_programacion:["",c.kI.required],fecha_evaluacion:["",c.kI.required],correciones:["",c.kI.required],solicitudId:[0,c.kI.required],pasos_seguimiento:[0,c.kI.required],estado_seguimiento:[0,c.kI.required],responsableId:[0,c.kI.required]})}ngOnInit(){this.obtenerSolicitudes(),this.obtenerResponsables(),this.obtenerPasos(),this.obtenerEstados()}obtenerSolicitudes(){this.solicitudesService.obtenerSolicitudes().subscribe(o=>{this.solicitudes=o},o=>{console.error("Error al obtener las solicitudes",o)})}obtenerResponsables(){this.userService.ObtenerUsuarios().subscribe(o=>{this.responsables=o},o=>{console.error("Error al obtener los responsables:",o)})}obtenerEstados(){this.solicitudesService.obtenerEstados().subscribe(o=>{this.estados=o},o=>{console.error("Error al obtener los estados de seguimiento",o)})}obtenerPasos(){this.solicitudesService.obtenerPasos().subscribe(o=>{this.pasos=o},o=>{console.error("Error al obtener los pasos de seguimiento",o)})}guardarSeguimiento(){if(this.selectedFile){const o=new FormData;o.append("fecha_asignacion",this.seguimientoForm.value.fecha_asignacion),o.append("fecha_programacion",this.seguimientoForm.value.fecha_programacion),o.append("fecha_evaluacion",this.seguimientoForm.value.fecha_evaluacion),o.append("status","true"),o.append("solicitudId",this.seguimientoForm.value.solicitudId.toString()),o.append("pasos_seguimiento",this.seguimientoForm.value.pasos_seguimiento.toString()),o.append("estado_seguimiento",this.seguimientoForm.value.estado_seguimiento.toString()),o.append("responsableId",this.seguimientoForm.value.responsableId.toString()),o.append("correciones",this.selectedFile),this.solicitudesService.crearSeguimiento(o).subscribe(t=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:"Seguimiento creado correctamente"}),this.limpiarFormulario()},t=>{this.messageService.add({severity:"error",summary:"Error",detail:"Error al crear el seguimiento"}),console.error("Error al crear el seguimiento",t)})}}onFileSelected(o){this.selectedFile=o.target.files[0],this.archivoSeleccionado=o.target.files[0].name}onFileSelectedFormato(o){this.selectedFileFormato=o.target.files[0],this.archivoSeleccionadoFormato=o.target.files[0].name}limpiarFormulario(){this.seguimiento={id:0,fecha_asignacion:"",formato_evaluacion:"",fecha_programacion:"",fecha_evaluacion:"",correciones:"",status:!0,solicitudId:0,pasos_seguimiento:0,estado_seguimiento:0,responsableId:0},this.seguimientoForm.reset({}),this.selectedFile=null}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(b.M),e.Y36(v.K),e.Y36(m.ez),e.Y36(c.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-crear-seguimiento"]],decls:69,vars:14,consts:[[1,"solicitudes-title"],[1,"crear-seguimiento-container"],[1,"crear-seguimiento-form",3,"formGroup","ngSubmit"],["for","solicitudId"],["id","solicitudId","name","solicitudId","optionLabel","titulo_articulo","optionValue","id","placeholder","seleccionar...","formControlName","solicitudId",3,"options","filter"],["for","responsableId"],["id","responsableId","name","responsableId","optionLabel","nombres","optionValue","user","placeholder","seleccionar...","formControlName","responsableId",3,"options","filter"],["pTemplate","item"],["for","pasos_seguimiento"],["id","pasos_seguimiento","name","pasos_seguimiento","optionLabel","nombre","optionValue","id","placeholder","seleccionar...","formControlName","pasos_seguimiento",3,"options","filter"],["for","estado_seguimiento"],["id","estado_seguimiento","name","estado_seguimiento","optionLabel","nombre","optionValue","id","placeholder","seleccionar...","formControlName","estado_seguimiento",3,"options","filter"],["for","fechaAsignacion"],["type","date","id","fechaAsignacion","formControlName","fecha_asignacion","name","fechaAsignacion","required",""],["for","fechaProgramacion"],["type","date","id","fechaProgramacion","formControlName","fecha_programacion","name","fechaProgramacion","required",""],["for","fechaEvaluacion"],["type","date","id","fechaEvaluacion","formControlName","fecha_evaluacion","name","fechaEvaluacion","required",""],["for","correciones"],[1,"archivo-area"],["for","correcciones",1,"custom-file-upload"],[1,"pi","pi-upload"],[2,"margin-left","5px"],["pButton","","type","file","id","correcciones","required","",2,"display","none",3,"change"],[4,"ngIf"],["for","formato_evaluacion"],["for","formato_evaluacion",1,"custom-file-upload"],["pButton","","type","file","id","formato_evaluacion","required","",2,"display","none",3,"change"],["pButton","","type","submit","icon","pi pi-save","label","Guardar Seguimiento",1,"p-button","p-button-outlined"]],template:function(o,t){1&o&&(e._UZ(0,"br"),e._UZ(1,"br"),e._UZ(2,"br"),e._UZ(3,"br"),e.TgZ(4,"h1",0),e._uU(5,"CREAR SEGUIMIENTO"),e.qZA(),e.TgZ(6,"div",1),e.TgZ(7,"form",2),e.NdJ("ngSubmit",function(){return t.guardarSeguimiento()}),e.TgZ(8,"div"),e.TgZ(9,"label",3),e._uU(10,"Solicitud"),e.qZA(),e._UZ(11,"br"),e._UZ(12,"p-dropdown",4),e.qZA(),e.TgZ(13,"div"),e.TgZ(14,"label",5),e._uU(15,"Responsable"),e.qZA(),e._UZ(16,"br"),e.TgZ(17,"p-dropdown",6),e.YNc(18,Ze,1,2,"ng-template",7),e.qZA(),e.qZA(),e.TgZ(19,"div"),e.TgZ(20,"label",8),e._uU(21,"Pasos de seguimiento"),e.qZA(),e._UZ(22,"br"),e._UZ(23,"p-dropdown",9),e.qZA(),e.TgZ(24,"div"),e.TgZ(25,"label",10),e._uU(26,"Estado de seguimiento"),e.qZA(),e._UZ(27,"br"),e._UZ(28,"p-dropdown",11),e.qZA(),e.TgZ(29,"div"),e.TgZ(30,"label",12),e._uU(31,"Fecha de Asignaci\xf3n"),e.qZA(),e._UZ(32,"input",13),e.qZA(),e.TgZ(33,"div"),e.TgZ(34,"label",14),e._uU(35,"Fecha de Programaci\xf3n"),e.qZA(),e._UZ(36,"input",15),e.qZA(),e.TgZ(37,"div"),e.TgZ(38,"label",16),e._uU(39,"Fecha de Evaluaci\xf3n"),e.qZA(),e._UZ(40,"input",17),e.qZA(),e.TgZ(41,"div"),e.TgZ(42,"label",18),e._uU(43,"Correcciones"),e.qZA(),e._UZ(44,"br"),e.TgZ(45,"div",19),e.TgZ(46,"div"),e.TgZ(47,"label",20),e._UZ(48,"i",21),e.TgZ(49,"span",22),e._uU(50,"Seleccionar archivo"),e.qZA(),e.TgZ(51,"input",23),e.NdJ("change",function(s){return t.onFileSelected(s)}),e.qZA(),e.qZA(),e.qZA(),e._UZ(52,"br"),e.YNc(53,ve,4,1,"div",24),e.qZA(),e.qZA(),e.TgZ(54,"div"),e.TgZ(55,"label",25),e._uU(56,"Formato de evaluaci\xf3n"),e.qZA(),e._UZ(57,"br"),e.TgZ(58,"div",19),e.TgZ(59,"div"),e.TgZ(60,"label",26),e._UZ(61,"i",21),e.TgZ(62,"span",22),e._uU(63,"Seleccionar archivo"),e.qZA(),e.TgZ(64,"input",27),e.NdJ("change",function(s){return t.onFileSelectedFormato(s)}),e.qZA(),e.qZA(),e.qZA(),e._UZ(65,"br"),e.YNc(66,xe,4,1,"div",24),e.qZA(),e.qZA(),e._UZ(67,"button",28),e.qZA(),e._UZ(68,"p-toast"),e.qZA()),2&o&&(e.xp6(7),e.Q6J("formGroup",t.seguimientoForm),e.xp6(5),e.Q6J("options",t.solicitudes)("filter",!0),e.xp6(5),e.Q6J("options",t.responsables)("filter",!0),e.xp6(6),e.Q6J("options",t.pasos)("filter",!0),e.xp6(5),e.Q6J("options",t.estados)("filter",!0),e.xp6(25),e.Q6J("ngIf",t.archivoSeleccionado),e.xp6(13),e.Q6J("ngIf",t.archivoSeleccionadoFormato),e.xp6(2),e.Akn(e.DdM(13,Ce)))},directives:[c._Y,c.JL,c.sg,x.Lt,c.JJ,c.u,m.jx,c.Fj,c.Q7,h.Hq,_.O5,S.FN],styles:[".solicitudes-title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin-bottom:20px;text-align:center;color:#fa6357;text-transform:uppercase;letter-spacing:2px}.crear-seguimiento-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;border:1px solid #ccc;border-radius:8px;box-shadow:0 2px 4px #0000001a;background-color:#fff}.crear-seguimiento-title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:20px}.crear-seguimiento-form[_ngcontent-%COMP%]{display:grid;grid-gap:16px;gap:16px}.crear-seguimiento-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.crear-seguimiento-form[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%], .crear-seguimiento-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .crear-seguimiento-form[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:4px}.crear-seguimiento-form[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto}.crear-seguimiento-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;border-radius:8px;background-color:#f5f5f5;box-shadow:0 2px 4px #0000001a}.crear-seguimiento-title[_ngcontent-%COMP%]{font-size:28px;margin-bottom:20px}.crear-seguimiento-form[_ngcontent-%COMP%]{display:grid;grid-gap:20px;gap:20px}.p-toast[_ngcontent-%COMP%]{font-size:16px}.custom-dropdown[_ngcontent-%COMP%]{width:100%!important}.custom-file-upload[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:6px 12px;cursor:pointer;background-color:#007bff;color:#fff;border:none;border-radius:4px;transition:background-color .3s ease-in-out;text-align:center}.custom-file-upload[_ngcontent-%COMP%]:hover{background-color:#0056b3}.archivo-area[_ngcontent-%COMP%]{margin-top:10px;padding:10px;background-color:#f0f0f0;border:1px dashed #999;border-radius:4px;align-items:center;justify-content:space-between}.archivo-area[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;margin-right:10px}.custom-file-upload[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}"]}),n})();var w=l(7990);function Se(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"div",9),e.TgZ(1,"div",10),e.TgZ(2,"div",11),e._UZ(3,"img",12),e.TgZ(4,"span",13),e._uU(5),e.qZA(),e.TgZ(6,"p",14),e._uU(7),e.qZA(),e.TgZ(8,"span",15),e._uU(9),e.qZA(),e.qZA(),e.TgZ(10,"div"),e.TgZ(11,"button",16),e.NdJ("click",function(){const s=e.CHM(o).$implicit;return e.oxw(2).mostrarDialogoCorreciones(s)}),e.qZA(),e.qZA(),e.TgZ(12,"div",17),e.TgZ(13,"span",18),e._uU(14,"Progreso"),e.qZA(),e.TgZ(15,"div",19),e._uU(16),e.qZA(),e.qZA(),e.TgZ(17,"div",20),e._UZ(18,"div",21),e.qZA(),e.TgZ(19,"div",17),e.TgZ(20,"span",22),e._uU(21),e.qZA(),e.TgZ(22,"span",23),e._uU(23),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const o=r.$implicit,t=e.oxw(2);e.xp6(5),e.Oqu(t.getSolicitudNombre(o.solicitudId)),e.xp6(2),e.Oqu(t.getPasoNombre(o.pasos_seguimiento)),e.xp6(2),e.hij(" ",t.getEstadoNombre(o.estado_seguimiento)," "),e.xp6(7),e.hij(" ",t.getPorcentaje(o.pasos_seguimiento),"% "),e.xp6(2),e.Udp("width",t.getPorcentaje(o.pasos_seguimiento),"%"),e.xp6(3),e.AsE("",t.getNivelActual(o.pasos_seguimiento),"/",t.totalPasos,""),e.xp6(2),e.Oqu(o.fecha_asignacion)}}function Ae(n,r){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Se,24,9,"div",8),e.qZA()),2&n){const o=e.oxw();e.xp6(1),e.Q6J("ngForOf",o.seguimientos)}}function qe(n,r){1&n&&(e.TgZ(0,"p",24),e._uU(1,"No se encontraron seguimientos, recuerde que una vez se genera una solicitud se generaran automaticamente los debidos seguimientos."),e.qZA())}function Oe(n,r){if(1&n){const o=e.EpF();e.ynx(0),e.TgZ(1,"p"),e._uU(2,"Correcciones:"),e.qZA(),e.TgZ(3,"button",26),e.NdJ("click",function(){e.CHM(o);const i=e.oxw().$implicit;return e.oxw().descargarCorrecciones(i.id)}),e.qZA(),e.TgZ(4,"p"),e._uU(5,"Formato de evaluaci\xf3n:"),e.qZA(),e.TgZ(6,"button",26),e.NdJ("click",function(){e.CHM(o);const i=e.oxw().$implicit;return e.oxw().descargarFormato(i.id)}),e.qZA(),e.BQk()}}function Me(n,r){if(1&n&&(e.TgZ(0,"div"),e.TgZ(1,"div"),e.TgZ(2,"p"),e._uU(3,"Estado: "),e.TgZ(4,"b"),e._uU(5),e.qZA(),e.qZA(),e.YNc(6,Oe,7,0,"ng-container",25),e.qZA(),e.qZA()),2&n){const o=r.$implicit,t=e.oxw();e.xp6(5),e.Oqu(t.getEstadoNombre(o.estado_seguimiento)),e.xp6(1),e.Q6J("ngIf",!t.esPendiente(o.estado_seguimiento))}}function Ue(n,r){if(1&n){const o=e.EpF();e.ynx(0),e.TgZ(1,"p"),e._uU(2,"Correcciones:"),e.qZA(),e.TgZ(3,"button",26),e.NdJ("click",function(){e.CHM(o);const i=e.oxw().$implicit;return e.oxw().descargarCorrecciones(i.id)}),e.qZA(),e.TgZ(4,"p"),e._uU(5,"Formato de evaluaci\xf3n:"),e.qZA(),e.TgZ(6,"button",26),e.NdJ("click",function(){e.CHM(o);const i=e.oxw().$implicit;return e.oxw().descargarFormato(i.id)}),e.qZA(),e.BQk()}}function Pe(n,r){if(1&n&&(e.TgZ(0,"div"),e.TgZ(1,"div"),e.TgZ(2,"p"),e._uU(3,"Estado: "),e.TgZ(4,"b"),e._uU(5),e.qZA(),e.qZA(),e.YNc(6,Ue,7,0,"ng-container",25),e.qZA(),e.qZA()),2&n){const o=r.$implicit,t=e.oxw();e.xp6(5),e.Oqu(t.getEstadoNombre(o.estado_seguimiento)),e.xp6(1),e.Q6J("ngIf",!t.esPendiente(o.estado_seguimiento))}}const we=function(){return{width:"25%","min-height":"300px",top:"30px","text-align":"center"}};let Ee=(()=>{class n{constructor(o,t){this.solicitudesService=o,this.authService=t,this.API_URI=A.N.API_URI,this.solicitudes=[],this.pasos=[],this.estados=[],this.seguimientos=[],this.DialogoCorreciones=!1,this.totalPasos=5,this.correcciones=[],this.revisionEvaluador1Seguimientos=[],this.revisionEvaluador2Seguimientos=[]}ngOnInit(){this.usuarioId=this.authService.getUserId(),void 0!==this.usuarioId?this.cargarSeguimientosUsuario(this.usuarioId):console.error("El usuario no tiene un ID v\xe1lido."),this.obtenerPasos(),this.obtenerEstados(),this.obtenerSolicitudes()}mostrarDialogoCorreciones(o){this.cargarResultados(o),this.seguimiento=o,this.DialogoCorreciones=!0}cerrarDialogoCorreciones(){this.DialogoCorreciones=!1}cargarSeguimientosUsuario(o){this.solicitudesService.obtenerSolicitudesPorUsuario(o).subscribe(t=>{if(t.length>0){const i=t.map(s=>s.id);this.solicitudesService.obtenerSeguimientos().subscribe(s=>{s.sort((d,u)=>u.pasos_seguimiento-d.pasos_seguimiento);const a=[];i.forEach(d=>{const u=s.filter(p=>p.solicitudId===d);if(u.length>0){let p;p=u.find(g=>null!==g.responsableId),p||(p=u.find(g=>g.pasos_seguimiento===((null==p?void 0:p.pasos_seguimiento)||0)-1)),p&&a.push(p)}}),this.seguimientos=a},s=>{console.error(s)})}else this.seguimientos=[]},t=>{console.error(t)})}obtenerPasos(){this.solicitudesService.obtenerPasos().subscribe(o=>{this.pasos=o},o=>{console.error("Error al obtener los pasos de solicitud",o)})}obtenerEstados(){this.solicitudesService.obtenerEstados().subscribe(o=>{this.estados=o},o=>{console.error("Error al obtener los pasos de solicitud",o)})}obtenerSolicitudes(){this.solicitudesService.obtenerSolicitudes().subscribe(o=>{this.solicitudes=o},o=>{console.error("Error al obtener las solicitudes",o)})}getSolicitudNombre(o){const t=this.solicitudes.find(i=>i.id===o);return t?t.titulo_articulo:""}getPasoNombre(o){const t=this.pasos.find(i=>i.id===o);return t?t.nombre:""}getEstadoNombre(o){const t=this.estados.find(i=>i.id===o);return t?t.nombre:""}getPorcentaje(o){const t=this.pasos.find(i=>i.id===o);return t?parseFloat((t.nivel/this.totalPasos*100).toFixed(2)):0}getNivelActual(o){const t=this.pasos.find(i=>i.id===o);return t?t.nivel:0}cargarResultados(o){this.solicitudesService.getSeguimientosBySolicitud(o.solicitudId).subscribe(t=>{this.revisionEvaluador1Seguimientos=t.filter(i=>i.solicitudId===o.solicitudId&&5===i.pasos_seguimiento),this.revisionEvaluador2Seguimientos=t.filter(i=>i.solicitudId===o.solicitudId&&6===i.pasos_seguimiento)})}descargarCorrecciones(o){window.open(`${this.API_URI}/solicitud/seguimiento/seguimientos/${o}/descargar/correciones/`,"_blank")}descargarFormato(o){window.open(`${this.API_URI}/solicitud/seguimiento/seguimientos/${o}/descargar/formato_evaluacion/`,"_blank")}esPendiente(o){const t=this.estados.find(i=>i.id===o);return!!t&&"pendiente"===t.nombre.toLowerCase()}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(b.M),e.Y36(w.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-mis-seguimientos"]],decls:21,vars:13,consts:[[1,"solicitudes-title"],[1,"seguimientos-container"],[4,"ngIf","ngIfElse"],["noSolicitudes",""],["header","Evaluaciones de la solicitud",3,"visible","responsive","showHeader","closable","dismissableMask","modal","visibleChange"],[4,"ngFor","ngForOf"],[2,"bottom","10px","right","20px"],["pButton","","type","button","label","Cerrar",1,"p-button-secondary","p-button-outlined","p-button-rounded",2,"width","100%",3,"click"],["class","seguimiento-card",4,"ngFor","ngForOf"],[1,"seguimiento-card"],[1,"shadow-2","surface-card","border-round","p-4","flex-1","text-center","mb-6","md:mb-0"],[1,"mb-4"],["src","assets/logo_r.jpg","width","100","height","100",1,"-mt-8"],[1,"block","text-900","mb-1","text-xl","font-bold"],[1,"text-600","m-0","font-medium"],[1,"bg-blue-50","text-blue-400","border-round","inline-flex","py-1","px-2","text-sm"],["pButton","","label","correciones","icon","pi pi-list",1,"p-button-info","p-button-outlined",3,"click"],[1,"flex","justify-content-between","align-items-center"],[1,"text-600"],[1,"border-round",2,"height","7px"],[1,"surface-300","mt-2","mb-3","border-round",2,"height","7px","width","100%"],[1,"bg-blue-500","h-full","border-round"],[1,"text-900"],[1,"text-primary","font-medium"],[1,"no-solicitudes-message"],[4,"ngIf"],["pButton","","type","button","icon","pi pi-download","label","Descargar",1,"p-button-success","p-button-outlined",3,"click"]],template:function(o,t){if(1&o&&(e._UZ(0,"br"),e._UZ(1,"br"),e.TgZ(2,"h2",0),e._uU(3,"Seguimiento de mis solicitudes"),e.qZA(),e.TgZ(4,"div",1),e.YNc(5,Ae,2,1,"div",2),e.qZA(),e.YNc(6,qe,2,0,"ng-template",null,3,e.W1O),e.TgZ(8,"p-dialog",4),e.NdJ("visibleChange",function(s){return t.DialogoCorreciones=s}),e.ynx(9),e.TgZ(10,"h3"),e._uU(11,"Resultados de evaluador #1"),e.qZA(),e.YNc(12,Me,7,2,"div",5),e._UZ(13,"br"),e.TgZ(14,"h3"),e._uU(15,"Resultados de evaluador #2"),e.qZA(),e.YNc(16,Pe,7,2,"div",5),e.BQk(),e._UZ(17,"br"),e._UZ(18,"br"),e.TgZ(19,"div",6),e.TgZ(20,"button",7),e.NdJ("click",function(){return t.cerrarDialogoCorreciones()}),e.qZA(),e.qZA(),e.qZA()),2&o){const i=e.MAs(7);e.xp6(5),e.Q6J("ngIf",t.seguimientos.length>0)("ngIfElse",i),e.xp6(3),e.Akn(e.DdM(12,we)),e.Q6J("visible",t.DialogoCorreciones)("responsive",!0)("showHeader",!1)("closable",!1)("dismissableMask",!1)("modal",!0),e.xp6(4),e.Q6J("ngForOf",t.revisionEvaluador1Seguimientos),e.xp6(4),e.Q6J("ngForOf",t.revisionEvaluador2Seguimientos)}},directives:[_.O5,_.sg,h.Hq,Z.V],styles:[".seguimientos-container[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:20px;display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,2fr));grid-gap:20px;gap:20px}.seguimiento-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;padding:15px;box-shadow:0 2px 4px #0000001a;margin:60px 20px 20px}.seguimiento-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.estado-icon[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:50%}.completado[_ngcontent-%COMP%]{background-color:green}.en-progreso[_ngcontent-%COMP%]{background-color:#ff0}.pendiente[_ngcontent-%COMP%]{background-color:red}.fecha[_ngcontent-%COMP%]{display:flex;color:#666}.solicitud-nombre[_ngcontent-%COMP%]{font-weight:700}.paso-nombre[_ngcontent-%COMP%]{color:#888}.descripcion[_ngcontent-%COMP%]{margin-top:10px}.solicitudes-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;text-align:center;color:#fa6357;text-transform:uppercase;letter-spacing:2px;margin-bottom:20px}.botones-container[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:0;width:100%;display:flex;justify-content:space-between}.no-solicitudes-message[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;padding:20px;position:relative;text-align:center;left:50%;transform:translate(-50%,-50%)}@media (min-width: 769px) and (max-width: 1024px){.seguimientos-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (max-width: 768px){.seguimiento-cards[_ngcontent-%COMP%]{grid-template-columns:repeat(1,minmax(0,1fr))}.botones-container[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.seguimiento-card[_ngcontent-%COMP%]{margin-bottom:20px}}"]}),n})();var ye=l(5861),Ie=l(2313),E=l(2266),O=l(3787);function Fe(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"div",43),e.TgZ(1,"div",44),e.TgZ(2,"div",45),e.TgZ(3,"div",46),e.TgZ(4,"p-avatar",47),e.TgZ(5,"div",48),e._UZ(6,"img",49),e.qZA(),e.qZA(),e.TgZ(7,"div",50),e.TgZ(8,"div",51),e._uU(9),e.qZA(),e.TgZ(10,"div",52),e.TgZ(11,"span"),e._uU(12),e.qZA(),e._UZ(13,"div",53),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",54),e._uU(15),e.qZA(),e.TgZ(16,"div",55),e._uU(17),e.qZA(),e.TgZ(18,"div",56),e.TgZ(19,"button",57),e.NdJ("click",function(){const s=e.CHM(o).$implicit;return e.oxw(2).mostrarDialogVerContenido(s)}),e.qZA(),e.TgZ(20,"button",58),e.NdJ("click",function(){const s=e.CHM(o).$implicit;return e.oxw(2).mostrarDialogAcciones(s)}),e.qZA(),e.TgZ(21,"button",59),e.NdJ("click",function(){const s=e.CHM(o).$implicit;return e.oxw(2).mostrarDialogVerEvaluaciones(s)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const o=r.$implicit,t=e.oxw(2);e.xp6(9),e.hij("",t.getUsuarioNombre(o.responsableId)," "),e.xp6(3),e.Oqu(o.fecha_asignacion),e.xp6(3),e.Oqu(t.getSolicitudNombre(o.solicitudId)),e.xp6(2),e.Oqu(t.getPasoNombre(o.pasos_seguimiento))}}function ke(n,r){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Fe,22,4,"div",42),e.qZA()),2&n){const o=e.oxw();e.xp6(1),e.Q6J("ngForOf",o.seguimientos)}}function Ne(n,r){1&n&&(e._UZ(0,"br"),e.TgZ(1,"h3",60),e._uU(2,"No tiene solicitudes asignadas en este momento."),e._UZ(3,"br"),e._uU(4," Aproveche el tiempo para explorar otras \xe1reas o contacte con el soporte si necesita ayuda."),e.qZA(),e._UZ(5,"br"))}function Je(n,r){if(1&n&&e._UZ(0,"embed",75),2&n){const o=e.oxw(3);e.Q6J("src",o.fileURL,e.uOi)}}function De(n,r){if(1&n&&e._UZ(0,"embed",75),2&n){const o=e.oxw(3);e.Q6J("src",o.originalidadURL,e.uOi)}}function Ye(n,r){if(1&n){const o=e.EpF();e.ynx(0),e.TgZ(1,"p-accordion"),e.TgZ(2,"p-accordionTab",67),e.YNc(3,Je,1,1,"embed",68),e.qZA(),e.TgZ(4,"p-accordionTab",69),e.YNc(5,De,1,1,"embed",68),e.qZA(),e.qZA(),e._UZ(6,"br"),e.TgZ(7,"div",70),e.TgZ(8,"button",71),e.NdJ("click",function(){e.CHM(o);const i=e.oxw(2);return i.descargarArchivo(i.selectedContenido.id,"archivo_adjunto")}),e.qZA(),e.TgZ(9,"button",72),e.NdJ("click",function(){e.CHM(o);const i=e.oxw(2);return i.descargarArchivo(i.selectedContenido.id,"originalidad")}),e.qZA(),e.qZA(),e._UZ(10,"br"),e.TgZ(11,"div",73),e.TgZ(12,"button",74),e.NdJ("click",function(){return e.CHM(o),e.oxw(2).ocultarDialogVerContenido()}),e.qZA(),e.qZA(),e._UZ(13,"br"),e.BQk()}if(2&n){const o=e.oxw(2);e.xp6(3),e.Q6J("ngIf",o.fileURL),e.xp6(2),e.Q6J("ngIf",o.originalidadURL)}}const je=function(){return{width:"80%",top:"30px"}};function Qe(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"p-dialog",61),e.NdJ("visibleChange",function(i){return e.CHM(o),e.oxw().displayVerContenido=i}),e.TgZ(1,"div",62),e.TgZ(2,"div",63),e._UZ(3,"img",64),e.TgZ(4,"div",65),e.TgZ(5,"h3",66),e._uU(6),e.qZA(),e.TgZ(7,"p"),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e._UZ(9,"hr"),e.YNc(10,Ye,14,2,"ng-container",27),e.qZA(),e.qZA()}if(2&n){const o=e.oxw();e.Akn(e.DdM(11,je)),e.s9C("header",o.selectedSeguimiento.titulo_articulo),e.Q6J("visible",o.displayVerContenido)("modal",!0)("showHeader",!1)("closable",!0)("dismissableMask",!0),e.xp6(6),e.Oqu(o.getSolicitudNombre(o.selectedSeguimiento.solicitudId)),e.xp6(2),e.Oqu(o.getAutoresNombres(o.selectedSeguimiento.solicitudId)),e.xp6(2),e.Q6J("ngIf",o.selectedContenido)}}function Re(n,r){if(1&n&&(e.TgZ(0,"div"),e.TgZ(1,"span"),e._uU(2,"Archivo seleccionado:"),e.qZA(),e._uU(3),e.qZA()),2&n){const o=e.oxw();e.xp6(3),e.hij(" ",o.archivoSeleccionadoCorreciones," ")}}function Be(n,r){if(1&n&&(e.TgZ(0,"div"),e.TgZ(1,"span"),e._uU(2,"Archivo seleccionado:"),e.qZA(),e._uU(3),e.qZA()),2&n){const o=e.oxw();e.xp6(3),e.hij(" ",o.archivoSeleccionadoFormato," ")}}function Ve(n,r){if(1&n&&e._uU(0),2&n){const o=r.$implicit;e.AsE(" ",o.nombres," ",o.apellidos," ")}}function $e(n,r){if(1&n){const o=e.EpF();e.ynx(0),e.TgZ(1,"p"),e._uU(2,"Correcciones:"),e.qZA(),e.TgZ(3,"button",76),e.NdJ("click",function(){e.CHM(o);const i=e.oxw().$implicit;return e.oxw().descargarCorrecciones(i.id)}),e.qZA(),e.TgZ(4,"p"),e._uU(5,"Formato de evaluaci\xf3n:"),e.qZA(),e.TgZ(6,"button",76),e.NdJ("click",function(){e.CHM(o);const i=e.oxw().$implicit;return e.oxw().descargarFormato(i.id)}),e.qZA(),e.BQk()}}function ze(n,r){if(1&n&&(e.TgZ(0,"div"),e.TgZ(1,"div"),e.TgZ(2,"p"),e._uU(3,"Estado: "),e.TgZ(4,"b"),e._uU(5),e.qZA(),e.qZA(),e.YNc(6,$e,7,0,"ng-container",27),e.qZA(),e.qZA()),2&n){const o=r.$implicit,t=e.oxw();e.xp6(5),e.Oqu(t.getEstadoNombre(o.estado_seguimiento)),e.xp6(1),e.Q6J("ngIf",!t.esPendiente(o.estado_seguimiento))}}function Le(n,r){if(1&n){const o=e.EpF();e.ynx(0),e.TgZ(1,"p"),e._uU(2,"Correcciones:"),e.qZA(),e.TgZ(3,"button",76),e.NdJ("click",function(){e.CHM(o);const i=e.oxw().$implicit;return e.oxw().descargarCorrecciones(i.id)}),e.qZA(),e.TgZ(4,"p"),e._uU(5,"Formato de evaluaci\xf3n:"),e.qZA(),e.TgZ(6,"button",76),e.NdJ("click",function(){e.CHM(o);const i=e.oxw().$implicit;return e.oxw().descargarFormato(i.id)}),e.qZA(),e.BQk()}}function He(n,r){if(1&n&&(e.TgZ(0,"div"),e.TgZ(1,"div"),e.TgZ(2,"p"),e._uU(3,"Estado: "),e.TgZ(4,"b"),e._uU(5),e.qZA(),e.qZA(),e.YNc(6,Le,7,0,"ng-container",27),e.qZA(),e.qZA()),2&n){const o=r.$implicit,t=e.oxw();e.xp6(5),e.Oqu(t.getEstadoNombre(o.estado_seguimiento)),e.xp6(1),e.Q6J("ngIf",!t.esPendiente(o.estado_seguimiento))}}const Ge=function(){return{width:"40%",top:"30px"}},Ke=function(){return{width:"50%",top:"30px",height:"88%"}},We=function(){return{width:"70%",top:"30px",height:"55%"}},Xe=function(){return{width:"25%","min-height":"300px",top:"30px","text-align":"center"}},eo=[{path:"ver",component:L},{path:"crear",component:Te},{path:"editar",component:ce},{path:"eliminar",component:be},{path:"mis_seguimientos",component:Ee},{path:"solicitudes_asignadas",component:(()=>{class n{constructor(o,t,i,s,a,d,u){this.solicitudesService=o,this.authService=t,this.userService=i,this.cdRef=s,this.formBuilder=a,this.messageService=d,this.sanitizer=u,this.API_URI=A.N.API_URI,this.editores=[],this.evaluadores=[],this.displayVerContenido=!1,this.displayEditarSeguimiento=!1,this.displayVerEvaluaciones=!1,this.displayAcciones=!1,this.displayEvaluador=!1,this.pasosSolicitud=[],this.evaluaciones=[],this.correccionesFile=null,this.formatoFile=null,this.archivoSeleccionadoCorreciones="",this.archivoSeleccionadoFormato="",this.fileURL=null,this.originalidadURL=null,this.estados=[],this.responsables=[],this.revisionEvaluador1Seguimientos=[],this.revisionEvaluador2Seguimientos=[],this.selectedSeguimiento={},this.selectedResultado="",this.descripcionEvaluacion="",this.selectedResultadoEvaluacion="",this.selectedSeguimientoId=null,this.camposDeshabilitados=!0,this.solicitudes=[],this.solicitud=[],this.pasos=[],this.seguimientos=[],this.allSeguimientos=[],this.usuarios=[],this.seguimientoForm=this.formBuilder.group({fecha_asignacion:[""],fecha_programacion:[""],fecha_evaluacion:[""],correciones:[""],solicitudId:[""],pasos_seguimiento:[""],estado_seguimiento:[""],responsableId:[""]})}ngOnInit(){this.loadSeguimientos(),this.obtenerSolicitudes(),this.obtenerEditores(),this.obtenerPasos(),this.obtenerUsuarios(),this.obtenerEstados(),this.loadAllSeguimientos()}obtenerSolicitudes(){this.solicitudesService.obtenerSolicitudes().subscribe(o=>{this.solicitudes=o},o=>{console.error("Error al obtener las solicitudes",o)})}loadAllSeguimientos(){this.solicitudesService.obtenerSeguimientos().subscribe(o=>{o?this.allSeguimientos=o:console.error("Error al obtener los seguimientos")})}loadSeguimientos(){const o=this.authService.getUserId();void 0!==o?this.solicitudesService.getSeguimientosPorEditor(o).subscribe(t=>{t?(this.seguimientos=t.filter(i=>i.responsableId===o&&4===i.pasos_seguimiento),this.seguimientos=this.obtenerSeguimientosUnicos(this.seguimientos)):console.error("El seguimiento no est\xe1 en el formato esperado.")},t=>{console.error("Error al cargar los seguimientos:",t)}):console.error("El ID del editor es indefinido.")}obtenerSeguimientosUnicos(o){const t=[];return o.forEach(i=>{const s=t.findIndex(a=>a.solicitudId===i.solicitudId);-1===s?t.push(i):i.pasos_seguimiento>t[s].pasos_seguimiento&&(t[s]=i)}),t}obtenerEditores(){this.userService.obtenerEditores().subscribe(o=>{this.editores=o,this.evaluadores=o},o=>{console.error("Error al obtener los editores",o)})}obtenerUsuarios(){this.userService.ObtenerUsuarios().subscribe(o=>{o&&Array.isArray(o)?this.usuarios=o:console.error("Respuesta inv\xe1lida del backend:",o)},o=>{console.error("Error al obtener la lista de usuarios",o)})}obtenerEstados(){this.solicitudesService.obtenerEstados().subscribe(o=>{this.estados=o},o=>{console.error("Error al obtener los estados",o)})}getEstadoNombre(o){const t=this.estados.find(i=>i.id===o);return t?t.nombre:"Estado desconocida"}getSolicitudNombre(o){const t=this.solicitudes.find(i=>i.id===o);return t?t.titulo_articulo:"Solicitud desconocida"}getUsuarioNombre(o){const t=this.usuarios.find(i=>i.user===o);return t?`${t.nombres} ${t.apellidos}`:"Evaluador desconocido"}obtenerPasos(){this.solicitudesService.obtenerPasos().subscribe(o=>{this.pasos=o},o=>{console.error("Error al obtener los pasos de solicitud",o)})}getPasoNombre(o){const t=this.pasos.find(i=>i.id===o);return t?`${t.nombre}`:"paso desconocido"}mostrarDialogVerContenido(o){var t=this;return(0,ye.Z)(function*(){t.selectedSeguimiento=o;try{const s=(yield t.solicitudesService.getSolicitud(o.solicitudId).toPromise()).solicitud;t.selectedContenido=yield t.solicitudesService.getContenido(s.contenidoSolicitud).toPromise(),t.previsualizarArchivo(t.selectedContenido.id,"archivo_adjunto"),t.previsualizarArchivo(t.selectedContenido.id,"originalidad"),t.displayVerContenido=!0,t.cdRef.detectChanges()}catch(i){console.error("Error fetching data:",i),t.selectedContenido=null,t.displayVerContenido=!0,t.cdRef.detectChanges()}})()}DescargarContenido(){this.selectedContenido&&this.selectedContenido.id&&window.open(`http://127.0.0.1:8000/solicitud/contenido/contenido/${this.selectedContenido.id}/descargar/`,"_blank")}buscarSeguimientoPorSolicitudYTipoPaso(o,t){return this.allSeguimientos.find(s=>{const a=s.pasos_seguimiento,d=this.pasos.find(u=>u.id===a);return s.solicitudId===o&&(null==d?void 0:d.nombre)===t})}ocultarDialogVerContenido(){this.displayVerContenido=!1}mostrarDialogAcciones(o){this.seguimientoaccion=o,this.displayAcciones=!0}ocultarDialogoAcciones(){this.displayAcciones=!1}mostrarDialogoEvaluador1(){const i=this.buscarSeguimientoPorSolicitudYTipoPaso(this.seguimientoaccion.solicitudId,"Revisi\xf3n de evaluador #1");i?this.mostrarDialogEvaluador(i):console.error('No se encontr\xf3 el seguimiento correspondiente al paso "Revisi\xf3n de evaluadores #1".')}ocultarDialogoEvaluador(){this.displayEvaluador=!1}mostrarDialogoEvaluador2(){const i=this.buscarSeguimientoPorSolicitudYTipoPaso(this.seguimientoaccion.solicitudId,"Revisi\xf3n de evaluador #2");i?this.mostrarDialogEvaluador(i):console.error('No se encontr\xf3 el seguimiento correspondiente al paso "Revisi\xf3n de evaluadores #2".')}mostrarDialogEditarSeguimiento(o){this.seguimientoSeleccionado=this.seguimientoaccion,this.displayEditarSeguimiento=!0;const t=(new Date).toISOString().split("T")[0];this.seguimientoForm.patchValue({fecha_asignacion:this.seguimientoSeleccionado.fecha_asignacion,fecha_programacion:this.seguimientoSeleccionado.fecha_programacion,fecha_evaluacion:t,correciones:this.seguimientoSeleccionado.correciones,solicitudId:this.seguimientoSeleccionado.solicitudId,pasos_seguimiento:this.seguimientoSeleccionado.pasos_seguimiento,estado_seguimiento:this.seguimientoSeleccionado.estado_seguimiento,responsableId:this.seguimientoSeleccionado.responsableId})}mostrarDialogEvaluador(o){this.seguimientoSeleccionado=o,this.displayEvaluador=!0;const t=(new Date).toISOString().split("T")[0],i=this.obtenerDiasProgramacion(this.seguimientoSeleccionado.pasos_seguimiento),s=new Date;s.setDate(s.getDate()+i);const a=s.toISOString().split("T")[0];this.seguimientoForm.patchValue({fecha_asignacion:t,fecha_programacion:a,correciones:this.seguimientoSeleccionado.correciones,solicitudId:this.seguimientoSeleccionado.solicitudId,pasos_seguimiento:this.seguimientoSeleccionado.pasos_seguimiento,estado_seguimiento:this.seguimientoSeleccionado.estado_seguimiento,responsableId:this.seguimientoSeleccionado.responsableId})}obtenerDiasProgramacion(o){const t=this.pasos.find(i=>i.id===o);return t&&t.dias_programacion?parseInt(t.dias_programacion,10):0}ocultarDialogEditarSeguimiento(){this.displayEditarSeguimiento=!1}onCorreccionesFileSelected(o){this.correccionesFile=o.target.files[0],this.archivoSeleccionadoCorreciones=o.target.files[0].name}onFormatoFileSelected(o){this.formatoFile=o.target.files[0],this.archivoSeleccionadoFormato=o.target.files[0].name}editarSeguimiento(){if(this.seguimientoForm.valid){const o=Object.assign(Object.assign({},this.seguimientoSeleccionado),this.seguimientoForm.value),t=new FormData;this.correccionesFile&&t.append("correciones",this.correccionesFile),this.formatoFile&&t.append("formato_evaluacion",this.formatoFile),(new Date).toISOString().split("T"),t.append("id",o.id.toString()),t.append("fecha_asignacion",o.fecha_asignacion),t.append("fecha_programacion",o.fecha_programacion),t.append("fecha_evaluacion",o.fecha_evaluacion),t.append("solicitudId",o.solicitudId.toString()),t.append("pasos_seguimiento",o.pasos_seguimiento.toString()),t.append("estado_seguimiento",o.estado_seguimiento.toString()),t.append("responsableId",o.responsableId.toString()),t.append("status","true"),this.solicitudesService.actualizarSeguimientoConArchivo(t).subscribe(a=>{this.displayEditarSeguimiento=!1,this.displayEvaluador=!1,this.messageService.add({severity:"success",summary:"\xc9xito",detail:"Seguimiento actualizado correctamente"}),this.loadSeguimientos()},a=>{console.error("Error al actualizar el seguimiento:",a),this.messageService.add({severity:"error",summary:"Error",detail:"Ocurri\xf3 un error al actualizar el seguimiento"})})}else this.messageService.add({severity:"error",summary:"Error",detail:"Por favor completa los campos requeridos correctamente"})}editarSeguimientoevaluador(){if(this.seguimientoForm.valid){const o=Object.assign(Object.assign({},this.seguimientoSeleccionado),this.seguimientoForm.value),t=new FormData;this.correccionesFile&&t.append("correciones",this.correccionesFile),this.formatoFile&&t.append("formato_evaluacion",this.formatoFile),(new Date).toISOString().split("T"),t.append("id",o.id.toString()),t.append("fecha_asignacion",o.fecha_asignacion),t.append("fecha_programacion",o.fecha_programacion),t.append("fecha_evaluacion",""),t.append("solicitudId",o.solicitudId.toString()),t.append("pasos_seguimiento",o.pasos_seguimiento.toString()),t.append("estado_seguimiento",o.estado_seguimiento.toString()),t.append("responsableId",o.responsableId.toString()),t.append("status","true"),this.solicitudesService.actualizarSeguimientoConArchivo(t).subscribe(a=>{this.displayEditarSeguimiento=!1,this.displayEvaluador=!1,this.messageService.add({severity:"success",summary:"\xc9xito",detail:"Seguimiento actualizado correctamente"}),this.loadSeguimientos()},a=>{console.error("Error al actualizar el seguimiento:",a),this.messageService.add({severity:"error",summary:"Error",detail:"Ocurri\xf3 un error al actualizar el seguimiento"})})}else this.messageService.add({severity:"error",summary:"Error",detail:"Por favor completa los campos requeridos correctamente"})}formatDate(o){return`${o.getFullYear()}-${("0"+(o.getMonth()+1)).slice(-2)}-${("0"+o.getDate()).slice(-2)}`}mostrarDialogVerEvaluaciones(o){this.cargarResultados(o),this.displayVerEvaluaciones=!0,this.selectedSeguimiento=o}ocultarDialogVerEvaluaciones(){this.displayVerEvaluaciones=!1}cargarResultados(o){this.solicitudesService.getSeguimientosBySolicitud(o.solicitudId).subscribe(t=>{this.revisionEvaluador1Seguimientos=t.filter(i=>i.solicitudId===o.solicitudId&&5===i.pasos_seguimiento),this.revisionEvaluador2Seguimientos=t.filter(i=>i.solicitudId===o.solicitudId&&6===i.pasos_seguimiento)})}descargarCorrecciones(o){window.open(`${this.API_URI}/solicitud/seguimiento/seguimientos/${o}/descargar/correciones/`,"_blank")}descargarFormato(o){window.open(`${this.API_URI}/solicitud/seguimiento/seguimientos/${o}/descargar/formato_evaluacion/`,"_blank")}esPendiente(o){const t=this.estados.find(i=>i.id===o);return!!t&&"pendiente"===t.nombre.toLowerCase()}getAutoresNombres(o){const t=this.solicitudes.find(i=>i.id===o);if(t){const i=t.autores;if(i&&i.length>0){const s=new Set;for(const a of i){const d=this.usuarios.find(u=>u.user===a);d&&s.add(`${d.nombres} ${d.apellidos}`)}return Array.from(s).join(", ")}}return"Autores desconocidos"}descargarArchivo(o,t){this.solicitudesService.descargarArchivo(o,t).subscribe(i=>{const s=window.URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download=`${t}_${o}`,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(s),document.body.removeChild(a)},i=>{console.error("Error al descargar el archivo:",i)})}previsualizarArchivo(o,t){this.solicitudesService.descargarArchivo(o,t).subscribe(i=>{const s=new FileReader;s.onload=()=>{const a=this.sanitizer.bypassSecurityTrustResourceUrl(s.result);"archivo_adjunto"===t?this.fileURL=a:"originalidad"===t&&(this.originalidadURL=a)},s.readAsDataURL(i)},i=>{console.error("Error al descargar el archivo:",i)})}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(b.M),e.Y36(w.e),e.Y36(v.K),e.Y36(e.sBO),e.Y36(c.qu),e.Y36(m.ez),e.Y36(Ie.H7))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-solicitudes-asignadas"]],decls:95,vars:53,consts:[[1,"solicitudes-container"],[1,"solicitudes-title"],[4,"ngIf","ngIfElse"],["noSeguimientos",""],[3,"header","visible","modal","style","showHeader","closable","dismissableMask","visibleChange",4,"ngIf"],["header","acciones Seguimiento",3,"visible","modal","styleClass","showHeader","closable","dismissableMask"],[2,"text-align","center"],[1,"button-container-acciones"],["pButton","","type","button","icon","pi pi-star","label","Realizar correcciones",1,"custom-button-acciones",3,"click"],["pButton","","type","button","icon","pi pi-user-plus","label","Asignar evaluador #1",1,"custom-button-acciones",3,"click"],["pButton","","type","button","icon","pi pi-user-plus","label","Asignar evaluador #2",1,"custom-button-acciones",3,"click"],["pButton","","type","button","label","Cerrar",1,"p-button-outlined","p-button-secondary",2,"display","block","width","100%","margin","0 auto",3,"click"],["header","Editar Seguimiento",3,"visible","modal","styleClass","showHeader","closable","dismissableMask"],[3,"formGroup","ngSubmit"],[1,"p-grid","p-fluid"],[2,"justify-content","center","text-align","center"],["for","solicitudId"],["for","pasos_seguimiento"],[1,"p-col-12"],["for","estado_seguimiento"],["id","estado_seguimiento","optionLabel","nombre","optionValue","id","formControlName","estado_seguimiento",3,"options"],["for","correciones"],[1,"archivo-area"],["for","correciones",1,"custom-file-upload"],[1,"pi","pi-upload"],[2,"margin-left","5px"],["pButton","","type","file","id","correciones","required","",2,"display","none",3,"change"],[4,"ngIf"],["for","formato_evaluacion"],["for","formato_evaluacion",1,"custom-file-upload"],["pButton","","type","file","id","formato_evaluacion","required","",2,"display","none",3,"change"],["type","submit","pButton","","label","Guardar Cambios",1,"p-button-primary","p-button-success","p-button-outlined",2,"width","100%"],["pButton","","label","Cancelar",1,"p-button-outlined","p-button-secondary",2,"width","100%",3,"click"],["header","Editar evaluadores",3,"visible","modal","styleClass","showHeader","closable","dismissableMask"],["for","responsableId"],["id","responsableId","placeholder","seleccionar...","optionLabel","nombres","optionValue","user","formControlName","responsableId",3,"filter","options"],["pTemplate","item"],["type","submit","pButton","","label","Guardar Cambios",1,"p-button-primary","p-button-outlined",2,"width","100%"],["header","Evaluaciones de la solicitud",3,"visible","responsive","showHeader","closable","dismissableMask","modal","visibleChange"],[4,"ngFor","ngForOf"],[2,"bottom","10px","right","20px"],["pButton","","type","button","label","Cerrar",1,"p-button-secondary","p-button-outlined","p-button-rounded",2,"width","100%",3,"click"],["class","seguimiento-item",4,"ngFor","ngForOf"],[1,"seguimiento-item"],[1,"shadow-2","border-round-x1",2,"background","linear-gradient(15deg, #F91616, #F97316)","border-left","10px solid transparent"],[1,"p-4","border-round","surface-card","h-full"],[1,"flex","mb-3"],["image","assets/logo_r.jpg","shape","circle",1,"p-element"],[1,"p-avatar","p-component","p-avatar-image","p-avatar-circle"],["src","assets/logo_r.jpg",1,"ng-star-inserted"],[1,"ml-2"],[1,"font-medium","text-900","mb-1"],[1,"text-sm","flex","align-items-center","text-700"],[1,"border-circle","surface-300","mx-2",2,"width","0.25rem","height","0.25rem"],[1,"text-xl","text-900","font-medium","mb-3","line-height-3"],[1,"line-height-3","text-700"],[1,"button-container"],["pButton","","type","button","icon","pi pi-eye","label","Ver contenido",1,"custom-button",3,"click"],["pButton","","type","button","icon","pi pi-star","label","Acciones",1,"custom-button",3,"click"],["pButton","","type","button","icon","pi pi-book","label","Evaluaciones",1,"custom-button",3,"click"],[1,"no-solicitudes-message"],[3,"header","visible","modal","showHeader","closable","dismissableMask","visibleChange"],[1,"solicitud-content"],[1,"solicitud-header"],["src","assets/logo_r.jpg",1,"solicitud-logo"],[1,"solicitud-title-container"],[1,"solicitud-title"],["header","Articulo"],["width","100%","height","400px","type","application/pdf",3,"src",4,"ngIf"],["header","Declaraci\xf3n de Originalidad"],[2,"display","flex","justify-content","space-around"],["pButton","","type","button","label","Descargar Archivo Adjunto","icon","pi pi-download",1,"p-button-warning","font-bold",3,"click"],["pButton","","type","button","label","Descargar Declaraci\xf3n de Originalidad","icon","pi pi-download",1,"p-button-warning","font-bold",3,"click"],[2,"display","flex","justify-content","center","align-items","center"],["pButton","","type","button","label","Cerrar","icon","pi pi-times",1,"p-button-outlined","p-button-warning","font-bold",3,"click"],["width","100%","height","400px","type","application/pdf",3,"src"],["pButton","","type","button","icon","pi pi-download","label","Descargar",1,"p-button-success","p-button-outlined",3,"click"]],template:function(o,t){if(1&o&&(e._UZ(0,"br"),e._UZ(1,"br"),e.TgZ(2,"div",0),e.TgZ(3,"h2",1),e._uU(4,"SOLICITUDES ASIGNADAS"),e.qZA(),e.YNc(5,ke,2,1,"div",2),e.qZA(),e.YNc(6,Ne,6,0,"ng-template",null,3,e.W1O),e.YNc(8,Qe,11,12,"p-dialog",4),e.TgZ(9,"p-dialog",5),e.TgZ(10,"h3",6),e._uU(11,"Acciones"),e.qZA(),e._UZ(12,"hr"),e.TgZ(13,"div",7),e.TgZ(14,"button",8),e.NdJ("click",function(){return t.mostrarDialogEditarSeguimiento(t.seguimientoSeleccionado)}),e.qZA(),e.TgZ(15,"button",9),e.NdJ("click",function(){return t.mostrarDialogoEvaluador1()}),e.qZA(),e.TgZ(16,"button",10),e.NdJ("click",function(){return t.mostrarDialogoEvaluador2()}),e.qZA(),e.qZA(),e.TgZ(17,"button",11),e.NdJ("click",function(){return t.ocultarDialogoAcciones()}),e.qZA(),e.qZA(),e.TgZ(18,"p-dialog",12),e.TgZ(19,"form",13),e.NdJ("ngSubmit",function(){return t.editarSeguimiento()}),e.TgZ(20,"div",14),e.TgZ(21,"div",15),e.TgZ(22,"h2",16),e._uU(23),e.qZA(),e.TgZ(24,"h4",17),e._uU(25),e.qZA(),e.TgZ(26,"h4",16),e._uU(27),e.qZA(),e.qZA(),e.TgZ(28,"div",18),e.TgZ(29,"label",19),e._uU(30,"Estado de seguimiento"),e.qZA(),e._UZ(31,"p-dropdown",20),e.qZA(),e._UZ(32,"br"),e.TgZ(33,"div"),e.TgZ(34,"label",21),e._uU(35,"Correciones"),e.qZA(),e._UZ(36,"br"),e.TgZ(37,"div",22),e.TgZ(38,"div"),e.TgZ(39,"label",23),e._UZ(40,"i",24),e.TgZ(41,"span",25),e._uU(42,"Seleccionar archivo"),e.qZA(),e.TgZ(43,"input",26),e.NdJ("change",function(s){return t.onCorreccionesFileSelected(s)}),e.qZA(),e.qZA(),e.qZA(),e._UZ(44,"br"),e.YNc(45,Re,4,1,"div",27),e.qZA(),e.qZA(),e._UZ(46,"br"),e.TgZ(47,"div"),e.TgZ(48,"label",28),e._uU(49,"Formato de evaluaci\xf3n"),e.qZA(),e._UZ(50,"br"),e.TgZ(51,"div",22),e.TgZ(52,"div"),e.TgZ(53,"label",29),e._UZ(54,"i",24),e.TgZ(55,"span",25),e._uU(56,"Seleccionar archivo"),e.qZA(),e.TgZ(57,"input",30),e.NdJ("change",function(s){return t.onFormatoFileSelected(s)}),e.qZA(),e.qZA(),e.qZA(),e._UZ(58,"br"),e.YNc(59,Be,4,1,"div",27),e.qZA(),e.qZA(),e.qZA(),e._UZ(60,"br"),e._UZ(61,"hr"),e._UZ(62,"button",31),e.qZA(),e.TgZ(63,"button",32),e.NdJ("click",function(){return t.ocultarDialogEditarSeguimiento()}),e.qZA(),e.qZA(),e.TgZ(64,"p-dialog",33),e.TgZ(65,"form",13),e.NdJ("ngSubmit",function(){return t.editarSeguimientoevaluador()}),e.TgZ(66,"div",14),e.TgZ(67,"div",15),e.TgZ(68,"h2",16),e._uU(69),e.qZA(),e.TgZ(70,"h4",17),e._uU(71),e.qZA(),e.qZA(),e.TgZ(72,"div",18),e.TgZ(73,"label",34),e._uU(74,"Seleccionar evaluador"),e.qZA(),e.TgZ(75,"p-dropdown",35),e.YNc(76,Ve,1,2,"ng-template",36),e.qZA(),e.qZA(),e.qZA(),e._UZ(77,"br"),e._UZ(78,"hr"),e._UZ(79,"button",37),e.qZA(),e._UZ(80,"br"),e.TgZ(81,"button",32),e.NdJ("click",function(){return t.ocultarDialogoEvaluador()}),e.qZA(),e.qZA(),e.TgZ(82,"p-dialog",38),e.NdJ("visibleChange",function(s){return t.displayVerEvaluaciones=s}),e.ynx(83),e.TgZ(84,"h3"),e._uU(85,"Resultados de evaluador #1"),e.qZA(),e.YNc(86,ze,7,2,"div",39),e._UZ(87,"br"),e.TgZ(88,"h3"),e._uU(89,"Resultados de evaluador #2"),e.qZA(),e.YNc(90,He,7,2,"div",39),e.BQk(),e._UZ(91,"br"),e._UZ(92,"br"),e.TgZ(93,"div",40),e.TgZ(94,"button",41),e.NdJ("click",function(){return t.ocultarDialogVerEvaluaciones()}),e.qZA(),e.qZA(),e.qZA()),2&o){const i=e.MAs(7);e.xp6(5),e.Q6J("ngIf",t.seguimientos.length>0)("ngIfElse",i),e.xp6(3),e.Q6J("ngIf",t.selectedSeguimiento&&t.selectedContenido),e.xp6(1),e.Akn(e.DdM(49,Ge)),e.Q6J("visible",t.displayAcciones)("modal",!0)("styleClass","custom-dialog")("showHeader",!1)("closable",!1)("dismissableMask",!1),e.xp6(9),e.Akn(e.DdM(50,Ke)),e.Q6J("visible",t.displayEditarSeguimiento)("modal",!0)("styleClass","custom-dialog")("showHeader",!1)("closable",!1)("dismissableMask",!1),e.xp6(1),e.Q6J("formGroup",t.seguimientoForm),e.xp6(4),e.hij(" ",t.getSolicitudNombre(null==t.seguimientoSeleccionado?null:t.seguimientoSeleccionado.solicitudId),""),e.xp6(2),e.Oqu(t.getPasoNombre(null==t.seguimientoSeleccionado?null:t.seguimientoSeleccionado.pasos_seguimiento)),e.xp6(2),e.hij(" ",null==t.seguimientoSeleccionado?null:t.seguimientoSeleccionado.fecha_programacion,""),e.xp6(4),e.Q6J("options",t.estados),e.xp6(14),e.Q6J("ngIf",t.archivoSeleccionadoCorreciones),e.xp6(14),e.Q6J("ngIf",t.archivoSeleccionadoFormato),e.xp6(5),e.Akn(e.DdM(51,We)),e.Q6J("visible",t.displayEvaluador)("modal",!0)("styleClass","custom-dialog")("showHeader",!1)("closable",!1)("dismissableMask",!1),e.xp6(1),e.Q6J("formGroup",t.seguimientoForm),e.xp6(4),e.hij(" ",t.getSolicitudNombre(null==t.seguimientoSeleccionado?null:t.seguimientoSeleccionado.solicitudId),""),e.xp6(2),e.Oqu(t.getPasoNombre(null==t.seguimientoSeleccionado?null:t.seguimientoSeleccionado.pasos_seguimiento)),e.xp6(4),e.Q6J("filter",!0)("options",t.usuarios),e.xp6(7),e.Akn(e.DdM(52,Xe)),e.Q6J("visible",t.displayVerEvaluaciones)("responsive",!0)("showHeader",!1)("closable",!1)("dismissableMask",!1)("modal",!0),e.xp6(4),e.Q6J("ngForOf",t.revisionEvaluador1Seguimientos),e.xp6(4),e.Q6J("ngForOf",t.revisionEvaluador2Seguimientos)}},directives:[_.O5,_.sg,E.q,h.Hq,Z.V,O.UQ,O.US,c._Y,c.JL,c.sg,x.Lt,c.JJ,c.u,m.jx],styles:[".solicitudes-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;margin-bottom:20px;text-align:center;color:#fa6357;text-transform:uppercase;letter-spacing:2px}.solicitudes-container[_ngcontent-%COMP%]{display:grid;grid-gap:20px;gap:20px;margin:20px}.seguimiento-item[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 4px 10px #0003}.p-avatar-circle[_ngcontent-%COMP%]{width:50px;height:50px;overflow:hidden;border-radius:50%;border:2px solid white;box-shadow:0 2px 4px #0000001a}.button-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:10px;margin:10px}.button-container-acciones[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:10px}.custom-button[_ngcontent-%COMP%]{width:max-content;border:1px solid #F91616;background-color:transparent;color:#f91616;padding:.75rem 1rem;border-radius:.5rem;font-size:1rem;cursor:pointer;transition:background-color .3s ease,color .3s ease,transform .3s ease;margin-right:30px;white-space:nowrap}.custom-button-acciones[_ngcontent-%COMP%]{background-color:#fff;color:#f91616;border:1px solid #f91616;border-radius:5px;padding:10px 20px;cursor:pointer;margin-bottom:10px}.custom-button-acciones[_ngcontent-%COMP%]:hover{background-color:#f91616;border-color:#f91616;color:#fff}.custom-button[_ngcontent-%COMP%]:last-child{margin-right:0}.custom-button[_ngcontent-%COMP%]:hover{border-color:#f91616;background:linear-gradient(15deg,#F91616,#F97316);color:#fff;transform:scale(1.05)}.solicitudes-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;margin-bottom:20px;color:#fa6357;text-transform:uppercase;text-align:center;letter-spacing:2px}.seguimiento-list[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px}.seguimiento-list[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:28px;margin-bottom:20px;color:#333}.seguimiento-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.fecha[_ngcontent-%COMP%]{font-size:14px;color:#666}@media screen and (max-width: 600px){.seguimiento-list[_ngcontent-%COMP%]{padding:10px}.seguimiento-item[_ngcontent-%COMP%]{padding:15px;margin-bottom:15px}}.p-dialog-content[_ngcontent-%COMP%]{padding:20px;font-size:16px}.dialog-section-title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:15px;color:#007bff}.p-dialog[_ngcontent-%COMP%]   .p-toast[_ngcontent-%COMP%]{margin-bottom:20px}.dialog-content[_ngcontent-%COMP%]   .p-fluid[_ngcontent-%COMP%]{padding:10px;border:1px solid #ddd;border-radius:4px;background-color:#f9f9f9}.dialog-content[_ngcontent-%COMP%]   .p-field[_ngcontent-%COMP%]{margin-bottom:15px}.dialog-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{font-weight:700}.dialog-content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .dialog-content[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:4px;background-color:#fff}.evaluacion-text[_ngcontent-%COMP%]{margin-left:10px;font-weight:700;color:#007bff}.alert-message[_ngcontent-%COMP%]{background-color:#ffe4b5;border:1px solid #ffc966;padding:10px;margin-bottom:20px;border-radius:5px;font-size:14px;color:#666}.select-container[_ngcontent-%COMP%]{margin-top:20px}.custom-select[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:5px;background-color:#f9f9f9;font-size:16px;color:#333;outline:none;transition:border-color .3s ease-in-out}.custom-select[_ngcontent-%COMP%]:hover{border-color:#888}.custom-select[_ngcontent-%COMP%]:focus{border-color:#fa6357}.evaluacion-title[_ngcontent-%COMP%]{font-size:18px;color:#333;margin-bottom:5px}.seguimiento-item[_ngcontent-%COMP%]{background-color:#f9f9f9;border-radius:8px;box-shadow:0 2px 4px #0000001a;flex-direction:column;transition:transform .3s ease,box-shadow .3s ease}.seguimiento-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}.fecha[_ngcontent-%COMP%]{font-size:14px;color:#666;margin-bottom:0}.solicitud-info[_ngcontent-%COMP%]{margin-bottom:10px}.solicitud-title[_ngcontent-%COMP%]{font-weight:700;color:#444;margin-bottom:5px}.descripcion[_ngcontent-%COMP%]{font-size:16px;color:#444;margin-bottom:10px}.estado-info[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center}.estado[_ngcontent-%COMP%]{font-size:18px;color:#007bff;font-weight:700}.evaluaciones-container[_ngcontent-%COMP%]{padding:10px}.evaluacion-item[_ngcontent-%COMP%]{border:1px solid #ccc;padding:10px;margin-bottom:10px;background-color:#f5f5f5;border-radius:5px}.evaluador-info[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:5px}.evaluador-name[_ngcontent-%COMP%]{font-weight:700;margin-right:10px}.evaluacion-result[_ngcontent-%COMP%]{color:#333}.no-data[_ngcontent-%COMP%]{color:#777;text-align:center;margin:20px 0}.custom-file-upload[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:6px 12px;cursor:pointer;background-color:#fa6357;color:#fff;border:none;border-radius:4px;transition:background-color .3s ease-in-out;text-align:center}.custom-file-upload[_ngcontent-%COMP%]:hover{background-color:#f83527}.archivo-area[_ngcontent-%COMP%]{margin-top:10px;padding:10px;background-color:#f0f0f0;border:1px dashed #999;border-radius:4px;align-items:center;justify-content:space-between}.archivo-area[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;margin-right:10px}.custom-file-upload[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.solicitud-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:15px}.solicitud-logo[_ngcontent-%COMP%]{width:40px;height:auto;margin-right:10px}.solicitud-title-container[_ngcontent-%COMP%]{flex-grow:1}.solicitud-title[_ngcontent-%COMP%]{font-size:24px;margin:0;color:#333}.corner-element[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px}.no-solicitudes-message[_ngcontent-%COMP%]{text-align:center;color:#777;background-color:wheat;border:2px;border-color:#666;padding:10px}"]}),n})()}];let oo=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[U.Bz.forChild(eo)],U.Bz]}),n})();var to=l(657),io=l(7307),no=l(5652);let so=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[_.ez,oo,T.U$,C.j,h.hJ,to.kK,S.EV,Z.S,io.n,c.UX,E.F,O.fx,c.u5,x.kW,no._8,q.z,P.d]]}),n})()}}]);