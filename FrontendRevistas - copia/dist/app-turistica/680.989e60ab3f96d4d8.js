"use strict";(self.webpackChunkAppTuristica=self.webpackChunkAppTuristica||[]).push([[680],{1680:(ce,U,s)=>{s.r(U),s.d(U,{GenerarModule:()=>ae});var d=s(9808),E=s(1813),x=s(5330),t=s(7587),m=s(3271),C=s(3569),k=s(2313),b=s(845),l=s(3075),A=s(1424),M=s(6697),g=s(9783),Z=s(5315),v=s(3787);function N(i,a){1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2,"T\xedtulo del art\xedculo"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Autores"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Fecha de creaci\xf3n"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Afiliaci\xf3n"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Revista"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Contenido"),t.qZA(),t.qZA())}function F(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t.TgZ(13,"button",16),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(3).mostrarContenido(r)}),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw(3);t.xp6(2),t.Oqu(e.titulo_articulo),t.xp6(2),t.Oqu(o.getAutoresNombres(e.autores)),t.xp6(2),t.Oqu(t.xi3(7,5,e.fecha_creacion,"dd/MM/yyyy")),t.xp6(3),t.Oqu(e.afiliacion),t.xp6(2),t.Oqu(o.getRevistaNombre(e.revista))}}function I(i,a){1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",17),t._uU(2,"No se encontraron solicitudes, por favor genere una nueva solicitud."),t.qZA(),t.qZA())}const j=function(){return[5,10,20,30]};function Y(i,a){if(1&i&&(t.TgZ(0,"p-table",12),t.YNc(1,N,13,0,"ng-template",13),t.YNc(2,F,14,8,"ng-template",14),t.YNc(3,I,3,0,"ng-template",15),t.qZA()),2&i){const e=t.oxw(2);t.Q6J("value",e.filteredSolicitudes)("paginator",!0)("rows",10)("rowsPerPageOptions",t.DdM(4,j))}}function Q(i,a){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,Y,4,5,"p-table",11),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.filteredSolicitudes&&e.filteredSolicitudes.length>0||""===e.searchText)}}function L(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",20),t.TgZ(1,"div",21),t._uU(2),t.qZA(),t.TgZ(3,"div",22),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"div",23),t.TgZ(7,"p"),t.TgZ(8,"strong"),t._uU(9,"Autores:"),t.qZA(),t._uU(10),t.qZA(),t.TgZ(11,"p"),t.TgZ(12,"strong"),t._uU(13,"Afiliaci\xf3n:"),t.qZA(),t._uU(14),t.qZA(),t.TgZ(15,"p"),t.TgZ(16,"strong"),t._uU(17,"Revista:"),t.qZA(),t._uU(18),t.qZA(),t.TgZ(19,"button",16),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).mostrarContenido(r)}),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw(2);t.xp6(2),t.Oqu(e.titulo_articulo),t.xp6(2),t.Oqu(t.xi3(5,5,e.fecha_creacion,"dd/MM/yyyy")),t.xp6(6),t.hij(" ",o.getAutoresNombres(e.autores),""),t.xp6(4),t.hij(" ",e.afiliacion,""),t.xp6(4),t.hij(" ",o.getRevistaNombre(e.revista),"")}}function B(i,a){if(1&i&&(t.TgZ(0,"div",18),t.YNc(1,L,20,8,"div",19),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.filteredSolicitudes)}}function z(i,a){if(1&i&&t._UZ(0,"embed",38),2&i){const e=t.oxw(3);t.Q6J("src",e.fileURL,t.uOi)}}function V(i,a){if(1&i&&t._UZ(0,"embed",38),2&i){const e=t.oxw(3);t.Q6J("src",e.originalidadURL,t.uOi)}}function R(i,a){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"p-accordion"),t.TgZ(2,"p-accordionTab",30),t.YNc(3,z,1,1,"embed",31),t.qZA(),t.TgZ(4,"p-accordionTab",32),t.YNc(5,V,1,1,"embed",31),t.qZA(),t.qZA(),t._UZ(6,"br"),t.TgZ(7,"div",33),t.TgZ(8,"button",34),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return n.descargarArchivo(n.contenidoSeleccionado.id,"archivo_adjunto")}),t.qZA(),t.TgZ(9,"button",35),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return n.descargarArchivo(n.contenidoSeleccionado.id,"originalidad")}),t.qZA(),t.qZA(),t._UZ(10,"br"),t.TgZ(11,"div",36),t.TgZ(12,"button",37),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).ocultarContenido()}),t.qZA(),t.qZA(),t._UZ(13,"br"),t.BQk()}if(2&i){const e=t.oxw(2);t.xp6(3),t.Q6J("ngIf",e.fileURL),t.xp6(2),t.Q6J("ngIf",e.originalidadURL)}}const H=function(){return{width:"80%",top:"30px"}};function $(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"p-dialog",24),t.NdJ("visibleChange",function(n){return t.CHM(e),t.oxw().DisplayContenido=n}),t.TgZ(1,"div",25),t.TgZ(2,"div",26),t._UZ(3,"img",27),t.TgZ(4,"div",28),t.TgZ(5,"h3",29),t._uU(6),t.qZA(),t.TgZ(7,"p",29),t._uU(8),t.qZA(),t.qZA(),t.qZA(),t._UZ(9,"hr"),t.YNc(10,R,14,2,"ng-container",8),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.Akn(t.DdM(11,H)),t.s9C("header",e.solicitudSeleccionada.titulo_articulo),t.Q6J("visible",e.DisplayContenido)("modal",!0)("showHeader",!1)("closable",!0)("dismissableMask",!0),t.xp6(6),t.Oqu(e.solicitudSeleccionada.titulo_articulo),t.xp6(2),t.Oqu(e.getAutoresNombres(e.solicitudSeleccionada.autores)),t.xp6(2),t.Q6J("ngIf",e.contenidoSeleccionado)}}let G=(()=>{class i{constructor(e,o,n,r){this.dialogService=e,this.solicitudesService=o,this.userService=n,this.sanitizer=r,this.DisplayContenido=!1,this.solicitudSeleccionada=void 0,this.contenidoSeleccionado=null,this.usuarios=[],this.revistas=[],this.solicitudes=[],this.searchText="",this.filteredSolicitudes=[],this.fileURL=null,this.originalidadURL=null,this.currentView="table"}ngOnInit(){this.cargarSolicitudes(),this.obtenerRevistas(),this.cargarAutores()}toggleView(e){this.currentView=e}obtenerRevistas(){this.solicitudesService.obtenerRevistas().subscribe(e=>{this.revistas=e},e=>{console.error("Error al obtener las revistas:",e)})}getRevistaNombre(e){const o=this.revistas.find(n=>n.id===e);return o?`${o.nombre}`:""}cargarAutores(){this.userService.ObtenerUsuarios().subscribe(e=>{this.usuarios=e},e=>{console.error(e)})}getAutoresNombres(e){if(e&&e.length>0){const o=new Set;for(const n of e){const r=this.usuarios.find(c=>c.user===n);r&&o.add(`${r.nombres} ${r.apellidos}`)}return Array.from(o).join(", ")}return"Autores desconocidos"}cargarSolicitudes(){this.solicitudesService.obtenerSolicitudes().subscribe(e=>{this.solicitudes=e,this.buscarSolicitudes()},e=>{console.error(e)})}buscarSolicitudes(){this.filteredSolicitudes=""===this.searchText.trim()?this.solicitudes:this.solicitudes.filter(e=>{const o=e.titulo_articulo.toLowerCase().includes(this.searchText.toLowerCase()),n=e.afiliacion.toLowerCase().includes(this.searchText.toLowerCase()),r=this.getAutoresNombres(e.autores).toLowerCase().includes(this.searchText.toLowerCase());return o||n||r})}mostrarContenido(e){this.solicitudSeleccionada=e,this.DisplayContenido=!0,e.contenidoSolicitud>0?this.solicitudesService.obtenerContenidoPorId(e.contenidoSolicitud).subscribe(o=>{o?(this.contenidoSeleccionado=o,this.previsualizarArchivo(o.id,"archivo_adjunto"),this.previsualizarArchivo(o.id,"originalidad")):console.error("El contenido no est\xe1 en el formato esperado.")},o=>{console.error(o)}):console.error("El ID de contenido es nulo.")}previsualizarArchivo(e,o){this.solicitudesService.descargarArchivo(e,o).subscribe(n=>{const r=new FileReader;r.onload=()=>{const c=this.sanitizer.bypassSecurityTrustResourceUrl(r.result);"archivo_adjunto"===o?this.fileURL=c:"originalidad"===o&&(this.originalidadURL=c)},r.readAsDataURL(n)},n=>{console.error("Error al descargar el archivo:",n)})}ocultarContenido(){this.DisplayContenido=!1,this.contenidoSeleccionado=null,this.fileURL=null,this.originalidadURL=null}descargarArchivo(e,o){this.solicitudesService.descargarArchivo(e,o).subscribe(n=>{const r=window.URL.createObjectURL(n),c=document.createElement("a");c.href=r,c.download=`${o}_${e}`,document.body.appendChild(c),c.click(),window.URL.revokeObjectURL(r),document.body.removeChild(c)},n=>{console.error("Error al descargar el archivo:",n)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(x.xA),t.Y36(m.M),t.Y36(C.K),t.Y36(k.H7))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-ver"]],features:[t._Bn([x.xA])],decls:15,vars:4,consts:[[1,"solicitudes-title"],[1,"view-toggle-buttons"],["pButton","","type","button","icon","pi pi-bars",3,"click"],["pButton","","type","button","icon","pi pi-th-large",3,"click"],[1,"search-container","p-inputgroup"],["type","text","pInputText","","placeholder","Buscar solicitudes...",1,"form-control","p-inputtext-lg",3,"ngModel","ngModelChange"],[1,"p-inputgroup-addon"],["pButton","","type","button","icon","pi pi-search",1,"p-button-rounded","custom-button-color",3,"click"],[4,"ngIf"],["class","cards-container",4,"ngIf"],[3,"header","visible","modal","style","showHeader","closable","dismissableMask","visibleChange",4,"ngIf"],[3,"value","paginator","rows","rowsPerPageOptions",4,"ngIf"],[3,"value","paginator","rows","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pButton","","type","button","label","Ver","icon","pi pi-search",1,"p-button-outlined","p-button-warning","w-100","font-bold",3,"click"],["colspan","4"],[1,"cards-container"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"card-header"],[1,"card-date"],[1,"card-body"],[3,"header","visible","modal","showHeader","closable","dismissableMask","visibleChange"],[1,"solicitud-content"],[1,"solicitud-header"],["src","assets/logo_r.jpg",1,"solicitud-logo"],[1,"solicitud-title-container"],[1,"solicitud-title"],["header","Previsualizaci\xf3n del Archivo Adjunto"],["width","100%","height","400px","type","application/pdf",3,"src",4,"ngIf"],["header","Previsualizaci\xf3n de la Declaraci\xf3n de Originalidad"],[2,"display","flex","justify-content","space-around"],["pButton","","type","button","label","Descargar Archivo Adjunto","icon","pi pi-download",1,"p-button-warning","font-bold",3,"click"],["pButton","","type","button","label","Descargar Declaraci\xf3n de Originalidad","icon","pi pi-download",1,"p-button-warning","font-bold",3,"click"],[2,"display","flex","justify-content","center","align-items","center"],["pButton","","type","button","label","Cerrar","icon","pi pi-times",1,"p-button-outlined","p-button-warning","font-bold",3,"click"],["width","100%","height","400px","type","application/pdf",3,"src"]],template:function(e,o){1&e&&(t._UZ(0,"br"),t._UZ(1,"br"),t._UZ(2,"br"),t.TgZ(3,"h2",0),t._uU(4,"SOLICITUDES - VER"),t.qZA(),t.TgZ(5,"div",1),t.TgZ(6,"button",2),t.NdJ("click",function(){return o.toggleView("table")}),t.qZA(),t.TgZ(7,"button",3),t.NdJ("click",function(){return o.toggleView("cards")}),t.qZA(),t.qZA(),t.TgZ(8,"div",4),t.TgZ(9,"input",5),t.NdJ("ngModelChange",function(r){return o.searchText=r})("ngModelChange",function(){return o.buscarSolicitudes()}),t.qZA(),t.TgZ(10,"span",6),t.TgZ(11,"button",7),t.NdJ("click",function(){return o.buscarSolicitudes()}),t.qZA(),t.qZA(),t.qZA(),t.YNc(12,Q,2,1,"div",8),t.YNc(13,B,2,1,"div",9),t.YNc(14,$,11,12,"p-dialog",10)),2&e&&(t.xp6(9),t.Q6J("ngModel",o.searchText),t.xp6(3),t.Q6J("ngIf","table"===o.currentView),t.xp6(1),t.Q6J("ngIf","cards"===o.currentView),t.xp6(1),t.Q6J("ngIf",o.solicitudSeleccionada))},directives:[b.Hq,l.Fj,A.o,l.JJ,l.On,d.O5,M.iA,g.jx,d.sg,Z.V,v.UQ,v.US],pipes:[d.uU],styles:[".p-inputtext-lg[_ngcontent-%COMP%]{height:3.37rem;border-radius:1.5rem 0 0 1.5rem;border-right:none}.p-inputgroup-addon[_ngcontent-%COMP%]{background-color:#f2f2f2;border-radius:0 1.5rem 1.5rem 0;border:1px solid #ccc;padding:.5rem}.custom-button-color[_ngcontent-%COMP%]{background-color:#fa6357;border-color:#fa6357;color:#fff}.p-button-rounded[_ngcontent-%COMP%]{border-radius:1.5rem;padding:.5rem;line-height:1}.p-button-sm[_ngcontent-%COMP%]{width:24px;height:24px;line-height:1;margin-left:4px}.search-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-bottom:20px}.solicitudes-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;margin-bottom:70px;text-align:center;color:#fa6357;text-transform:uppercase;letter-spacing:2px}.search-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:20px}.p-inputtext-lg[_ngcontent-%COMP%]{font-size:16px;padding:10px;border-radius:5px;border:1px solid #ccc}.p-button-outlined.p-button-secondary[_ngcontent-%COMP%]{background-color:transparent!important;border-color:#3498db!important;color:#3498db!important;border-radius:5px;padding:6px 12px;transition:background-color .3s,color .3s,border-color .3s}.p-button-outlined.p-button-secondary[_ngcontent-%COMP%]:hover{background-color:#3498db!important;color:#fff!important}.p-dialog[_ngcontent-%COMP%]{border-radius:10px;padding:20px;font-size:16px;box-shadow:0 2px 10px #0000001a;background-color:#fff;width:80%;max-width:800px}.solicitud-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:15px}.solicitud-logo[_ngcontent-%COMP%]{width:40px;height:auto;margin-right:10px}.solicitud-title-container[_ngcontent-%COMP%]{flex-grow:1}.solicitud-title[_ngcontent-%COMP%]{font-size:24px;margin:0;color:#333}.corner-element[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px}.ui-accordion[_ngcontent-%COMP%]   .ui-accordion-content[_ngcontent-%COMP%]{max-height:500px;overflow-y:auto}.ui-accordion-header[_ngcontent-%COMP%]{background-color:#f5f5f5;border:1px solid #ddd;padding:12px;cursor:pointer;font-size:16px;transition:background-color .3s}.ui-accordion-header[_ngcontent-%COMP%]:hover{background-color:#e9e9e9}.ui-accordion-content[_ngcontent-%COMP%]{padding:12px;border:1px solid #ddd;border-top:none;background-color:#fafafa}.p-accordion-tab[_ngcontent-%COMP%]{margin-bottom:15px}  .p-accordion .p-accordion-tab{border:1px solid #ddd;border-top:none;margin-bottom:1px}  .p-accordion .p-accordion-header{background-color:#f5f5f5;border:1px solid #ddd;padding:12px;cursor:pointer;font-size:16px;transition:background-color .3s}  .p-accordion .p-accordion-header:hover{background-color:#e9e9e9}  .p-accordion .p-accordion-content{padding:12px;border:1px solid #ddd;border-top:none;background-color:#fafafa}.cards-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;justify-content:center}.card[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:5px;padding:1rem;width:calc(50% - 1rem);box-shadow:0 2px 4px #0000001a;box-sizing:border-box;position:relative}@media (max-width: 768px){.card[_ngcontent-%COMP%]{width:calc(100% - 1rem)}}.card-header[_ngcontent-%COMP%]{font-weight:700;margin-bottom:.5rem}.card-date[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;color:gray;font-size:.875rem}.card-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.card-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-self:flex-end}.view-toggle-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin:20px}.view-toggle-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fa6357;border-color:#fa6357;color:#fff}"]}),i})();var S=s(6526),T=s(1497);function K(i,a){1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2,"T\xedtulo del art\xedculo"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Autores"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Fecha de creaci\xf3n"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Afiliaci\xf3n"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Contenido"),t.qZA(),t.qZA())}function W(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t.TgZ(11,"button",52),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(3).abrirEditarSolicitud(r.id)}),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw(3);t.xp6(2),t.Oqu(e.titulo_articulo),t.xp6(2),t.Oqu(o.getAutoresNombres(e.autores)),t.xp6(2),t.Oqu(t.xi3(7,4,e.fecha_creacion,"dd/MM/yyyy")),t.xp6(3),t.Oqu(e.afiliacion)}}const X=function(){return[5,10,20]};function tt(i,a){if(1&i&&(t.TgZ(0,"p-table",49),t.YNc(1,K,11,0,"ng-template",50),t.YNc(2,W,12,7,"ng-template",51),t.qZA()),2&i){const e=t.oxw(2);t.Q6J("value",e.filteredSolicitudes)("paginator",!0)("rows",10)("rowsPerPageOptions",t.DdM(4,X))}}function et(i,a){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,tt,3,5,"p-table",48),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.filteredSolicitudes&&e.filteredSolicitudes.length>0||""===e.searchText)}}function ot(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",55),t.TgZ(1,"div",56),t.TgZ(2,"span",57),t._uU(3),t.ALo(4,"date"),t.qZA(),t.qZA(),t.TgZ(5,"div",58),t.TgZ(6,"h3"),t._uU(7),t.qZA(),t.TgZ(8,"p"),t.TgZ(9,"strong"),t._uU(10,"Autores:"),t.qZA(),t._uU(11),t.qZA(),t.TgZ(12,"p"),t.TgZ(13,"strong"),t._uU(14,"Afiliaci\xf3n:"),t.qZA(),t._uU(15),t.qZA(),t.TgZ(16,"button",52),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).abrirEditarSolicitud(r.id)}),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw(2);t.xp6(3),t.Oqu(t.xi3(4,4,e.fecha_creacion,"dd/MM/yyyy")),t.xp6(4),t.Oqu(e.titulo_articulo),t.xp6(4),t.hij(" ",o.getAutoresNombres(e.autores),""),t.xp6(4),t.hij(" ",e.afiliacion,"")}}function it(i,a){if(1&i&&(t.TgZ(0,"div",53),t.YNc(1,ot,17,7,"div",54),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.filteredSolicitudes)}}function nt(i,a){if(1&i&&t._uU(0),2&i){const e=a.$implicit;t.AsE(" ",e.nombres," ",e.apellidos," ")}}function rt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",59),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.abrirEditarContenido(n.solicitudEdicion.contenidoSolicitud)}),t.qZA()}}function at(i,a){if(1&i&&(t.TgZ(0,"p",60),t._UZ(1,"i",61),t._uU(2),t.qZA()),2&i){const e=t.oxw();t.xp6(2),t.hij(" Contenido cargado: ",e.solicitudEdicion.contenidoSolicitud," ")}}function ct(i,a){if(1&i&&(t.TgZ(0,"option",62),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function st(i,a){if(1&i&&(t.TgZ(0,"div"),t.TgZ(1,"span"),t._uU(2,"Archivo seleccionado:"),t.qZA(),t._uU(3),t.qZA()),2&i){const e=t.oxw();t.xp6(3),t.hij(" ",e.archivoSeleccionado," ")}}function lt(i,a){if(1&i&&(t.TgZ(0,"div"),t.TgZ(1,"span"),t._uU(2,"Archivo seleccionado:"),t.qZA(),t._uU(3),t.qZA()),2&i){const e=t.oxw();t.xp6(3),t.hij(" ",e.archivoSeleccionado2," ")}}const dt=function(){return{width:"50vw",top:"30px"}},ut=function(){return{width:"80%",height:"60%",top:"30px"}},pt=function(){return{top:"80px"}};let gt=(()=>{class i{constructor(e,o,n,r){this.solicitudesService=e,this.messageService=o,this.dialogService=n,this.userService=r,this.afiliacionOptions=["Estudiante","Docente","Estudiante externo","Docente externo","otro..."],this.mostrarDialogoAgregarSolicitud=!1,this.mostrarDialogoAgregarContenido=!1,this.mostrarDialogoEditarSolicitud=!1,this.mostrarDialogoEditarContenido=!1,this.minDate=new Date,this.archivoAdjunto=null,this.declaracionOriginalidad=null,this.selectedFile=null,this.selectedFile2=null,this.usuarios=[],this.selectedAutores=[],this.archivoSeleccionado="",this.archivoSeleccionado2="",this.viewType="table",this.solicitudEdicion={id:0,titulo_articulo:"",autores:[],fecha_creacion:"",afiliacion:"",contenidoSolicitud:0,revista:0,status:!0},this.contenidoEdicion={id:0,status:!0,archivo_adjunto:"",declaracion_originalidad:""},this.searchText="",this.filteredSolicitudes=[],this.solicitudes=[],this.contenidos=[],this.textoBoton="Agregar Contenido"}ngOnInit(){this.cargarAutores(),this.minDate=new Date,this.cargarSolicitudes();const e=new Date,o=e.getTimezoneOffset();e.setMinutes(e.getMinutes()-o);const n=e.toISOString().split("T")[0];this.solicitudEdicion.fecha_creacion=n}toggleView(e){this.viewType=e}cargarAutores(){this.userService.ObtenerUsuarios().subscribe(e=>{this.usuarios=e},e=>{console.error(e)})}getAutoresNombres(e){if(e&&e.length>0){const o=new Set;for(const n of e){const r=this.usuarios.find(c=>c.user===n);r&&o.add(`${r.nombres} ${r.apellidos}`)}if(o.size>0)return Array.from(o).join(", ")}return"Autores desconocidos"}abrirEditarSolicitud(e){const o=this.solicitudes.find(n=>n.id===e);if(o){this.solicitudEdicion=Object.assign({},o),this.textoBoton=this.solicitudEdicion.contenidoSolicitud?"Editar Contenido":"Agregar Contenido",this.mostrarDialogoEditarSolicitud=!0,this.selectedAutores=this.usuarios.filter(r=>{var c;return void 0!==r.user&&(null===(c=this.solicitudEdicion.autores)||void 0===c?void 0:c.includes(r.user))});const n=this.contenidos.find(r=>r.id===this.solicitudEdicion.contenidoSolicitud);n&&(this.contenidoEdicion=Object.assign({},n))}}cerrarEditarSolicitud(){this.mostrarDialogoEditarSolicitud=!1}abrirEditarContenido(e){const o=this.contenidos.find(n=>n.id===e);o&&(this.contenidoEdicion=Object.assign({},o),this.mostrarDialogoEditarContenido=!0)}cerrarEditarContenido(){this.mostrarDialogoEditarContenido=!1}cargarSolicitudes(){this.solicitudesService.obtenerSolicitudes().subscribe(e=>{this.solicitudes=e,this.filteredSolicitudes=this.solicitudes},e=>{console.error(e)}),this.solicitudesService.obtenerContenidos().subscribe(e=>{this.contenidos=e},e=>{console.error(e)})}convertFileToBase64(e){const o=new FileReader;return o.readAsDataURL(e),o.onload=()=>o.result,""}guardarContenidoEdicion(){const e=new FormData;this.selectedFile&&e.append("archivo_adjunto",this.selectedFile),this.selectedFile2&&e.append("declaracion_originalidad",this.selectedFile2),e.append("id",this.contenidoEdicion.id.toString()),e.append("status",this.contenidoEdicion.status.toString()),this.solicitudesService.editarContenido2(e).subscribe(o=>{this.messageService.add({severity:"success",summary:"Contenido editado",detail:"El contenido se edit\xf3 exitosamente"}),this.mostrarDialogoEditarContenido=!1,this.cargarSolicitudes()},o=>{console.error("Error al editar contenido:",o),this.messageService.add({severity:"error",summary:"Error al editar contenido",detail:"Ocurri\xf3 un error al editar el contenido"})})}guardarSolicitudEdicion(){if(this.solicitudEdicion.contenidoSolicitud||(this.solicitudEdicion.contenidoSolicitud=0),this.solicitudEdicion.fecha_creacion){const n=new Date(this.solicitudEdicion.fecha_creacion).toISOString().split("T")[0];this.solicitudEdicion.fecha_creacion=n}const e=this.selectedAutores.filter(o=>"number"==typeof o.user).map(o=>o.user);this.solicitudEdicion.autores=e,this.solicitudesService.editarSolicitud(this.solicitudEdicion).subscribe(o=>{this.messageService.add({severity:"success",summary:"solicitud editada",detail:"La solicitud se edito exitosamente"}),this.mostrarDialogoEditarSolicitud=!1,this.cargarSolicitudes()},o=>{console.error("Error al editar la solicitud:",o),this.messageService.add({severity:"error",summary:"Error al editar la solicitud",detail:"Todos los campos son requeridos"})})}onFileChangeArticulo(e){var o;const n=null===(o=null==e?void 0:e.target)||void 0===o?void 0:o.files;this.selectedFile=n&&n.length>0?n[0]:null,this.archivoSeleccionado=e.target.files[0].name}onFileChangeDeclaracion(e){var o;const n=null===(o=null==e?void 0:e.target)||void 0===o?void 0:o.files;this.selectedFile2=n&&n.length>0?n[0]:null,this.archivoSeleccionado2=e.target.files[0].name}buscarSolicitudes(){this.filteredSolicitudes=""===this.searchText.trim()?this.solicitudes:this.solicitudes.filter(e=>{const o=e.titulo_articulo.toLowerCase().includes(this.searchText.toLowerCase()),n=e.afiliacion.toLowerCase().includes(this.searchText.toLowerCase()),r=this.getAutoresNombres(e.autores).toLowerCase().includes(this.searchText.toLowerCase());return o||n||r})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.M),t.Y36(g.ez),t.Y36(x.xA),t.Y36(C.K))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-editar"]],decls:97,vars:36,consts:[[1,"solicitudes-title"],[1,"view-toggle-buttons"],["pButton","","type","button","icon","pi pi-bars",1,"p-button-rounded","custom-button-color",3,"click"],["pButton","","type","button","icon","pi pi-th-large",1,"p-button-rounded","custom-button-color",3,"click"],[1,"search-container","p-inputgroup"],["type","text","pInputText","","placeholder","Buscar solicitudes...",1,"form-control","p-inputtext-lg",3,"ngModel","ngModelChange"],[1,"p-inputgroup-addon"],["pButton","","type","button","icon","pi pi-search",1,"p-button-rounded","custom-button-color",3,"click"],[4,"ngIf"],["class","cards-container",4,"ngIf"],["header","Editar Solicitud","styleClass","mi-dialog custom-dialog",3,"visible","modal","responsive","baseZIndex","showHeader","closable","dismissableMask","visibleChange"],[1,"form-group"],["for","titulo"],[1,"p-inputgroup"],[1,"pi","pi-pencil"],["type","text","id","titulo_articulo",1,"p-inputtext",3,"ngModel","ngModelChange"],[1,"form-group","full-width"],[1,"p-field","p-grid","p-fluid"],["for","autores"],["optionLabel","nombres","id","autor","name","autor",3,"options","ngModel","filter","ngModelChange"],["pTemplate","item"],["for","contenido"],["pButton","","pRipple","","type","button","icon","pi pi-pencil","label","Editar contenido","style","width: 100%;","class","p-button-warning font-bold p-button-outlined",3,"click",4,"ngIf"],["class","contenido-cargado",4,"ngIf"],["for","afiliaci\xf3n"],[1,"pi","pi-briefcase"],["id","afiliacion",1,"p-inputtext",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"p-col-12","container-button"],["pButton","",1,"p-button-success","p-button-outlined",2,"width","100%",3,"click"],[1,"pi","pi-save"],["pButton","",1,"p-button-info","p-button-outlined",2,"width","100%",3,"click"],[1,"pi","pi-times"],["header","Editar Contenido","styleClass","mi-dialog custom-dialog",3,"visible","modal","responsive","baseZIndex","showHeader","closable","dismissableMask","visibleChange"],[1,"p-grid","p-dir-col","p-fluid","solicitud-form"],[1,"p-col-12","p-md-6"],["for","archivo_adjunto"],[1,"archivo-area"],["for","archivo_adjunto",1,"custom-file-upload"],[1,"pi","pi-upload"],[2,"margin-left","5px"],["pButton","","type","file","id","archivo_adjunto","required","",2,"display","none",3,"change"],["for","declaracion_originalidad"],["for","declaracion_originalidad",1,"custom-file-upload"],["pButton","","type","file","id","declaracion_originalidad","required","",2,"display","none",3,"change"],[1,"p-col-12"],["pButton","",1,"p-button-success","p-button-outlined",3,"click"],["pButton","",1,"p-button-info","p-button-outlined",3,"click"],[3,"value","paginator","rows","rowsPerPageOptions",4,"ngIf"],[3,"value","paginator","rows","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],["pButton","","pRipple","","type","button","icon","pi pi-pencil","label","Editar",1,"p-button-warning","p-button-outlined",3,"click"],[1,"cards-container"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"card-header"],[1,"fecha-creacion"],[1,"card-content"],["pButton","","pRipple","","type","button","icon","pi pi-pencil","label","Editar contenido",1,"p-button-warning","font-bold","p-button-outlined",2,"width","100%",3,"click"],[1,"contenido-cargado"],[1,"pi","pi-check-circle"],[3,"value"]],template:function(e,o){1&e&&(t._UZ(0,"br"),t._UZ(1,"br"),t.TgZ(2,"h2",0),t._uU(3,"SOLICITUDES - EDITAR"),t.qZA(),t.TgZ(4,"div",1),t.TgZ(5,"button",2),t.NdJ("click",function(){return o.toggleView("table")}),t.qZA(),t.TgZ(6,"button",3),t.NdJ("click",function(){return o.toggleView("cards")}),t.qZA(),t.qZA(),t.TgZ(7,"div",4),t.TgZ(8,"input",5),t.NdJ("ngModelChange",function(r){return o.searchText=r})("ngModelChange",function(){return o.buscarSolicitudes()}),t.qZA(),t.TgZ(9,"span",6),t.TgZ(10,"button",7),t.NdJ("click",function(){return o.buscarSolicitudes()}),t.qZA(),t.qZA(),t.qZA(),t._UZ(11,"br"),t._UZ(12,"br"),t.YNc(13,et,2,1,"div",8),t.YNc(14,it,2,1,"div",9),t.TgZ(15,"p-dialog",10),t.NdJ("visibleChange",function(r){return o.mostrarDialogoEditarSolicitud=r}),t.TgZ(16,"h3"),t._uU(17,"Editar solicitud"),t.qZA(),t._UZ(18,"hr"),t._UZ(19,"br"),t.TgZ(20,"div",11),t.TgZ(21,"label",12),t._uU(22,"T\xedtulo del art\xedculo:"),t.qZA(),t.TgZ(23,"div",13),t.TgZ(24,"span",6),t._UZ(25,"i",14),t.qZA(),t.TgZ(26,"input",15),t.NdJ("ngModelChange",function(r){return o.solicitudEdicion.titulo_articulo=r}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",16),t.TgZ(28,"div",17),t.TgZ(29,"label",18),t._uU(30,"Autores"),t.qZA(),t._UZ(31,"br"),t.TgZ(32,"p-multiSelect",19),t.NdJ("ngModelChange",function(r){return o.selectedAutores=r}),t.YNc(33,nt,1,2,"ng-template",20),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",11),t.TgZ(35,"label",21),t._uU(36,"Contenido:"),t.qZA(),t._UZ(37,"br"),t.YNc(38,rt,1,0,"button",22),t.YNc(39,at,3,1,"p",23),t.qZA(),t.TgZ(40,"div",11),t.TgZ(41,"label",24),t._uU(42,"AFILIACI\xd3N:"),t.qZA(),t.TgZ(43,"div",13),t.TgZ(44,"span",6),t._UZ(45,"i",25),t.qZA(),t.TgZ(46,"select",26),t.NdJ("ngModelChange",function(r){return o.solicitudEdicion.afiliacion=r}),t.YNc(47,ct,2,2,"option",27),t.qZA(),t.qZA(),t.qZA(),t.TgZ(48,"div",28),t.TgZ(49,"button",29),t.NdJ("click",function(){return o.guardarSolicitudEdicion()}),t._UZ(50,"i",30),t._uU(51," Guardar "),t.qZA(),t._UZ(52,"br"),t.TgZ(53,"button",31),t.NdJ("click",function(){return o.cerrarEditarSolicitud()}),t._UZ(54,"i",32),t._uU(55," Cancelar "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(56,"p-dialog",33),t.NdJ("visibleChange",function(r){return o.mostrarDialogoEditarContenido=r}),t.TgZ(57,"div",34),t.TgZ(58,"div",35),t.TgZ(59,"label",36),t._uU(60,"Art\xedculo"),t.qZA(),t._UZ(61,"br"),t.TgZ(62,"div",37),t.TgZ(63,"div"),t.TgZ(64,"label",38),t._UZ(65,"i",39),t.TgZ(66,"span",40),t._uU(67,"Seleccionar archivo"),t.qZA(),t.TgZ(68,"input",41),t.NdJ("change",function(r){return o.onFileChangeArticulo(r)}),t.qZA(),t.qZA(),t.qZA(),t._UZ(69,"br"),t.YNc(70,st,4,1,"div",8),t.qZA(),t.qZA(),t._UZ(71,"br"),t._UZ(72,"br"),t.TgZ(73,"div",35),t.TgZ(74,"label",42),t._uU(75,"Declaraci\xf3n de originalidad"),t.qZA(),t._UZ(76,"br"),t.TgZ(77,"div",37),t.TgZ(78,"div"),t.TgZ(79,"label",43),t._UZ(80,"i",39),t.TgZ(81,"span",40),t._uU(82,"Seleccionar archivo"),t.qZA(),t.TgZ(83,"input",44),t.NdJ("change",function(r){return o.onFileChangeDeclaracion(r)}),t.qZA(),t.qZA(),t.qZA(),t._UZ(84,"br"),t.YNc(85,lt,4,1,"div",8),t.qZA(),t.qZA(),t._UZ(86,"br"),t.TgZ(87,"div",45),t.TgZ(88,"button",46),t.NdJ("click",function(){return o.guardarContenidoEdicion()}),t._UZ(89,"i",30),t._uU(90," Guardar contenido "),t.qZA(),t.TgZ(91,"button",47),t.NdJ("click",function(){return o.cerrarEditarContenido()}),t._UZ(92,"i",32),t._uU(93," Cancelar "),t.qZA(),t.qZA(),t.qZA(),t._UZ(94,"br"),t._UZ(95,"br"),t.qZA(),t._UZ(96,"p-toast")),2&e&&(t.xp6(8),t.Q6J("ngModel",o.searchText),t.xp6(5),t.Q6J("ngIf","table"===o.viewType),t.xp6(1),t.Q6J("ngIf","cards"===o.viewType),t.xp6(1),t.Akn(t.DdM(33,dt)),t.Q6J("visible",o.mostrarDialogoEditarSolicitud)("modal",!0)("responsive",!0)("baseZIndex",1e4)("showHeader",!1)("closable",!1)("dismissableMask",!1),t.xp6(11),t.Q6J("ngModel",o.solicitudEdicion.titulo_articulo),t.xp6(6),t.Q6J("options",o.usuarios)("ngModel",o.selectedAutores)("filter",!0),t.xp6(6),t.Q6J("ngIf",null!==o.solicitudEdicion.contenidoSolicitud),t.xp6(1),t.Q6J("ngIf",o.solicitudEdicion.contenidoSolicitud),t.xp6(7),t.Q6J("ngModel",o.solicitudEdicion.afiliacion),t.xp6(1),t.Q6J("ngForOf",o.afiliacionOptions),t.xp6(9),t.Akn(t.DdM(34,ut)),t.Q6J("visible",o.mostrarDialogoEditarContenido)("modal",!0)("responsive",!0)("baseZIndex",1e4)("showHeader",!1)("closable",!1)("dismissableMask",!1),t.xp6(14),t.Q6J("ngIf",o.archivoSeleccionado),t.xp6(15),t.Q6J("ngIf",o.archivoSeleccionado),t.xp6(11),t.Akn(t.DdM(35,pt)))},directives:[b.Hq,l.Fj,A.o,l.JJ,l.On,d.O5,M.iA,g.jx,d.sg,Z.V,S.NU,l.EJ,l.YN,l.Kr,T.FN],pipes:[d.uU],styles:[".solicitudes-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;margin-bottom:20px;text-align:center;color:#fa6357;text-transform:uppercase;letter-spacing:2px}.solicitudes-subtitle[_ngcontent-%COMP%]{font-size:30px;font-weight:700;margin-bottom:20px;text-align:center;color:#fa6357;text-transform:uppercase;letter-spacing:2px}[_nghost-%COMP%]     .p-button-rounded{border-radius:20px}[_nghost-%COMP%]     .p-button-secondary{background-color:#fa6357;color:#fff;border:none}[_nghost-%COMP%]     .p-button-secondary:hover{background-color:#fa6357}[_nghost-%COMP%]     .custom-dialog .p-dialog-header{background-color:#fa6357;color:#fff;border:none;padding:1rem}[_nghost-%COMP%]     .custom-dialog .p-dialog-header .p-dialog-title{font-size:20px;margin:0}[_nghost-%COMP%]     .custom-dialog .p-dialog-header .p-dialog-title .pi{margin-right:.5rem}[_nghost-%COMP%]     .custom-dialog .p-dialog-content{background-color:#fff}[_nghost-%COMP%]     .custom-dialog .p-dialog-footer{background-color:#f0f0f0}[_nghost-%COMP%]     .contenido-cargado{margin-top:10px;color:#777}.container-button[_ngcontent-%COMP%]{margin-top:20px}.mi-dialog[_ngcontent-%COMP%]   .p-dialog-content[_ngcontent-%COMP%]{padding:20px;background-color:#fff;border-radius:4px}.mi-dialog[_ngcontent-%COMP%]   .p-dialog-header[_ngcontent-%COMP%]{background-color:#fa6357;color:#fff;border:none;padding:1rem}.mi-dialog[_ngcontent-%COMP%]   .p-dialog-header[_ngcontent-%COMP%]   .p-dialog-title[_ngcontent-%COMP%]{font-size:20px;margin:0}.mi-dialog[_ngcontent-%COMP%]   .p-dialog-header[_ngcontent-%COMP%]   .p-dialog-title[_ngcontent-%COMP%]   .pi[_ngcontent-%COMP%]{margin-right:.5rem}.mi-dialog[_ngcontent-%COMP%]   .p-dialog-footer[_ngcontent-%COMP%]{background-color:#f0f0f0;padding:10px 20px;text-align:right}button.p-button[_ngcontent-%COMP%]{padding:8px 16px;border-radius:4px;background-color:#fa6357;color:#fff;font-weight:700;cursor:pointer;transition:background-color .3s ease}button.p-button[_ngcontent-%COMP%]:hover{background-color:#fa6357}.custom-file-upload[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:6px 12px;cursor:pointer;background-color:#fa6357;color:#fff;border:none;border-radius:4px;transition:background-color .3s ease-in-out;text-align:center}.custom-file-upload[_ngcontent-%COMP%]:hover{background-color:#fa6357}.archivo-area[_ngcontent-%COMP%]{margin-top:10px;padding:10px;background-color:#f0f0f0;border:1px dashed #999;border-radius:4px;align-items:center;justify-content:space-between}.archivo-area[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;margin-right:10px}.custom-file-upload[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.cards-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px}.card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.card[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #e0e0e0;border-radius:8px;padding:20px;width:calc(50% - 20px);box-shadow:0 2px 5px #0000001a;position:relative}.card-header[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px}.fecha-creacion[_ngcontent-%COMP%]{background-color:#f0f0f0;color:#777;padding:5px 10px;border-radius:4px;font-size:12px}.cards-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;justify-content:space-between}@media (max-width: 768px){.card[_ngcontent-%COMP%]{width:calc(100% - 20px)}}.view-toggle-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin:20px}.view-toggle-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fa6357;border-color:#fa6357;color:#fff}label[_ngcontent-%COMP%]{font-weight:700}.form-group[_ngcontent-%COMP%]{padding:5px;width:100%}.full-width[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .form-group{width:100%}[_nghost-%COMP%]     .p-field{width:100%}[_nghost-%COMP%]     p-multiSelect{width:100%}.custom-button-color[_ngcontent-%COMP%]{border-color:#fa6357!important;background-color:#fa6357!important}"]}),i})();function _t(i,a){1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2,"T\xedtulo del art\xedculo"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Autores"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Fecha"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Afiliacion"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Eliminar"),t.qZA(),t.qZA())}function ft(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t.TgZ(11,"button",15),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(3).eliminarSolicitud(r)}),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw(3);t.xp6(2),t.Oqu(e.titulo_articulo),t.xp6(2),t.Oqu(o.getAutoresNombres(e.autores)),t.xp6(2),t.Oqu(t.xi3(7,4,e.fecha_creacion,"dd/MM/yyyy")),t.xp6(3),t.Oqu(e.afiliacion)}}const ht=function(){return[5,10,20]};function mt(i,a){if(1&i&&(t.TgZ(0,"p-table",12),t.YNc(1,_t,11,0,"ng-template",13),t.YNc(2,ft,12,7,"ng-template",14),t.qZA()),2&i){const e=t.oxw(2);t.Q6J("value",e.filteredSolicitudes)("paginator",!0)("rows",10)("rowsPerPageOptions",t.DdM(4,ht))}}function bt(i,a){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,mt,3,5,"p-table",11),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.filteredSolicitudes&&e.filteredSolicitudes.length>0||""===e.searchText)}}function Zt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",18),t.TgZ(1,"div",19),t.TgZ(2,"span",20),t._uU(3),t.ALo(4,"date"),t.qZA(),t.qZA(),t.TgZ(5,"div",21),t.TgZ(6,"h3"),t._uU(7),t.qZA(),t.TgZ(8,"p"),t.TgZ(9,"strong"),t._uU(10,"Autores:"),t.qZA(),t._uU(11),t.qZA(),t.TgZ(12,"p"),t.TgZ(13,"strong"),t._uU(14,"Afiliaci\xf3n:"),t.qZA(),t._uU(15),t.qZA(),t.TgZ(16,"button",15),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).eliminarSolicitud(r)}),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw(2);t.xp6(3),t.Oqu(t.xi3(4,4,e.fecha_creacion,"dd/MM/yyyy")),t.xp6(4),t.Oqu(e.titulo_articulo),t.xp6(4),t.hij(" ",o.getAutoresNombres(e.autores),""),t.xp6(4),t.hij(" ",e.afiliacion,"")}}function xt(i,a){if(1&i&&(t.TgZ(0,"div",16),t.YNc(1,Zt,17,7,"div",17),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.filteredSolicitudes)}}function Ct(i,a){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"p"),t._uU(2,"\xbfEst\xe1s seguro de que deseas eliminar la siguiente solicitud?"),t.qZA(),t.TgZ(3,"span"),t.TgZ(4,"b"),t._uU(5,"T\xedtulo del art\xedculo:"),t.qZA(),t._uU(6),t.qZA(),t._UZ(7,"br"),t.TgZ(8,"span"),t.TgZ(9,"b"),t._uU(10,"Autores:"),t.qZA(),t._uU(11),t.qZA(),t._UZ(12,"br"),t._UZ(13,"br"),t.TgZ(14,"div",22),t.TgZ(15,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw().confirmarEliminar()}),t.qZA(),t.TgZ(16,"button",24),t.NdJ("click",function(){return t.CHM(e),t.oxw().cancelarEliminar()}),t.qZA(),t.qZA(),t.BQk()}if(2&i){const e=t.oxw();t.xp6(6),t.hij(" ",e.solicitudSeleccionada.titulo_articulo,""),t.xp6(5),t.hij(" ",e.getAutoresNombres(e.solicitudSeleccionada.autores),"")}}const vt=function(){return{top:"80px"}};let Tt=(()=>{class i{constructor(e,o,n,r){this.dialogService=e,this.solicitudesService=o,this.messageService=n,this.userService=r,this.solicitudes=[],this.eliminarDialogVisible=!1,this.solicitudSeleccionada=null,this.searchText="",this.filteredSolicitudes=[],this.usuarios=[],this.viewType="table"}ngOnInit(){this.cargarSolicitudes(),this.cargarAutores()}cargarAutores(){this.userService.ObtenerUsuarios().subscribe(e=>{this.usuarios=e},e=>{console.error(e)})}toggleView(e){this.viewType=e}getAutoresNombres(e){if(e&&e.length>0){const o=new Set;for(const n of e){const r=this.usuarios.find(c=>c.user===n);r&&o.add(`${r.nombres} ${r.apellidos}`)}if(o.size>0)return Array.from(o).join(", ")}return"Autores desconocidos"}cargarSolicitudes(){this.solicitudesService.obtenerSolicitudes().subscribe(e=>{this.solicitudes=e,this.filteredSolicitudes=this.solicitudes},e=>{console.error(e)})}eliminarSolicitud(e){this.solicitudSeleccionada=e,this.eliminarDialogVisible=!0}cancelarEliminar(){this.eliminarDialogVisible=!1,this.solicitudSeleccionada=null}confirmarEliminar(){this.solicitudSeleccionada&&(this.solicitudSeleccionada.status=!1,this.solicitudesService.editarSolicitud(this.solicitudSeleccionada).subscribe(e=>{this.messageService.add({severity:"success",summary:"Solicitud Eliminada",detail:"La solicitud se elimin\xf3 exitosamente"}),this.cargarSolicitudes()},e=>{console.error("Error al cambiar el estado de la solicitud:",e),this.messageService.add({severity:"error",summary:"Error",detail:"Error al eliminar la solicitud"})}),this.eliminarDialogVisible=!1,this.solicitudSeleccionada=null)}buscarSolicitudes(){this.filteredSolicitudes=""===this.searchText.trim()?this.solicitudes:this.solicitudes.filter(e=>{const o=e.titulo_articulo.toLowerCase().includes(this.searchText.toLowerCase()),n=e.afiliacion.toLowerCase().includes(this.searchText.toLowerCase()),r=this.getAutoresNombres(e.autores).toLowerCase().includes(this.searchText.toLowerCase());return o||n||r})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(x.xA),t.Y36(m.M),t.Y36(g.ez),t.Y36(C.K))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-eliminar"]],decls:18,vars:12,consts:[[1,"solicitudes-title"],[1,"view-toggle-buttons"],["pButton","","type","button","icon","pi pi-bars",1,"p-button-rounded","custom-button-color",3,"click"],["pButton","","type","button","icon","pi pi-th-large",1,"p-button-rounded","custom-button-color",3,"click"],[1,"search-container","p-inputgroup"],["type","text","pInputText","","placeholder","Buscar solicitudes...",1,"form-control","p-inputtext-lg",3,"ngModel","ngModelChange"],[1,"p-inputgroup-addon"],["pButton","","type","button","icon","pi pi-search",1,"p-button-rounded","custom-button-color",3,"click"],[4,"ngIf"],["class","cards-container",4,"ngIf"],["header","Eliminar Solicitud",3,"modal","visible","showHeader","closable","dismissableMask","visibleChange"],[3,"value","paginator","rows","rowsPerPageOptions",4,"ngIf"],[3,"value","paginator","rows","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],["pButton","","pRipple","","type","button","icon","pi pi-trash","label","Eliminar",1,"p-button-danger","p-button-outlined",3,"click"],[1,"cards-container"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"card-header"],[1,"fecha-creacion"],[1,"card-content"],[1,"p-dialog-footer"],["pButton","","type","button","label","Eliminar",1,"p-button-info",3,"click"],["pButton","","type","button","label","Cancelar",1,"p-button-danger",3,"click"]],template:function(e,o){1&e&&(t._UZ(0,"br"),t._UZ(1,"br"),t.TgZ(2,"h2",0),t._uU(3,"SOLICITUDES - ELIMINAR"),t.qZA(),t.TgZ(4,"div",1),t.TgZ(5,"button",2),t.NdJ("click",function(){return o.toggleView("table")}),t.qZA(),t.TgZ(6,"button",3),t.NdJ("click",function(){return o.toggleView("cards")}),t.qZA(),t.qZA(),t.TgZ(7,"div",4),t.TgZ(8,"input",5),t.NdJ("ngModelChange",function(r){return o.searchText=r})("ngModelChange",function(){return o.buscarSolicitudes()}),t.qZA(),t.TgZ(9,"span",6),t.TgZ(10,"button",7),t.NdJ("click",function(){return o.buscarSolicitudes()}),t.qZA(),t.qZA(),t.qZA(),t._UZ(11,"br"),t._UZ(12,"br"),t.YNc(13,bt,2,1,"div",8),t.YNc(14,xt,2,1,"div",9),t.TgZ(15,"p-dialog",10),t.NdJ("visibleChange",function(r){return o.eliminarDialogVisible=r}),t.YNc(16,Ct,17,2,"ng-container",8),t.qZA(),t._UZ(17,"p-toast")),2&e&&(t.xp6(8),t.Q6J("ngModel",o.searchText),t.xp6(5),t.Q6J("ngIf","table"===o.viewType),t.xp6(1),t.Q6J("ngIf","cards"===o.viewType),t.xp6(1),t.Q6J("modal",!0)("visible",o.eliminarDialogVisible)("showHeader",!1)("closable",!1)("dismissableMask",!1),t.xp6(1),t.Q6J("ngIf",o.solicitudSeleccionada),t.xp6(1),t.Akn(t.DdM(11,vt)))},directives:[b.Hq,l.Fj,A.o,l.JJ,l.On,d.O5,M.iA,g.jx,d.sg,Z.V,T.FN],pipes:[d.uU],styles:[".solicitudes-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;margin-bottom:20px;text-align:center;color:#fa6357;text-transform:uppercase;letter-spacing:2px}.solicitudes-subtitle[_ngcontent-%COMP%]{font-size:30px;font-weight:700;margin-bottom:20px;text-align:center;color:#fa6357;text-transform:uppercase;letter-spacing:2px}[_nghost-%COMP%]     .p-table{width:100%;margin-bottom:20px;border-collapse:separate;border-spacing:0;border:none}[_nghost-%COMP%]     .p-table-header{background-color:#f0f0f0;font-weight:700;text-transform:uppercase}[_nghost-%COMP%]     .p-table-thead>tr>th{padding:10px 16px;text-align:left;border-bottom:1px solid #ccc;background-color:#f0f0f0;color:#333}[_nghost-%COMP%]     .p-table-tbody>tr>td{padding:10px 16px;text-align:left;border-bottom:1px solid #ccc}[_nghost-%COMP%]     .p-table-tbody>tr:nth-child(even)>td{background-color:#f9f9f9}[_nghost-%COMP%]     .p-table .p-paginator{border-top:1px solid #ccc;margin-top:20px}[_nghost-%COMP%]     .p-button-rounded{border-radius:20px}[_nghost-%COMP%]     .p-button-secondary{background-color:#fa6357;color:#fff;border:none}[_nghost-%COMP%]     .p-button-secondary:hover{background-color:#fa6357}[_nghost-%COMP%]     .ui-dialog .ui-dialog-titlebar{background-color:#fa6357;color:#fff;border:none;font-size:1.2rem;padding:1rem}[_nghost-%COMP%]     .ui-dialog .ui-dialog-content{padding:1.5rem}[_nghost-%COMP%]     .ui-dialog .ui-dialog-footer{text-align:right;padding:1rem;border-top:none}[_nghost-%COMP%]     .ui-dialog .ui-dialog-footer .p-button{margin-left:.5rem}[_nghost-%COMP%]     .ui-dialog .ui-dialog-footer .p-button.p-button-secondary{background-color:#ccc;color:#333}[_nghost-%COMP%]     .ui-dialog .ui-dialog-footer .p-button.p-button-success{background-color:#28a745;color:#fff}[_nghost-%COMP%]     .ui-dialog .ui-dialog-content{max-width:400px;margin:0 auto}.view-toggle-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin:20px}.view-toggle-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fa6357;border-color:#fa6357;color:#fff}.cards-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px}.card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.card[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #e0e0e0;border-radius:8px;padding:20px;width:calc(50% - 20px);box-shadow:0 2px 5px #0000001a;position:relative}.card-header[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px}.fecha-creacion[_ngcontent-%COMP%]{background-color:#f0f0f0;color:#777;padding:5px 10px;border-radius:4px;font-size:12px}.cards-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;justify-content:space-between}@media (max-width: 768px){.card[_ngcontent-%COMP%]{width:calc(100% - 20px)}}.custom-button-color[_ngcontent-%COMP%]{border-color:#fa6357!important;background-color:#fa6357!important}"]}),i})();var At=s(5861),q=s(7990),Mt=s(4765);let Ot=(()=>{class i{constructor(){this.strokeWidth="2",this.fill="none",this.animationDuration="2s"}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["p-progressSpinner"]],hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",strokeWidth:"strokeWidth",fill:"fill",animationDuration:"animationDuration"},decls:3,vars:6,consts:[["role","alert","aria-busy","true",1,"p-progress-spinner",3,"ngStyle","ngClass"],["viewBox","25 25 50 50",1,"p-progress-spinner-svg"],["cx","50","cy","50","r","20","stroke-miterlimit","10",1,"p-progress-spinner-circle"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.O4$(),t.TgZ(1,"svg",1),t._UZ(2,"circle",2),t.qZA(),t.qZA()),2&e&&(t.Q6J("ngStyle",o.style)("ngClass",o.styleClass),t.xp6(1),t.Udp("animation-duration",o.animationDuration),t.xp6(1),t.uIk("fill",o.fill)("stroke-width",o.strokeWidth))},directives:[d.PC,d.mk],styles:['.p-progress-spinner{position:relative;margin:0 auto;width:100px;height:100px;display:inline-block}.p-progress-spinner:before{content:"";display:block;padding-top:100%}.p-progress-spinner-svg{animation:p-progress-spinner-rotate 2s linear infinite;height:100%;transform-origin:center center;width:100%;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto}.p-progress-spinner-circle{stroke-dasharray:89,200;stroke-dashoffset:0;stroke:#d62d20;animation:p-progress-spinner-dash 1.5s ease-in-out infinite,p-progress-spinner-color 6s ease-in-out infinite;stroke-linecap:round}@keyframes p-progress-spinner-rotate{to{transform:rotate(360deg)}}@keyframes p-progress-spinner-dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:89,200;stroke-dashoffset:-35px}to{stroke-dasharray:89,200;stroke-dashoffset:-124px}}@keyframes p-progress-spinner-color{to,0%{stroke:#d62d20}40%{stroke:#0057e7}66%{stroke:#008744}80%,90%{stroke:#ffa700}}\n'],encapsulation:2,changeDetection:0}),i})(),St=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[d.ez]]}),i})();var D=s(4036);function qt(i,a){if(1&i&&t._uU(0),2&i){const e=a.$implicit;t.AsE(" ",e.nombres," ",e.apellidos," ")}}function wt(i,a){if(1&i&&(t.TgZ(0,"p"),t._UZ(1,"i",40),t._uU(2),t.qZA()),2&i){const e=t.oxw();t.xp6(2),t.hij(" Contenido cargado: ",e.solicitud.contenidoSolicitud," ")}}function Pt(i,a){if(1&i&&(t.TgZ(0,"option",41),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function yt(i,a){if(1&i&&(t.TgZ(0,"div"),t.TgZ(1,"span"),t._uU(2,"Archivo seleccionado:"),t.qZA(),t._uU(3),t.qZA()),2&i){const e=t.oxw();t.xp6(3),t.hij(" ",e.archivoSeleccionado," ")}}function Ut(i,a){if(1&i&&(t.TgZ(0,"div"),t.TgZ(1,"span"),t._uU(2,"Archivo seleccionado:"),t.qZA(),t._uU(3),t.qZA()),2&i){const e=t.oxw();t.xp6(3),t.hij(" ",e.originalidadSeleccionada," ")}}const Et=function(){return{width:"40%",height:"30%"}},kt=function(){return{"width.px":50,"height.px":50}},Dt=function(){return{width:"50vw",top:"30px"}},Jt=function(){return{top:"80px"}};function Ft(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw(2).MostrarEditarContenido(n.contenidoSolicitud)}),t.qZA()}}function It(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",22),t.TgZ(1,"div",23),t.TgZ(2,"div",24),t.TgZ(3,"div",25),t._UZ(4,"img",26),t.TgZ(5,"div",27),t.TgZ(6,"h3",28),t._uU(7),t.qZA(),t.TgZ(8,"p",28),t._uU(9),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"div",29),t.TgZ(11,"div"),t._uU(12),t.ALo(13,"date"),t.qZA(),t.qZA(),t.TgZ(14,"p",30),t._uU(15),t.qZA(),t.qZA(),t.TgZ(16,"div",31),t.TgZ(17,"button",32),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).mostrarDialogo(r)}),t.qZA(),t.YNc(18,Ft,1,0,"button",33),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw(2);t.xp6(7),t.Oqu(e.titulo_articulo),t.xp6(2),t.Oqu(o.getUsuarioNombre(e.autores)),t.xp6(3),t.Oqu(t.xi3(13,5,e.fecha_creacion,"dd/MM/yyyy")),t.xp6(3),t.Oqu(e.afiliacion),t.xp6(3),t.Q6J("ngIf",o.debeMostrarEditar(e))}}function jt(i,a){if(1&i&&(t.TgZ(0,"div",20),t.YNc(1,It,19,8,"div",21),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.solicitudes)}}function Yt(i,a){1&i&&(t.TgZ(0,"p",35),t._uU(1,"No se encontraron solicitudes. Por favor, genere una nueva solicitud."),t.qZA())}function Qt(i,a){if(1&i&&t._UZ(0,"embed",45),2&i){const e=t.oxw(3);t.Q6J("src",e.fileURL,t.uOi)}}function Lt(i,a){if(1&i&&t._UZ(0,"embed",45),2&i){const e=t.oxw(3);t.Q6J("src",e.originalidadURL,t.uOi)}}function Bt(i,a){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"p-accordion"),t.TgZ(2,"p-accordionTab",37),t.YNc(3,Qt,1,1,"embed",38),t.qZA(),t.TgZ(4,"p-accordionTab",39),t.YNc(5,Lt,1,1,"embed",38),t.qZA(),t.qZA(),t._UZ(6,"br"),t.TgZ(7,"div",40),t.TgZ(8,"button",41),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return n.descargarArchivo(n.contenidoSeleccionado.id,"archivo_adjunto")}),t.qZA(),t.TgZ(9,"button",42),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return n.descargarArchivo(n.contenidoSeleccionado.id,"originalidad")}),t.qZA(),t.qZA(),t._UZ(10,"br"),t.TgZ(11,"div",43),t.TgZ(12,"button",44),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).cerrarDialogo()}),t.qZA(),t.qZA(),t._UZ(13,"br"),t.BQk()}if(2&i){const e=t.oxw(2);t.xp6(3),t.Q6J("ngIf",e.fileURL),t.xp6(2),t.Q6J("ngIf",e.originalidadURL)}}const zt=function(){return{width:"80%",top:"30px"}};function Vt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"p-dialog",36),t.NdJ("visibleChange",function(n){return t.CHM(e),t.oxw().displayDialog=n}),t.TgZ(1,"div",24),t.TgZ(2,"div",25),t._UZ(3,"img",26),t.TgZ(4,"div",27),t.TgZ(5,"h3",28),t._uU(6),t.qZA(),t.TgZ(7,"p",28),t._uU(8),t.qZA(),t.qZA(),t.qZA(),t._UZ(9,"hr"),t.YNc(10,Bt,14,2,"ng-container",13),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.Akn(t.DdM(11,zt)),t.s9C("header",e.solicitudSeleccionada.titulo_articulo),t.Q6J("visible",e.displayDialog)("modal",!0)("showHeader",!1)("closable",!0)("dismissableMask",!0),t.xp6(6),t.Oqu(e.solicitudSeleccionada.titulo_articulo),t.xp6(2),t.Oqu(e.getUsuarioNombre(e.solicitudSeleccionada.autores)),t.xp6(2),t.Q6J("ngIf",e.contenidoSeleccionado)}}function Rt(i,a){if(1&i&&(t.TgZ(0,"div"),t.TgZ(1,"span"),t._uU(2,"Archivo seleccionado:"),t.qZA(),t._uU(3),t.qZA()),2&i){const e=t.oxw();t.xp6(3),t.hij(" ",e.archivoSeleccionado," ")}}function Ht(i,a){if(1&i&&(t.TgZ(0,"div"),t.TgZ(1,"span"),t._uU(2,"Archivo seleccionado:"),t.qZA(),t._uU(3),t.qZA()),2&i){const e=t.oxw();t.xp6(3),t.hij(" ",e.archivoSeleccionado2," ")}}const $t=function(){return{width:"80%",height:"60%",top:"30px"}},Gt=function(){return{top:"80px"}},Kt=[{path:"ver",component:G},{path:"crear",component:(()=>{class i{constructor(e,o,n,r,c){this.solicitudesService=e,this.messageService=o,this.authService=n,this.userService=r,this.rolesService=c,this.afiliacionOptions=["Estudiante","Docente","Estudiante externo nacional","Docente externo nacional","Estudiante externo Internacional","Docente externo Internacional","Otro..."],this.mostrarDialogoAgregarSolicitud=!1,this.mostrarDialogoAgregarContenido=!1,this.mostrarDialogoEditarSolicitud=!1,this.mostrarDialogoEditarContenido=!1,this.minDate=new Date,this.selectedFile=null,this.selectedFileOri=null,this.autores=[],this.selectedAutores=[],this.archivoSeleccionado="",this.originalidadSeleccionada="",this.editarContenido=!1,this.solicitudEnProceso=!1,this.solicitud={id:0,titulo_articulo:"",autores:[],fecha_creacion:"",afiliacion:"",contenidoSolicitud:0,revista:0,status:!0},this.contenido={id:0,declaracion_originalidad:"",archivo_adjunto:"",status:!0},this.solicitudes=[],this.revistas=[],this.textoBoton="Agregar Contenido"}ngOnInit(){this.minDate=new Date,this.obtenerAutores(),this.obtenerRevistas();const e=new Date,o=e.getTimezoneOffset();e.setMinutes(e.getMinutes()-o);const n=e.toISOString().split("T")[0];this.solicitud.fecha_creacion=n,this.authService.getUserId()}obtenerAutores(){this.userService.ObtenerUsuarios().subscribe(e=>{this.autores=e},e=>{console.error("Error al obtener los responsables:",e)})}obtenerRevistas(){this.solicitudesService.obtenerRevistas().subscribe(e=>{this.revistas=e},e=>{console.error("Error al obtener las revistas:",e)})}abrirContenido(){this.solicitud.contenidoSolicitud?this.solicitudesService.obtenerContenidoPorId(this.solicitud.contenidoSolicitud).subscribe(e=>{this.contenido=e,this.mostrarDialogoAgregarContenido=!0,this.editarContenido=!0,this.textoBoton="Editar Contenido"},e=>{console.error("Error al cargar contenido:",e)}):(this.editarContenido=!1,this.contenido={id:0,declaracion_originalidad:"",archivo_adjunto:"",status:!0}),this.mostrarDialogoAgregarContenido=!0}cerrarContenido(){this.mostrarDialogoAgregarContenido=!1}guardarSolicitud(){var e=this;return(0,At.Z)(function*(){e.solicitud.contenidoSolicitud||(e.solicitud.contenidoSolicitud=0),e.solicitud.fecha_creacion&&new Date(e.solicitud.fecha_creacion).toISOString().split("T");try{e.solicitudEnProceso=!0;const o=yield e.rolesService.getRoles().toPromise(),n=e.rolesService.obtenerEditorJefeId(o),r=e.selectedAutores.filter(_=>"number"==typeof _.user).map(_=>_.user);e.solicitud.autores=r;const c=yield e.solicitudesService.guardarSolicitud(e.solicitud).toPromise(),O=e.authService.getUserId();if("number"==typeof O){const _=yield e.solicitudesService.obtenerPasos().toPromise();null!=_&&_.sort((p,u)=>p.nivel-u.nivel);const w=yield e.solicitudesService.obtenerEstados().toPromise();if(_&&w)for(const p of _){const u=new FormData;if(u.append("solicitudId",c.id.toString()),u.append("pasos_seguimiento",p.id.toString()),u.append("status","true"),1===p.nivel){const f=(new Date).toISOString().split("T")[0],h=(new Date).toISOString().split("T")[0];u.append("fecha_asignacion",f),u.append("fecha_evaluacion",h)}if(p.dias_programacion&&1===p.nivel){const f=w.find(y=>"aceptado sin cambios"===y.nombre||"Aceptado sin cambios");f&&u.append("estado_seguimiento",f.id.toString());const h=parseInt(p.dias_programacion),J=new Date((new Date).getTime()+24*h*60*60*1e3).toISOString().split("T")[0];u.append("fecha_programacion",J),u.append("responsableId",O.toString())}if(2===p.nivel&&n){const f=w.find(h=>"Pendiente"===h.nombre||"pendiente");if(f&&u.append("estado_seguimiento",f.id.toString()),p.dias_programacion){const h=parseInt(p.dias_programacion),P=(new Date).toISOString().split("T")[0],y=new Date(new Date(P).getTime()+24*h*60*60*1e3).toISOString().split("T")[0];u.append("fecha_asignacion",P),u.append("fecha_programacion",y)}u.append("responsableId",n.toString())}yield e.solicitudesService.crearSeguimiento(u).toPromise()}else console.error("No se pudieron obtener los pasos de seguimiento o los estados de seguimiento.")}e.messageService.add({severity:"success",summary:"Solicitud guardada",detail:"La solicitud se gener\xf3 exitosamente"}),e.resetearFormulario(),e.solicitudEnProceso=!1}catch(o){e.solicitudEnProceso=!1,console.error("Error al guardar la solicitud:",o),e.messageService.add({severity:"error",summary:"Error al generar la solicitud",detail:"Todos los campos son requeridos"})}e.solicitudEnProceso=!1})()}guardarContenido(){if(this.validarContenido()){if(this.selectedFile&&this.selectedFileOri){if("application/pdf"!==this.selectedFile.type)return void this.messageService.add({severity:"error",summary:"Error",detail:"El archivo adjunto debe ser un PDF."});if("application/pdf"!==this.selectedFileOri.type)return void this.messageService.add({severity:"error",summary:"Error",detail:"La declaraci\xf3n de originalidad debe ser un PDF."});const e=new FormData;e.append("archivo_adjunto",this.selectedFile),e.append("declaracion_originalidad",this.selectedFileOri),e.append("status","true"),this.editarContenido?(e.append("id",this.contenido.id.toString()),this.solicitudesService.editarContenido2(e).subscribe(o=>{this.messageService.add({severity:"success",summary:"Contenido actualizado",detail:"El contenido se ha actualizado exitosamente"}),this.mostrarDialogoAgregarContenido=!1,this.textoBoton="Editar Contenido"},o=>{console.error("Error al actualizar contenido:",o),this.messageService.add({severity:"error",summary:"Error",detail:"Error al actualizar el contenido"})})):this.solicitudesService.guardarContenido(e).subscribe(o=>{this.solicitud.contenidoSolicitud=o.id,this.messageService.add({severity:"success",summary:"Contenido guardado",detail:"El contenido se gener\xf3 exitosamente"}),this.contenido={id:0,archivo_adjunto:"",declaracion_originalidad:"",status:!0},this.mostrarDialogoAgregarContenido=!1,this.textoBoton="Editar Contenido"},o=>{console.error("Error al guardar contenido:",o),this.messageService.add({severity:"error",summary:"Error",detail:"Error al guardar el contenido"})})}}else this.messageService.add({severity:"error",summary:"Error",detail:"Completa todos los campos del contenido"})}handleFileInput(e){this.selectedFile=e.target.files[0],this.archivoSeleccionado=e.target.files[0].name}handleFileInputOriginalidad(e){this.selectedFileOri=e.target.files[0],this.originalidadSeleccionada=e.target.files[0].name}resetearFormulario(){this.solicitud={id:0,titulo_articulo:"",autores:[],fecha_creacion:"",afiliacion:"",contenidoSolicitud:0,revista:0,status:!0},this.contenido={id:0,archivo_adjunto:"",declaracion_originalidad:"",status:!0}}validarCampos(){return null!==this.solicitud.autores&&null!==this.solicitud.fecha_creacion}validarContenido(){return null!==this.contenido.archivo_adjunto&&null!==this.contenido.declaracion_originalidad}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.M),t.Y36(g.ez),t.Y36(q.e),t.Y36(C.K),t.Y36(Mt.f))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-crear"]],decls:85,vars:39,consts:[[1,"solicitudes-title"],["header","Cargando...","styleClass","mi-dialog custom-dialog",3,"visible","modal","responsive","baseZIndex","showHeader","closable","dismissableMask","visibleChange"],[2,"text-align","center"],["strokeWidth","8","fill","#fff"],[1,"form-container"],[1,"p-grid","p-dir-col","p-fluid"],[1,"p-col-12","p-md-6"],[1,"p-field"],["for","titulo"],[1,"p-inputgroup"],["type","text","id","titulo_articulo",1,"p-inputtext",3,"ngModel","ngModelChange"],[1,"p-inputgroup-addon"],[1,"pi","pi-bookmark"],["for","autores"],["optionLabel","nombres","id","autor","name","autor","dropdownIcon","pi pi-user",1,"custom-dropdown",3,"options","ngModel","filter","ngModelChange"],["pTemplate","item"],[1,"p-col-12"],["for","contenido"],["pButton","",1,"p-button-warning","font-bold","p-button-outlined","button-icon-right",3,"label","click"],[1,"pi","pi-plus"],[4,"ngIf"],[1,"p-grid","p-col-12","p-md-6"],["for","afiliaci\xf3n"],["id","afiliacion",1,"p-inputtext",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"pi","pi-link"],["id","revista","dropdownIcon","pi pi-book","placeholder","seleccionar...","optionLabel","nombre","optionValue","id",3,"options","filter","ngModel","ngModelChange"],["pButton","","label","Guardar","icon","pi pi-save",1,"p-button","p-button-outlined","p-button-success","p-button-rounded",3,"click"],["header","Agregar Contenido","styleClass","mi-dialog custom-dialog",3,"visible","modal","responsive","baseZIndex","showHeader","closable","dismissableMask","visibleChange"],["for","archivo_adjunto"],[1,"archivo-area"],["for","archivo_adjunto",1,"custom-file-upload"],[1,"pi","pi-upload"],[2,"margin-left","5px"],["pButton","","type","file","id","archivo_adjunto","accept",".pdf","required","",2,"display","none",3,"change"],["for","declaracion_originalidad"],["for","declaracion_originalidad",1,"custom-file-upload"],["pButton","","type","file","id","declaracion_originalidad","accept",".pdf","required","",2,"display","none",3,"change"],["pButton","","icon","pi pi-save","label","Guardar contenido",1,"p-button-success","p-button-outlined",3,"click"],["pButton","","icon","pi pi-times","label","Cancelar",1,"p-button-secondary","p-button-outlined",3,"click"],[1,"pi","pi-check-circle"],[3,"value"]],template:function(e,o){1&e&&(t._UZ(0,"br"),t._UZ(1,"br"),t._UZ(2,"br"),t.TgZ(3,"h2",0),t._uU(4,"Generar solicitud"),t.qZA(),t._UZ(5,"br"),t.TgZ(6,"p-dialog",1),t.NdJ("visibleChange",function(r){return o.solicitudEnProceso=r}),t.TgZ(7,"div",2),t._UZ(8,"p-progressSpinner",3),t.TgZ(9,"h2"),t._uU(10,"Su solicitud esta siendo generada..."),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"div",4),t.TgZ(12,"div",5),t.TgZ(13,"div",6),t.TgZ(14,"div",7),t.TgZ(15,"label",8),t._uU(16,"T\xedtulo del art\xedculo"),t.qZA(),t.TgZ(17,"div",9),t.TgZ(18,"input",10),t.NdJ("ngModelChange",function(r){return o.solicitud.titulo_articulo=r}),t.qZA(),t.TgZ(19,"span",11),t._UZ(20,"i",12),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",6),t.TgZ(22,"div",7),t.TgZ(23,"label",13),t._uU(24,"Autores"),t.qZA(),t.TgZ(25,"p-multiSelect",14),t.NdJ("ngModelChange",function(r){return o.selectedAutores=r}),t.YNc(26,qt,1,2,"ng-template",15),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",16),t.TgZ(28,"div",7),t.TgZ(29,"label",17),t._uU(30,"Contenido"),t.qZA(),t.TgZ(31,"button",18),t.NdJ("click",function(){return o.abrirContenido()}),t._UZ(32,"i",19),t.qZA(),t.YNc(33,wt,3,1,"p",20),t.qZA(),t.qZA(),t.TgZ(34,"div",5),t.TgZ(35,"div",21),t.TgZ(36,"div",7),t.TgZ(37,"label",22),t._uU(38,"Afiliaci\xf3n"),t.qZA(),t.TgZ(39,"div",9),t.TgZ(40,"select",23),t.NdJ("ngModelChange",function(r){return o.solicitud.afiliacion=r}),t.YNc(41,Pt,2,2,"option",24),t.qZA(),t.TgZ(42,"span",11),t._UZ(43,"i",25),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(44,"div",21),t.TgZ(45,"div",7),t.TgZ(46,"label",22),t._uU(47,"Revista a la cual someter el art\xedculo"),t.qZA(),t.TgZ(48,"p-dropdown",26),t.NdJ("ngModelChange",function(r){return o.solicitud.revista=r}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(49,"div",16),t.TgZ(50,"button",27),t.NdJ("click",function(){return o.guardarSolicitud()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(51,"br"),t._UZ(52,"br"),t.TgZ(53,"p-dialog",28),t.NdJ("visibleChange",function(r){return o.mostrarDialogoAgregarContenido=r}),t.TgZ(54,"div",5),t.TgZ(55,"div",6),t.TgZ(56,"div",7),t.TgZ(57,"label",29),t._uU(58,"Art\xedculo"),t.qZA(),t.TgZ(59,"div",30),t.TgZ(60,"div"),t.TgZ(61,"label",31),t._UZ(62,"i",32),t.TgZ(63,"span",33),t._uU(64,"Seleccionar archivo"),t.qZA(),t.TgZ(65,"input",34),t.NdJ("change",function(r){return o.handleFileInput(r)}),t.qZA(),t.qZA(),t.qZA(),t._UZ(66,"br"),t.YNc(67,yt,4,1,"div",20),t.qZA(),t.qZA(),t.TgZ(68,"div",7),t.TgZ(69,"label",35),t._uU(70,"Declaraci\xf3n de originalidad"),t.qZA(),t.TgZ(71,"div",30),t.TgZ(72,"div"),t.TgZ(73,"label",36),t._UZ(74,"i",32),t.TgZ(75,"span",33),t._uU(76,"Seleccionar archivo"),t.qZA(),t.TgZ(77,"input",37),t.NdJ("change",function(r){return o.handleFileInputOriginalidad(r)}),t.qZA(),t.qZA(),t.qZA(),t._UZ(78,"br"),t.YNc(79,Ut,4,1,"div",20),t.qZA(),t.qZA(),t._UZ(80,"br"),t.TgZ(81,"div",16),t.TgZ(82,"button",38),t.NdJ("click",function(){return o.guardarContenido()}),t.qZA(),t.TgZ(83,"button",39),t.NdJ("click",function(){return o.cerrarContenido()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(84,"p-toast")),2&e&&(t.xp6(6),t.Akn(t.DdM(35,Et)),t.Q6J("visible",o.solicitudEnProceso)("modal",!0)("responsive",!0)("baseZIndex",1e4)("showHeader",!1)("closable",!1)("dismissableMask",!1),t.xp6(2),t.Akn(t.DdM(36,kt)),t.xp6(10),t.Q6J("ngModel",o.solicitud.titulo_articulo),t.xp6(7),t.Q6J("options",o.autores)("ngModel",o.selectedAutores)("filter",!0),t.xp6(6),t.s9C("label",o.textoBoton),t.xp6(2),t.Q6J("ngIf",o.solicitud.contenidoSolicitud),t.xp6(7),t.Q6J("ngModel",o.solicitud.afiliacion),t.xp6(1),t.Q6J("ngForOf",o.afiliacionOptions),t.xp6(7),t.Q6J("options",o.revistas)("filter",!0)("ngModel",o.solicitud.revista),t.xp6(5),t.Akn(t.DdM(37,Dt)),t.Q6J("visible",o.mostrarDialogoAgregarContenido)("modal",!0)("responsive",!0)("baseZIndex",1e4)("showHeader",!1)("closable",!1)("dismissableMask",!1),t.xp6(14),t.Q6J("ngIf",o.archivoSeleccionado),t.xp6(12),t.Q6J("ngIf",o.originalidadSeleccionada),t.xp6(5),t.Akn(t.DdM(38,Jt)))},directives:[Z.V,Ot,l.Fj,l.JJ,l.On,S.NU,g.jx,b.Hq,d.O5,l.EJ,d.sg,l.YN,l.Kr,D.Lt,T.FN],styles:[".solicitudes-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;margin-bottom:20px;text-align:center;color:#fa6357;text-transform:uppercase;letter-spacing:2px}.form-container[_ngcontent-%COMP%]{width:70%;margin:0 auto;padding:20px;border:1px solid #ccc;border-radius:4px;background-color:#f5f5f5}.p-field[_ngcontent-%COMP%]{margin-bottom:20px}.p-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}.p-inputtext[_ngcontent-%COMP%], .p-inputtextarea[_ngcontent-%COMP%]{width:100%}button[type=submit][_ngcontent-%COMP%]{margin-top:20px;border-radius:20px;padding:8px 16px}.p-inputgroup-addon[_ngcontent-%COMP%]{background-color:#f4f4f4;border-color:#6c757d;color:#6c757d}.p-inputgroup-addon[_ngcontent-%COMP%]   .pi[_ngcontent-%COMP%]{font-size:1rem}.mi-dialog[_ngcontent-%COMP%]   .p-dialog-header[_ngcontent-%COMP%]{background-color:#f0f0f0;color:#333}.mi-dialog[_ngcontent-%COMP%]   .p-dialog-content[_ngcontent-%COMP%]{background-color:#fff}.mi-dialog[_ngcontent-%COMP%]   .p-dialog-footer[_ngcontent-%COMP%]{background-color:#f0f0f0}.mi-dialog[_ngcontent-%COMP%]   .p-dialog-header[_ngcontent-%COMP%]{background-color:#fa6357;color:#fff;border:none;padding:1rem}.mi-dialog[_ngcontent-%COMP%]   .p-dialog-header[_ngcontent-%COMP%]   .p-dialog-title[_ngcontent-%COMP%]{font-size:20px;margin:0}.mi-dialog[_ngcontent-%COMP%]   .p-dialog-header[_ngcontent-%COMP%]   .p-dialog-title[_ngcontent-%COMP%]   .pi[_ngcontent-%COMP%]{margin-right:.5rem}.custom-dialog[_ngcontent-%COMP%]   .p-dialog-titlebar[_ngcontent-%COMP%]{background-color:#fa6357;color:#fff;border:none;padding:1rem}.custom-dialog[_ngcontent-%COMP%]   .p-dialog-title[_ngcontent-%COMP%]{font-size:20px;margin:0}.custom-dialog[_ngcontent-%COMP%]   .p-dialog-title[_ngcontent-%COMP%]   .pi[_ngcontent-%COMP%]{margin-right:.5rem}.p-dropdown-fullwidth[_ngcontent-%COMP%]{width:100%!important}.p-button-rounded[_ngcontent-%COMP%]:hover{background-color:#4caf50!important;border-color:#4caf50!important;color:#fff!important}.p-button-rounded[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.file-input-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.file-input-label[_ngcontent-%COMP%]{padding:6px 12px;background-color:#f0f0f0;border:1px solid #ccc;border-radius:4px;cursor:pointer;transition:background-color .3s ease-in-out}.file-input-label[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.file-input[_ngcontent-%COMP%]{display:none}.file-drop-container[_ngcontent-%COMP%]{border:2px dashed #ccc;padding:20px;text-align:center;cursor:pointer;position:relative}.file-drop-message[_ngcontent-%COMP%]{font-size:14px;margin-top:10px;color:#777}.loading-bar[_ngcontent-%COMP%]{width:100%;height:40px;background-color:#fff;position:relative;display:none}.bar[_ngcontent-%COMP%]{height:100%;width:0;background-color:#fff;position:absolute;top:0;left:0;transition:width .3s ease}.custom-dialog[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;justify-content:center;align-items:center}.p-dialog.custom-dialog[_ngcontent-%COMP%]   .p-dialog-wrapper[_ngcontent-%COMP%]{max-width:80%;width:auto}.p-dialog.custom-dialog[_ngcontent-%COMP%]   .p-dialog-content[_ngcontent-%COMP%]{text-align:center}.button-icon-right[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;align-items:center}.custom-file-upload[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:6px 12px;cursor:pointer;background-color:#fa6357;color:#fff;border:none;border-radius:4px;transition:background-color .3s ease-in-out;text-align:center}.custom-file-upload[_ngcontent-%COMP%]:hover{background-color:#fa6357}.archivo-area[_ngcontent-%COMP%]{margin-top:10px;padding:10px;background-color:#f0f0f0;border:1px dashed #999;border-radius:4px;align-items:center;justify-content:space-between}.archivo-area[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;margin-right:10px}.custom-file-upload[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}"]}),i})()},{path:"editar",component:gt},{path:"eliminar",component:Tt},{path:"mis_solicitudes",component:(()=>{class i{constructor(e,o,n,r,c,O){this.dialogService=e,this.solicitudesService=o,this.authService=n,this.userService=r,this.messageService=c,this.sanitizer=O,this.minDate=new Date,this.solicitudes=[],this.displayDialog=!1,this.solicitudSeleccionada=void 0,this.usuarios=[],this.seguimientos=[],this.EditarDialog=!1,this.contenidos=[],this.fileURL=null,this.originalidadURL=null,this.contenidoSeleccionado={id:0,declaracion_originalidad:"",archivo_adjunto:"",status:!0},this.archivoAdjunto=null,this.declaracionOriginalidad=null,this.selectedFile=null,this.selectedFile2=null,this.archivoSeleccionado="",this.archivoSeleccionado2=""}ngOnInit(){this.obtenerUsuarios(),this.obtenerSeguimientos(),this.cargarContenidos(),this.usuarioId=this.authService.getUserId(),void 0!==this.usuarioId?this.cargarSolicitudesUsuario(this.usuarioId):console.error("El usuario no tiene un ID v\xe1lido.")}cargarSolicitudesUsuario(e){this.solicitudesService.obtenerSolicitudesPorUsuario(e).subscribe(o=>{this.solicitudes=o},o=>{console.error("Error al cargar las solicitudes del usuario:",o)})}cargarContenidos(){this.solicitudesService.obtenerContenidos().subscribe(e=>{this.contenidos=e},e=>{console.error("Error al cargar los contenidos:",e)})}obtenerSeguimientos(){this.solicitudesService.obtenerSeguimientos().subscribe(e=>{e?this.seguimientos=e:console.error("Error al obtener los seguimientos")})}obtenerUsuarios(){this.userService.ObtenerUsuarios().subscribe(e=>{e&&Array.isArray(e)?this.usuarios=e:console.error("Respuesta inv\xe1lida del backend:",e)},e=>{console.error("Error al obtener la lista de usuarios",e)})}getUsuarioNombre(e){if(e&&e.length>0){const o=new Set;for(const n of e){const r=this.usuarios.find(c=>c.user===n);r&&o.add(`${r.nombres} ${r.apellidos}`)}if(o.size>0)return Array.from(o).join(", ")}return"Autores desconocidos"}MostrarEditarContenido(e){const o=this.contenidos.find(n=>n.id===e);o&&(this.contenidoSeleccionado=Object.assign({},o),this.EditarDialog=!0)}guardarContenido(){const e=new FormData;this.selectedFile&&e.append("archivo_adjunto",this.selectedFile),this.selectedFile2&&e.append("declaracion_originalidad",this.selectedFile2),e.append("id",this.contenidoSeleccionado.id.toString()),e.append("status",this.contenidoSeleccionado.status.toString()),this.solicitudesService.editarContenido2(e).subscribe(o=>{this.messageService.add({severity:"success",summary:"Contenido editado",detail:"El contenido se edit\xf3 exitosamente"}),this.EditarDialog=!1,void 0!==this.usuarioId?this.cargarSolicitudesUsuario(this.usuarioId):console.error("El usuario no tiene un ID v\xe1lido.")},o=>{console.error("Error al editar contenido:",o),this.messageService.add({severity:"error",summary:"Error al editar contenido",detail:"Ocurri\xf3 un error al editar el contenido"})})}OcultarEditarContenido(){this.EditarDialog=!1}debeMostrarEditar(e){return this.seguimientos.filter(r=>r.solicitudId===e.id).some(r=>![1,2,null].includes(r.estado_seguimiento))}mostrarDialogo(e){this.solicitudSeleccionada=e,this.displayDialog=!0,e.contenidoSolicitud>0?this.solicitudesService.obtenerContenidoPorId(e.contenidoSolicitud).subscribe(o=>{o?(this.contenidoSeleccionado=o,this.previsualizarArchivo(o.id,"archivo_adjunto"),this.previsualizarArchivo(o.id,"originalidad")):console.error("El contenido no est\xe1 en el formato esperado.")},o=>{console.error(o)}):console.error("El ID de contenido es nulo.")}cerrarDialogo(){this.displayDialog=!1}previsualizarArchivo(e,o){this.solicitudesService.descargarArchivo(e,o).subscribe(n=>{const r=new FileReader;r.onload=()=>{const c=this.sanitizer.bypassSecurityTrustResourceUrl(r.result);"archivo_adjunto"===o?this.fileURL=c:"originalidad"===o&&(this.originalidadURL=c)},r.readAsDataURL(n)},n=>{console.error("Error al descargar el archivo:",n)})}descargarArchivo(e,o){this.solicitudesService.descargarArchivo(e,o).subscribe(n=>{const r=window.URL.createObjectURL(n),c=document.createElement("a");c.href=r,c.download=`${o}_${e}`,document.body.appendChild(c),c.click(),window.URL.revokeObjectURL(r),document.body.removeChild(c)},n=>{console.error("Error al descargar el archivo:",n)})}onFileChangeArticulo(e){var o;const n=null===(o=null==e?void 0:e.target)||void 0===o?void 0:o.files;this.selectedFile=n&&n.length>0?n[0]:null,this.archivoSeleccionado=e.target.files[0].name}onFileChangeDeclaracion(e){var o;const n=null===(o=null==e?void 0:e.target)||void 0===o?void 0:o.files;this.selectedFile2=n&&n.length>0?n[0]:null,this.archivoSeleccionado2=e.target.files[0].name}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(x.xA),t.Y36(m.M),t.Y36(q.e),t.Y36(C.K),t.Y36(g.ez),t.Y36(k.H7))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-mis-solicitudes"]],decls:46,vars:18,consts:[[1,"solicitudes-title"],["class","solicitudes-container",4,"ngIf","ngIfElse"],["noSolicitudes",""],[3,"header","visible","modal","style","showHeader","closable","dismissableMask","visibleChange",4,"ngIf"],["header","Editar Contenido","styleClass","mi-dialog custom-dialog",3,"visible","modal","responsive","baseZIndex","showHeader","closable","dismissableMask","visibleChange"],[1,"p-grid","p-dir-col","p-fluid","solicitud-form"],[1,"p-col-12","p-md-6"],["for","archivo_adjunto"],[1,"archivo-area"],["for","archivo_adjunto",1,"custom-file-upload"],[1,"pi","pi-upload"],[2,"margin-left","5px"],["pButton","","type","file","id","archivo_adjunto","required","",2,"display","none",3,"change"],[4,"ngIf"],["for","declaracion_originalidad"],["for","declaracion_originalidad",1,"custom-file-upload"],["pButton","","type","file","id","declaracion_originalidad","required","",2,"display","none",3,"change"],[1,"p-col-12"],["pButton","","label","Guardar","icon","pi pi-save",1,"p-button-success","p-button-outlined",3,"click"],["pButton","","label","Cancelar","icon","pi pi-times",1,"p-button-secondary","p-button-outlined",3,"click"],[1,"solicitudes-container"],["class","solicitud-card-container",4,"ngFor","ngForOf"],[1,"solicitud-card-container"],[1,"solicitud-card","p-shadow-4"],[1,"solicitud-content"],[1,"solicitud-header"],["src","assets/logo_r.jpg",1,"solicitud-logo"],[1,"solicitud-title-container"],[1,"solicitud-title"],[1,"corner-element"],[1,"solicitud-info"],[1,"solicitud-actions"],["pButton","","type","button","label","Ver","icon","pi pi-search",1,"p-button-outlined","p-button-secondary","w-100",2,"font-weight","bold",3,"click"],["pButton","","type","button","label","Editar","icon","pi pi-pencil","style","font-weight: bold;","class","p-button-outlined p-button-warning w-100",3,"click",4,"ngIf"],["pButton","","type","button","label","Editar","icon","pi pi-pencil",1,"p-button-outlined","p-button-warning","w-100",2,"font-weight","bold",3,"click"],[1,"no-solicitudes-message"],[3,"header","visible","modal","showHeader","closable","dismissableMask","visibleChange"],["header","Previsualizaci\xf3n del Archivo Adjunto"],["width","100%","height","400px","type","application/pdf",3,"src",4,"ngIf"],["header","Previsualizaci\xf3n de la Declaraci\xf3n de Originalidad"],[2,"display","flex","justify-content","space-around"],["pButton","","type","button","label","Descargar Archivo Adjunto","icon","pi pi-download",1,"p-button-warning","font-bold",3,"click"],["pButton","","type","button","label","Descargar Declaraci\xf3n de Originalidad","icon","pi pi-download",1,"p-button-warning","font-bold",3,"click"],[2,"display","flex","justify-content","center","align-items","center"],["pButton","","type","button","label","Cerrar","icon","pi pi-times",1,"p-button-outlined","p-button-warning","font-bold",3,"click"],["width","100%","height","400px","type","application/pdf",3,"src"]],template:function(e,o){if(1&e&&(t._UZ(0,"br"),t._UZ(1,"br"),t.TgZ(2,"h2",0),t._uU(3,"Mis solicitudes"),t.qZA(),t.YNc(4,jt,2,1,"div",1),t.YNc(5,Yt,2,0,"ng-template",null,2,t.W1O),t.YNc(7,Vt,11,12,"p-dialog",3),t.TgZ(8,"p-dialog",4),t.NdJ("visibleChange",function(r){return o.EditarDialog=r}),t.TgZ(9,"div",5),t.TgZ(10,"div",6),t.TgZ(11,"label",7),t.TgZ(12,"b"),t._uU(13,"Art\xedculo"),t.qZA(),t.qZA(),t._UZ(14,"br"),t.TgZ(15,"div",8),t.TgZ(16,"div"),t.TgZ(17,"label",9),t._UZ(18,"i",10),t.TgZ(19,"span",11),t._uU(20,"Seleccionar archivo"),t.qZA(),t.TgZ(21,"input",12),t.NdJ("change",function(r){return o.onFileChangeArticulo(r)}),t.qZA(),t.qZA(),t.qZA(),t._UZ(22,"br"),t.YNc(23,Rt,4,1,"div",13),t.qZA(),t.qZA(),t._UZ(24,"br"),t._UZ(25,"br"),t.TgZ(26,"div",6),t.TgZ(27,"label",14),t.TgZ(28,"b"),t._uU(29,"Declaraci\xf3n de originalidad"),t.qZA(),t.qZA(),t._UZ(30,"br"),t.TgZ(31,"div",8),t.TgZ(32,"div"),t.TgZ(33,"label",15),t._UZ(34,"i",10),t.TgZ(35,"span",11),t._uU(36,"Seleccionar archivo"),t.qZA(),t.TgZ(37,"input",16),t.NdJ("change",function(r){return o.onFileChangeDeclaracion(r)}),t.qZA(),t.qZA(),t.qZA(),t._UZ(38,"br"),t.YNc(39,Ht,4,1,"div",13),t.qZA(),t.qZA(),t._UZ(40,"br"),t._UZ(41,"hr"),t.TgZ(42,"div",17),t.TgZ(43,"button",18),t.NdJ("click",function(){return o.guardarContenido()}),t.qZA(),t.TgZ(44,"button",19),t.NdJ("click",function(){return o.OcultarEditarContenido()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(45,"p-toast")),2&e){const n=t.MAs(6);t.xp6(4),t.Q6J("ngIf",o.solicitudes.length>0)("ngIfElse",n),t.xp6(3),t.Q6J("ngIf",o.solicitudSeleccionada),t.xp6(1),t.Akn(t.DdM(16,$t)),t.Q6J("visible",o.EditarDialog)("modal",!0)("responsive",!0)("baseZIndex",1e4)("showHeader",!1)("closable",!1)("dismissableMask",!1),t.xp6(15),t.Q6J("ngIf",o.archivoSeleccionado),t.xp6(16),t.Q6J("ngIf",o.archivoSeleccionado),t.xp6(6),t.Akn(t.DdM(17,Gt))}},directives:[d.O5,d.sg,b.Hq,Z.V,v.UQ,v.US,T.FN],pipes:[d.uU],styles:[".solicitudes-background[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:20px 0}.solicitudes-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;width:80%;margin:0 auto}.solicitud-card-container[_ngcontent-%COMP%]{flex-basis:calc(100% - 20px);margin:20px}.solicitud-card[_ngcontent-%COMP%]{position:relative;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a;transition:transform .3s ease-in-out,box-shadow .3s ease-in-out;padding:20px;width:100%}.solicitud-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 6px 12px #00000026}.solicitud-date[_ngcontent-%COMP%]{font-size:14px;color:#777}.solicitud-info[_ngcontent-%COMP%]{margin:5px 0}.solicitud-content[_ngcontent-%COMP%]{margin-top:10px;font-size:14px}.solicitud-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;text-decoration:none;transition:color .3s ease-in-out}.solicitud-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0056b3}.solicitudes-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;margin-bottom:70px;text-align:center;color:#fa6357;text-transform:uppercase;letter-spacing:2px}.w-40p[_ngcontent-%COMP%]{width:40%}.w-80p[_ngcontent-%COMP%]{width:80%}body[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;margin:0;padding:0}.solicitud-logo[_ngcontent-%COMP%]{width:70px;height:70px;margin-right:10px}.solicitud-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.solicitud-logo[_ngcontent-%COMP%]{width:70px;height:70px;margin-right:10px}.solicitud-title-container[_ngcontent-%COMP%]{flex:1}.solicitud-title[_ngcontent-%COMP%]{font-size:18px;color:#2c3e50;margin:0;text-align:center;width:100%}.solicitud-text[_ngcontent-%COMP%]{font-size:14px;color:#333;margin-top:10px}.solicitud-actions[_ngcontent-%COMP%]{margin-top:10px}.p-button.p-button-outlined.p-button-secondary.w-100[_ngcontent-%COMP%], .p-button.p-button-outlined.p-button-warning.w-100[_ngcontent-%COMP%]{width:100%;text-align:center}.no-solicitudes-message[_ngcontent-%COMP%]{text-align:center;font-size:16px;color:#777;background-color:wheat;border:2px;border-color:#666;margin:2px;padding:2px}.corner-element[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;color:#555;padding:5px 10px;border-radius:4px}.content-container[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto;border:1px solid #ccc;padding:10px;background-color:#f9f9f9}.p-accordion[_ngcontent-%COMP%]   .p-accordion-tab[_ngcontent-%COMP%]{background-color:#f5f5f5!important;border:none!important;margin-bottom:10px!important;border-radius:5px!important;box-shadow:0 2px 4px #0000001a!important}.p-panel[_ngcontent-%COMP%]{background-color:#fff!important;border:1px solid #e0e0e0!important;border-radius:5px!important;padding:10px!important;box-shadow:0 1px 2px #0000001a!important}  .p-accordion .p-accordion-tab{border:1px solid #ddd;border-top:none;margin-bottom:1px}  .p-accordion .p-accordion-header{background-color:#f5f5f5;border:1px solid #ddd;padding:12px;cursor:pointer;font-size:16px;transition:background-color .3s}  .p-accordion .p-accordion-header:hover{background-color:#e9e9e9}  .p-accordion .p-accordion-content{padding:12px;border:1px solid #ddd;border-top:none;background-color:#fafafa}.p-field[_ngcontent-%COMP%]{margin-bottom:1rem;font-weight:700}.ui-dialog-editar[_ngcontent-%COMP%]   .p-dialog-content[_ngcontent-%COMP%]{padding:20px;background-color:#f5f5f5;border-radius:8px}.ui-dialog-editar[_ngcontent-%COMP%]   .p-dialog-header[_ngcontent-%COMP%]{display:none}.ui-dialog-editar[_ngcontent-%COMP%]   .solicitud-form[_ngcontent-%COMP%]   .p-field[_ngcontent-%COMP%]{margin-bottom:20px}.ui-dialog-editar[_ngcontent-%COMP%]   .solicitud-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;font-size:16px;color:#333}.ui-dialog-editar[_ngcontent-%COMP%]   .solicitud-form[_ngcontent-%COMP%]   .p-inputtextarea[_ngcontent-%COMP%], .ui-dialog-editar[_ngcontent-%COMP%]   .solicitud-form[_ngcontent-%COMP%]   .p-inputtext[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:4px;font-size:16px}.ui-dialog-editar[_ngcontent-%COMP%]   .solicitud-form[_ngcontent-%COMP%]   .p-inputtextarea[_ngcontent-%COMP%]:focus, .ui-dialog-editar[_ngcontent-%COMP%]   .solicitud-form[_ngcontent-%COMP%]   .p-inputtext[_ngcontent-%COMP%]:focus{border-color:#fa6357;box-shadow:0 0 0 .2rem #007bff40}.ui-dialog-editar[_ngcontent-%COMP%]   .solicitud-form[_ngcontent-%COMP%]   .p-inputtextarea[_ngcontent-%COMP%]{min-height:100px}.custom-file-upload[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:6px 12px;cursor:pointer;background-color:#fa6357;color:#fff;border:none;border-radius:4px;transition:background-color .3s ease-in-out;text-align:center}.custom-file-upload[_ngcontent-%COMP%]:hover{background-color:#f9392b}.archivo-area[_ngcontent-%COMP%]{margin-top:10px;padding:10px;background-color:#f0f0f0;border:1px dashed #999;border-radius:4px;align-items:center;justify-content:space-between}.archivo-area[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;margin-right:10px}.custom-file-upload[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}"]}),i})()}];let Wt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[E.Bz.forChild(Kt)],E.Bz]}),i})();var Xt=s(657),te=s(7307),ee=s(5652),oe=s(97),ie=s(3724),ne=s(8061),re=s(8205);let ae=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[d.uU,m.M,q.e],imports:[[d.ez,Wt,l.u5,l.UX,M.U$,A.j,b.hJ,Xt.kK,T.EV,Z.S,te.n,ee._8,D.kW,oe.$,ie.O,v.fx,ne.Q,re.O,S.q4,St]]}),i})()}}]);