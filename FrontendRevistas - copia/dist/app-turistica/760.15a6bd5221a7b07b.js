"use strict";(self.webpackChunkAppTuristica=self.webpackChunkAppTuristica||[]).push([[760],{760:(j,f,n)=>{n.r(f),n.d(f,{SubCategoriaModule:()=>$});var y=n(9808),b=n(1813),o=n(3075),l=n(2340),t=n(7587),u=n(8529),c=n(9783),h=n(1424),C=n(4036),m=n(845),p=n(1497);let A=(()=>{class i{constructor(e,r,s){this.clasificadosService=e,this.fb=r,this.messageService=s,this.API_URI=l.N.API_URI,this.categorias=[],this.subCategorias=[],this.form=this.fb.group({name:["",o.kI.required],categoryId:["",o.kI.required]})}ngOnInit(){this.token=localStorage.getItem("token"),this.traerCategorias(),this.traerSubCategorias()}onSubmit(){if(this.subCategorias.includes(this.form.value.name.trim().toLowerCase()))return this.messageService.add({severity:"error",summary:"Error",detail:"Esta categoria ya existe"});let e={name:this.form.value.name,categoryId:this.form.value.categoryId.id};try{this.clasificadosService.create(`${this.API_URI}/advertisements/sub/category/create/`,e,this.token).subscribe(r=>(this.form.reset(),this.messageService.add({severity:"success",summary:"Success",detail:"Creado correctamente !!"})))}catch(r){return console.log(r),this.messageService.add({severity:"error",summary:"Error",detail:"Hubo un problema en la peticion"})}}traerCategorias(){this.categorias=[];try{this.clasificadosService.getAll(`${this.API_URI}/advertisements/category/`,this.token).subscribe(e=>this.categorias=e.data.results)}catch(e){console.log(e)}}traerSubCategorias(){this.subCategorias=[];try{this.clasificadosService.getAll(`${this.API_URI}/advertisements/sub/category/`,this.token).subscribe(e=>{e.data.results.map(r=>this.subCategorias.push(r.name.trim().toLowerCase()))})}catch(e){console.log(e)}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(u.U),t.Y36(o.qu),t.Y36(c.ez))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-crear"]],decls:8,vars:4,consts:[[1,"main"],[3,"formGroup","submit"],["type","text","placeholder","Nombre","pInputText","","formControlName","name"],["placeholder","Selecciona una categoria","optionLabel","name","formControlName","categoryId",3,"options","showClear"],["pButton","","pRipple","","type","submit","label","Crear subCategoria",1,"p-button-success",3,"disabled"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h1"),t._uU(2,"Crear subCategoria"),t.qZA(),t.TgZ(3,"form",1),t.NdJ("submit",function(){return r.onSubmit()}),t._UZ(4,"input",2),t._UZ(5,"p-dropdown",3),t._UZ(6,"button",4),t.qZA(),t.qZA(),t._UZ(7,"p-toast")),2&e&&(t.xp6(3),t.Q6J("formGroup",r.form),t.xp6(2),t.Q6J("options",r.categorias)("showClear",!0),t.xp6(1),t.Q6J("disabled",!r.form.valid))},directives:[o._Y,o.JL,o.sg,o.Fj,h.o,o.JJ,o.u,C.Lt,m.Hq,p.FN],styles:[".main[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}form[_ngcontent-%COMP%]{width:500px;border:1px solid rgba(128,128,128,.555);border-radius:10px;padding:20px;display:flex;justify-content:center;align-items:center;flex-direction:column}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], button[_ngcontent-%COMP%], p-dropdown[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{margin-top:10px;width:100%}"]}),i})();var d=n(6697),Z=n(5315);function T(i,a){1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"th",9),t._uU(2,"Indice"),t.qZA(),t.TgZ(3,"th",9),t._uU(4,"ID"),t.qZA(),t.TgZ(5,"th",9),t._uU(6,"Nombre"),t.qZA(),t.TgZ(7,"th",9),t._uU(8,"Categoria"),t.qZA(),t.TgZ(9,"th",9),t._uU(10,"Editar"),t.qZA(),t.qZA())}function x(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t.TgZ(10,"button",10),t.NdJ("click",function(){const g=t.CHM(e).$implicit;return t.oxw().showEditar(g.id)}),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,r=a.rowIndex;t.xp6(2),t.Oqu(r),t.xp6(2),t.Oqu(e.id),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.categoriId)}}const I=function(){return{"min-width":"60rem"}},S=function(){return{width:"600px",height:"500px"}};let U=(()=>{class i{constructor(e,r,s){this.fb=e,this.clasificadosService=r,this.messageService=s,this.API_URI=l.N.API_URI,this.id="",this.subCategoria=[],this.subCategoriaVerificated=[],this.display=!1,this.form=this.fb.group({name:["",o.kI.required]})}ngOnInit(){this.token=localStorage.getItem("token"),this.traerSubCategorias()}showEditar(e){this.id=e,this.display=!this.display}submit(){if(this.subCategoriaVerificated.includes(this.form.value.name.trim().toLowerCase()))return this.messageService.add({severity:"error",summary:"Error",detail:"Esta SubCategoria ya existe"});try{this.clasificadosService.update(`${this.API_URI}/advertisements/sub/category/update/${this.id}/`,this.form.value,this.token).subscribe(e=>(this.traerSubCategorias(),this.form.reset(),this.display=!1,this.messageService.add({severity:"success",summary:"Success",detail:"Editado correctamente !!!"})))}catch(e){console.log(e)}}traerSubCategorias(){this.subCategoria=[],this.subCategoriaVerificated=[];try{this.clasificadosService.getAll(`${this.API_URI}/advertisements/sub/category/`,this.token).subscribe(e=>{this.subCategoria=e.data.results,e.data.results.map(r=>this.subCategoriaVerificated.push(r.name.trim().toLowerCase()))})}catch(e){console.log(e)}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(o.qu),t.Y36(u.U),t.Y36(c.ez))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-editar"]],decls:12,vars:12,consts:[[1,"main"],[3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],["header","Editar subCategoria",3,"visible","modal","draggable","resizable","visibleChange"],[1,"grid","dialog-form-crear","col-12","md:col-12","lg:col-12"],[3,"formGroup","submit"],["type","text","placeholder","Nombre","pInputText","","formControlName","name"],["pButton","","pRipple","","type","submit","label","Editar seccion",1,"p-button-warning",3,"disabled"],[2,"width","20%"],["pButton","","pRipple","","type","button","icon","pi pi-pencil",1,"p-button-rounded","p-button-warning","mx-3",3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h1"),t._uU(2,"Editar subCategorias"),t.qZA(),t.TgZ(3,"p-table",1),t.YNc(4,T,11,0,"ng-template",2),t.YNc(5,x,11,4,"ng-template",3),t.qZA(),t.qZA(),t.TgZ(6,"p-dialog",4),t.NdJ("visibleChange",function(g){return r.display=g}),t.TgZ(7,"div",5),t.TgZ(8,"form",6),t.NdJ("submit",function(){return r.submit()}),t._UZ(9,"input",7),t._UZ(10,"button",8),t.qZA(),t.qZA(),t.qZA(),t._UZ(11,"p-toast")),2&e&&(t.xp6(3),t.Q6J("value",r.subCategoria)("tableStyle",t.DdM(10,I)),t.xp6(3),t.Akn(t.DdM(11,S)),t.Q6J("visible",r.display)("modal",!0)("draggable",!1)("resizable",!1),t.xp6(2),t.Q6J("formGroup",r.form),t.xp6(2),t.Q6J("disabled",!r.form.valid))},directives:[d.iA,c.jx,m.Hq,Z.V,o._Y,o.JL,o.sg,o.Fj,h.o,o.JJ,o.u,p.FN],styles:[".main[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}form[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;flex-direction:column;padding:20px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], button[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], p-dropdown[_ngcontent-%COMP%]{margin-top:10px;width:80%}"]}),i})();var v=n(7307);function q(i,a){1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"th",4),t._uU(2,"Indice"),t.qZA(),t.TgZ(3,"th",4),t._uU(4,"ID"),t.qZA(),t.TgZ(5,"th",4),t._uU(6,"Nombre"),t.qZA(),t.TgZ(7,"th",4),t._uU(8,"Seccion"),t.qZA(),t.TgZ(9,"th",4),t._uU(10,"Eliminar"),t.qZA(),t.qZA())}function P(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._UZ(10,"p-confirmPopup"),t.TgZ(11,"button",5),t.NdJ("click",function(s){const _=t.CHM(e).$implicit;return t.oxw().confirm(s,_.id)}),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,r=a.rowIndex;t.xp6(2),t.Oqu(r),t.xp6(2),t.Oqu(e.id),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.categoriId)}}const E=function(){return{"min-width":"60rem"}};let O=(()=>{class i{constructor(e,r,s){this.clasificadosService=e,this.messageService=r,this.confirmationService=s,this.API_URI=l.N.API_URI,this.subCategorias=[]}ngOnInit(){this.token=localStorage.getItem("token"),this.traerSubCategorias()}traerSubCategorias(){this.subCategorias=[];try{this.clasificadosService.getAll(`${this.API_URI}/advertisements/sub/category/`,this.token).subscribe(e=>this.subCategorias=e.data.results)}catch(e){console.log(e)}}confirm(e,r){this.confirmationService.confirm({target:e.target,message:"\xbfSeguro que desea eliminar esta subCategoria?",icon:"pi pi-exclamation-triangle",accept:()=>{try{this.clasificadosService.delete(`${this.API_URI}/advertisements/sub/category/delete/${r}/`,this.token).subscribe(s=>(this.traerSubCategorias(),this.messageService.add({severity:"success",summary:"Success",detail:"Eliminado correctamente !!!"})))}catch(s){return console.log(s),this.messageService.add({severity:"error",summary:"Error",detail:"Hubo un problema en la consulta"})}},reject:()=>{}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(u.U),t.Y36(c.ez),t.Y36(c.YP))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-eliminar"]],decls:8,vars:3,consts:[[1,"main"],[3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],[2,"width","10%"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"p-button-rounded","p-button-danger","mx-3",3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h1"),t._uU(2,"Eliminar subCategorias"),t.qZA(),t.TgZ(3,"p-table",1),t.YNc(4,q,11,0,"ng-template",2),t.YNc(5,P,12,4,"ng-template",3),t.qZA(),t.qZA(),t._UZ(6,"p-toast"),t._UZ(7,"p-confirmPopup")),2&e&&(t.xp6(3),t.Q6J("value",r.subCategorias)("tableStyle",t.DdM(2,E)))},directives:[d.iA,c.jx,v.P,m.Hq,p.FN],styles:[".main[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}"]}),i})();function M(i,a){1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2,"Indice"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"ID"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Nombre"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Seccion"),t.qZA(),t.qZA())}function N(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.qZA()),2&i){const e=a.$implicit,r=a.rowIndex;t.xp6(2),t.Oqu(r),t.xp6(2),t.Oqu(e.id),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.categoriId)}}const w=function(){return{"min-width":"50rem"}},J=[{path:"crear",component:A},{path:"ver",component:(()=>{class i{constructor(e){this.clasificadosService=e,this.API_URI=l.N.API_URI,this.categorias=[]}ngOnInit(){this.token=localStorage.getItem("token"),this.traerCategorias()}traerCategorias(){try{this.clasificadosService.getAll(`${this.API_URI}/advertisements/sub/category/`,this.token).subscribe(e=>{this.categorias=e.data.results})}catch(e){console.log(e)}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(u.U))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-ver"]],decls:6,vars:3,consts:[[1,"main"],[3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h1"),t._uU(2,"Ver Categorias"),t.qZA(),t.TgZ(3,"p-table",1),t.YNc(4,M,9,0,"ng-template",2),t.YNc(5,N,9,4,"ng-template",3),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("value",r.categorias)("tableStyle",t.DdM(2,w)))},directives:[d.iA,c.jx],styles:[".main[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}"]}),i})()},{path:"editar",component:U},{path:"eliminar",component:O}];let R=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[b.Bz.forChild(J)],b.Bz]}),i})();var Y=n(3407);let $=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[y.ez,R,o.u5,o.UX,h.j,m.hJ,p.EV,d.U$,Z.S,C.kW,v.n,Y.A]]}),i})()}}]);